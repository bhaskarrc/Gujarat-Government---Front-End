<div class="container">
  <div class="form-wrapper">
    <div class="centerAlign mt-1">
      <h5 class="mb-0">Grant Release Order</h5>
      <h5>(As per Order No: Order 2, Date :31/12/2020 ) (Draft)</h5>
      <h6>Financial Department year :2018-2019 &nbsp;&nbsp; Revenue/Capital: Revenue</h6>
    </div>

    <form class="col-sm-12" [formGroup]="searchGrantOrder" (ngSubmit)="searchGrantOrderDetails()">
      <div class="row">
        <div class="col-sm-3">
          <mat-form-field class="full-width">
            <mat-select formControlName="finYear" placeholder="Financial year">
              <mat-option>
                <ngx-mat-select-search [formControl]="finYearCtrl" [placeholderLabel]="'Find Financial year...'"
                  [noEntriesFoundLabel]="'no matching Financial Year'">
                </ngx-mat-select-search>
              </mat-option>
              <mat-option *ngFor="let rc of finYear_list | filterSelectInput: finYearCtrl.value" [value]="rc.value">
                {{rc.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-sm-3">
          <mat-form-field class="full-width">
            <mat-select formControlName="level" (selectionChange)="ontoken($event)" placeholder="Level">
              <mat-option *ngFor="let rcs of level_list " [value]="rcs.value">
                {{rcs.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </form>


    <div class="rsClass"> (₹ in Lakhs) </div>
    <div class="mat-elevation-z8 mt-2" *ngIf="!isvisibledata">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

        <!-- Sr.No Column -->
        <ng-container matColumnDef="srno">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> No. </th>
          <td mat-cell *matCellDef="let element; let i= index" class="centerAlign"> {{i+1}} </td>
          <td mat-footer-cell *matFooterCellDef>Total</td>
        </ng-container>

        <ng-container matColumnDef="serialNoLabel">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Sr No.</th>
        </ng-container>

        <!-- Department Column -->
        <ng-container matColumnDef="departmentName">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Department Name </th>
          <td mat-cell *matCellDef="let element"> {{element.departmentName}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="departmentLabel">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Department Name </th>
        </ng-container>

        <!-- Budget Estimate 2019-2020 Column -->
        <ng-container matColumnDef="budgetEstimate">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Budget estimate 2019-2020 (State)</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.budgetEstimate}} </td>
          <td mat-footer-cell *matFooterCellDef>{{getTotal()}} </td>
        </ng-container>
        <ng-container matColumnDef="budgetEstimateLabel">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Budget estimate 2019-2020 (State)</th>
        </ng-container>


        <!-- Grant Released till Date  (State) -->
        <ng-container matColumnDef="tilldate">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Grant Released till Date  (State) </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.tilldate}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotalReleaseGrant()}} </td>
        </ng-container>
        <ng-container matColumnDef="grantReleaseTillDate">
          <th mat-header-cell class="rightAlign" *matHeaderCellDef [attr.rowspan]="2"> Grant Released till Date  (State)
          </th>
        </ng-container>

        <!-- Grant Released from December to January -->       
        <ng-container matColumnDef="grantReleaseDraft">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Grant release </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.grantReleaseDraft}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotals()}} </td>
        </ng-container>
        <ng-container matColumnDef="grantReleaseLabel">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Grant Released from December to January (State)</th>
        </ng-container>

        <!-- Total Released Grant(State) --> 
        <ng-container matColumnDef="total">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Total Released Grant</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.total}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>100 </td>
        </ng-container>
        <ng-container matColumnDef="totalReleaseGrant">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Total Released Grant(State)</th>
        </ng-container>
        <!-- <tr mat-header-row *matHeaderRowDef="['head1','head2','head3','head4','head5']"></tr> -->
        <tr mat-header-row *matHeaderRowDef="['serialNoLabel','departmentLabel','budgetEstimateLabel','grantReleaseTillDate','grantReleaseLabel']"></tr>

        <tr mat-header-row *matHeaderRowDef="displayedFdLevel"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedFdLevel;"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedFdLevel"></tr>
      </table>
    </div>
    


    <!--- OtherLevel table -->

    <div class="mat-elevation-z8 mt-2" *ngIf="isvisibledata">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">


        <!--- Serial Number -->
        <ng-container matColumnDef="srno">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> No. </th>
          <td mat-cell *matCellDef="let element; let i= index" class="centerAlign"> {{i+1}} </td>
          <td mat-footer-cell *matFooterCellDef>Total </td>
        </ng-container>

        <ng-container matColumnDef="serialNoLabel">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Sr No.</th>
        </ng-container>


        <!--- Department -->
        <ng-container matColumnDef="departmentName">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Department Name </th>
          <td mat-cell *matCellDef="let element"> {{element.departmentName}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="departmentLabel">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Department Name </th>
        </ng-container>

        <!--  Budget estimate 2019-2020  -->
        <ng-container matColumnDef="budgetState">
          <th mat-header-cell *matHeaderCellDef> State</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.budgetEstimate}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotal()}} </td>
        </ng-container>

        <ng-container matColumnDef="budgetCss">
          <th mat-header-cell *matHeaderCellDef> CSS</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.budgetEstimate}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotal()}} </td>
        </ng-container>

        <ng-container matColumnDef="budgetEstimateYearLabel">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Budget estimate 2019-2020 </th>
        </ng-container>


        <!--  Grant Released till Date  (State)  -->
        <ng-container matColumnDef="tillDateState">
          <th mat-header-cell *matHeaderCellDef> State</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.tilldate}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotal()}} </td>
        </ng-container>

        <ng-container matColumnDef="tillDateCss">
          <th mat-header-cell *matHeaderCellDef> CSS</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.tilldate}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotal()}} </td>
        </ng-container>
        <ng-container matColumnDef="grantReleaseTillDateLabel">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Grant Released till Date  (State)
          </th>
        </ng-container>


        <!-- Grant Released from December to January (State) -->
        <ng-container matColumnDef="grantReleaseDraftstate">
          <th mat-header-cell *matHeaderCellDef> state </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.grantReleaseDraft}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotals()}} </td>
        </ng-container>

        <ng-container matColumnDef="grantReleaseDraftcss">
          <th mat-header-cell *matHeaderCellDef> css </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.grantReleaseDraft}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>{{getTotals()}} </td>
        </ng-container>
        <ng-container matColumnDef="grantReleaseFromLabel">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Grant Released from December to January (State)</th>
        </ng-container>

        <!-- Total Released Grant(State) -->
        <ng-container matColumnDef="totalReleaseGrantState">
          <th mat-header-cell *matHeaderCellDef> State</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.total}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>100 </td>
        </ng-container>
        <ng-container matColumnDef="totalReleaseGrantCss">
          <th mat-header-cell *matHeaderCellDef> CSS</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.total}} </td>
          <td mat-footer-cell class="rightAlign" *matFooterCellDef>100 </td>
        </ng-container>
        <ng-container matColumnDef="totalReleaseGrantStateLabel">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Total Released Grant(State)</th>
        </ng-container>

        <!--- Header Columns Label Name -->
        <tr mat-header-row *matHeaderRowDef="['serialNoLabel','departmentLabel','budgetEstimateYearLabel','grantReleaseTillDateLabel','grantReleaseFromLabel','totalReleaseGrantStateLabel']"></tr>
        <tr mat-header-row *matHeaderRowDef="displayedOtherLevel"></tr>
        <!--- End Header Columns Label Name -->

        <!-- Value Fetch From .TS File -->
        <tr mat-row *matRowDef="let row; columns: displayedOtherLevel"></tr>

        <!--- Footer Columns -->
        <tr mat-footer-row *matFooterRowDef="displayedOtherLevel"></tr>
      </table>
    </div>

    <!--- Action Buttons -->
      <div class="form-action-button">
        <button mat-raised-button type="submit" class="green" title="Export To Excel">
          <i class="material-icons" title="Export To Excel" aria-hidden="true">save_alt</i> Export to Excel</button>
        <button type="button" mat-raised-button class="print-btn" title="Print">
          <i class="material-icons" title="Print">
            print
          </i>
          Print
        </button>
        <button type="button" mat-raised-button class="btnClose" title="Close">
          <i class="material-icons" aria-hidden="true" title="Close">
            close
          </i>
          Close
        </button>
        <button type="button" class="back-button" title="Back" mat-raised-button
          [routerLink]="['../../grant-release-fd-to-administrative-department']" routerLinkActive="router-link-active">
          <i class="material-icons" aria-hidden="true" title="Back">
            keyboard_return
          </i>
          Back
        </button>
      </div>
  </div>
</div>
