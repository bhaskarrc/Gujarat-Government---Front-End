<div class="container">
    <div class="form-wrapper">
        <div class="heading-section ng-star-inserted">
            <div>Account Generation Details</div>
            <div class="font-heading"><strong>Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}
            </div>
        </div>

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item " aria-current="page">DPPF-HBA</li>
                <li class="breadcrumb-item active" aria-current="page">Account Generation Details</li>
            </ol>
        </nav>



        <div class="panel-group">
            <form [formGroup]="accountDetailsForm" (ngSubmit)="accountDetailsData()">
                <mat-accordion class="colapsedata">
                    <mat-expansion-panel [expanded]="true" class="nopadding">
                        <mat-expansion-panel-header>
                            <div class="heading-section">
                                Search
                            </div>
                        </mat-expansion-panel-header>
                        <!-- Account Generation Details -->
                        <div class="box-body">
                            <div class="row">
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="inwardNo" placeholder="Inward No. "
                                            formControlName="inwardNo">
                                        <mat-icon matSuffix class="searchIcon" (click)="inwardNo()">search
                                        </mat-icon>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="hbaNo" placeholder="HBA/MCA" formControlName="hbaNo"
                                            readonly>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="hbaAccountNo" placeholder="HBA/MCA Account No. "
                                            formControlName="hbaAccountNo" readonly>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput [matDatepicker]="picker" formControlName="inwardDate"
                                            placeholder="Inward Date ">
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="shortName" placeholder="Short Name "
                                            formControlName="shortName">
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput placeholder="Employee Number " formControlName="empId"
                                            maxlength="10" numbersOnly>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="firstName" placeholder="First Name"
                                            formControlName="firstName">
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="middleName" placeholder="Middle Name"
                                            formControlName="middleName">
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="lastName" placeholder="Last Name "
                                            formControlName="lastName">
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput [matDatepicker]="dateOfBirth" formControlName="dateOfBirth"
                                            placeholder="Date Of Birth ">
                                        <mat-datepicker-toggle matSuffix [for]="dateOfBirth"></mat-datepicker-toggle>
                                        <mat-datepicker #dateOfBirth></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput name="gpfNo" placeholder="GPF/NPS Number"
                                            formControlName="gpfNo">
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-12">
                                    <!-- common button -->
                                    <div class="form-action-button">
                                        <button type="reset" mat-raised-button color="accent">
                                            <i class="material-icons" aria-hidden="true" title="Reset">
                                                restore
                                            </i>
                                            Reset
                                        </button>
                                    </div>
                                    <!-- End common button -->
                                </div>
                            </div>
                        </div>
                        <!-- End Account Generation Details -->
                    </mat-expansion-panel>
                </mat-accordion>
            </form>
        </div>
        <br>
        <mat-tab-group mat-stretch-tabs>
            <!-- Details Tab -->
            <mat-tab>
                <ng-template mat-tab-label>
                    Office Details
                </ng-template>
                <form [formGroup]='officeDetails'>
                    <div class="box-primary">
                        <div class="row">
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="departmentType" placeholder="Department" required>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="departmentTypeCtrl"
                                                [placeholderLabel]="'Find Department Types...'" [noEntriesFoundLabel]="
                        'no matching Department Types found'
                      ">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                      let departmentType of departmentType_list
                        | filterSelectInput: departmentTypeCtrl.value
                    " [value]="departmentType.value">
                                            {{ departmentType.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.departmentType.touched || (officeDetails.controls.departmentType.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.departmentType.errors?.required">
                                            {{errorMessages.DEPARTMENT}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="hod" placeholder="H O D" required>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="classHodTypeCtrl"
                                                [placeholderLabel]="'Find H O D...'"
                                                [noEntriesFoundLabel]="'no matching H O D found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                      let CE of classHodType | filterSelectInput: classHodTypeCtrl.value" [value]="CE.value">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.hod.touched || (officeDetails.controls.hod.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.hod.errors?.required">
                                            {{errorMessages.HOD}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>

                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="gender" placeholder="Gender " required>
                                        <mat-option *ngFor="
                          let obj of gender_list" [value]="obj.value">
                                            {{ obj.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.gender.touched || (officeDetails.controls.gender.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.gender.errors?.required">
                                            {{errorMessages.GENDER}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field>
                                    <mat-select formControlName="designation" placeholder="Designation">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="designationCtrl"
                                                [placeholderLabel]="'Find designation ...'"
                                                [noEntriesFoundLabel]="'no matching designation found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option>-- None --</mat-option>
                                        <mat-option
                                            *ngFor="let item of designation_list | filterSelectInput: designationCtrl.value"
                                            [value]="item.value">
                                            {{ item.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="employeeClass" placeholder="Employee Class" required>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="EmployeeclassTypeCtrl"
                                                [placeholderLabel]="'Find Employee Class...'"
                                                [noEntriesFoundLabel]="'no matching Class found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                      let EC of employeeClass_list | filterSelectInput: EmployeeclassTypeCtrl.value"
                                            [value]="EC.value">
                                            {{ EC.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.employeeClass.touched || (officeDetails.controls.employeeClass.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.employeeClass.errors?.required">
                                            {{errorMessages.EMPLOYEECLASS}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field>
                                    <input matInput name="officeName" placeholder="Office Name "
                                        formControlName="officeName" required>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.officeName.touched || (officeDetails.controls.officeName.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.officeName.errors?.required">
                                            {{errorMessages.OFFICENAME}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="district" placeholder="District" required>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="districtCtrl"
                                                [placeholderLabel]="'Find District...'"
                                                [noEntriesFoundLabel]="'No matching District found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let item of districtList |
                        filterSelectInput:districtCtrl.value" [value]="item.value" matTooltip="{{item.viewValue}}">
                                            {{item.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.district.touched || (officeDetails.controls.district.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.district.errors?.required">
                                            {{errorMessages.DISTRICT}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field>
                                    <input matInput name="basicPay" placeholder="Basic Pay" formControlName="basicPay"
                                        required>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.basicPay.touched || (officeDetails.controls.basicPay.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.basicPay.errors?.required">
                                            {{errorMessages.BASICPAY}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="empType" placeholder="Employee Type" required>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="empTypeCtrl"
                                                [placeholderLabel]="'Find Employee Type..'"
                                                [noEntriesFoundLabel]="'no matching Employee Type'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let Emp of emp_list | filterSelectInput: empTypeCtrl.value"
                                            [value]="Emp.value">
                                            {{Emp.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.empType.touched || (officeDetails.controls.empType.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.empType.errors?.required">
                                            {{errorMessages.EMPLOYEETYPE}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field>
                                    <textarea matInput rows="1" maxlength="200" placeholder="Office Address "
                                        formControlName="officeAdd" required></textarea>
                                    <div class="error-wrapper"
                                        *ngIf="officeDetails.controls.officeAdd.touched || (officeDetails.controls.officeAdd.errors && isSubmitted)">
                                        <mat-error *ngIf="officeDetails.controls.officeAdd.errors?.required">
                                            {{errorMessages.OFFICEADD}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>

                        </div>
                    </div>
                </form>
            </mat-tab>
            <!-- Authority Details -->
            <mat-tab>
                <ng-template mat-tab-label>
                    Authority Details
                </ng-template>
                <form [formGroup]='authorityeDetails'>
                    <div class="row">
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="orderNo" placeholder="Order Number" formControlName="orderNo"
                                    required>
                                <div class="error-wrapper"
                                    *ngIf="authorityeDetails.controls.orderNo.touched || (authorityeDetails.controls.orderNo.errors && isSubmitted)">
                                    <mat-error *ngIf="authorityeDetails.controls.orderNo.errors?.required">
                                        {{errorMessages.ORDERNO}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="majorHead" placeholder="Major Head" formControlName="majorHead"
                                    required>
                                <div class="error-wrapper"
                                    *ngIf="authorityeDetails.controls.majorHead.touched || (authorityeDetails.controls.majorHead.errors && isSubmitted)">
                                    <mat-error *ngIf="authorityeDetails.controls.majorHead.errors?.required">
                                        {{errorMessages.MAJORHEAD}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="authorityName" placeholder="Authority Name"
                                    formControlName="authorityName">

                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <textarea matInput rows="1" maxlength="200" placeholder="Authority Address "
                                    formControlName="authorityoffice" required></textarea>
                                <div class="error-wrapper"
                                    *ngIf="authorityeDetails.controls.authorityName.touched || (authorityeDetails.controls.authorityName.errors && isSubmitted)">
                                    <mat-error *ngIf="authorityeDetails.controls.authorityName.errors?.required">
                                        {{errorMessages.AUTHADD}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput [matDatepicker]="snactionDate" formControlName="snactionDate"
                                    placeholder="Sanction Date">
                                <mat-datepicker-toggle matSuffix [for]="snactionDate"></mat-datepicker-toggle>
                                <mat-datepicker #snactionDate></mat-datepicker>

                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="authitorDesignation" placeholder="Authority designation"
                                    formControlName="authitorDesignation">
                            </mat-form-field>
                        </div>
                    </div>
                </form>
            </mat-tab>
            <!-- End Authority Details -->
            <!-- Loan Details -->
            <mat-tab>
                <ng-template mat-tab-label>
                    Loan Details
                </ng-template>
                <form [formGroup]='loanDetails'>
                    <div class="row">
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="rule" placeholder="Rule" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="ruleCtrl"
                                            [placeholderLabel]="'Find Rule..'"
                                            [noEntriesFoundLabel]="'no matching Rule'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let rL of rule_list | filterSelectInput: ruleCtrl.value"
                                        [value]="rL.value">
                                        {{rL.viewValue}}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="loanDetails.controls.rule.touched || (loanDetails.controls.rule.errors && isSubmitted)">
                                    <mat-error *ngIf="loanDetails.controls.rule.errors?.required">
                                        {{errorMessages.RULE}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="purposeLoad" placeholder="Purpose of Loan" required
                                    (selectionChange)="selectPurpose($event.value)">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="purposeLoadCtrl"
                                            [placeholderLabel]="'Find Purpose of Loan..'"
                                            [noEntriesFoundLabel]="'no matching Purpose of Loan'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let purpose of purpose_list | filterSelectInput: purposeLoadCtrl.value"
                                        [value]="purpose.value">
                                        {{purpose.viewValue}}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="loanDetails.controls.purposeLoad.touched || (loanDetails.controls.purposeLoad.errors && isSubmitted)">
                                    <mat-error *ngIf="loanDetails.controls.purposeLoad.errors?.required">
                                        {{errorMessages.PUROFLOAN}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3" *ngIf="isSelectedOtherPurpose">
                            <mat-form-field class="full-width">
                                <input type="text" matInput formControlName="otherPurpose" placeholder="Other Purpose">
                            </mat-form-field>
                        </div>
                        <!--table-->
                        <div class="col-sm-12">
                            <!-- Table LoanDetails -->
                            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
                                <table mat-table [dataSource]="dataSource" class="mat-elevation-z8"
                                    aria-describedby="LoanDetails">

                                    <ng-container matColumnDef="month">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Month*</th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field class="full-width">
                                                <mat-select required>
                                                    <mat-option *ngFor="
                                  let year of month_list" [value]="year.value">
                                                        {{ year.viewValue }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="year">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Year*</th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field class="full-width">
                                                <mat-select required>
                                                    <mat-option *ngFor="
                                  let year of year_list" [value]="year.value">
                                                        {{ year.viewValue }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="loanSanctionAmount">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Loan Sanction
                                            Amount*
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field>
                                                <input matInput>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="creditDebit">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Credit/Debit*
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field class="full-width">
                                                <mat-select required>
                                                    <mat-option *ngFor="
                                  let credit of credit_list" [value]="credit.value">
                                                        {{ credit.viewValue }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="noOfRecoveryInstallments">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> No. Of Recovery
                                            Installments*</th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field>
                                                <input matInput>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="recoveryInstallmentAmount">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Recovery
                                            Installment
                                            Amount*</th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field>
                                                <input matInput>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Reason">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Reason</th>
                                        <td mat-cell *matCellDef="let element">
                                            <mat-form-field>
                                                <textarea matInput rows="1" maxlength="200" required></textarea>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="action">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Action </th>
                                        <td mat-cell *matCellDef="let element;let i=index" class="text-center">
                                            <table class="iconTable" aria-describedby="actionBtn">
                                                <tbody>
                                                    <tr>
                                                        <td width="30">
                                                            <i aria-hidden="true" class="material-icons plus add"
                                                                title="Add"
                                                                *ngIf="dataSource && dataSource.data && (i == dataSource.data.length - 1)"
                                                                (click)="addLoanRow()">
                                                                add
                                                            </i>
                                                        </td>
                                                        <td width="30">
                                                            <i aria-hidden="true" class="material-icons plus delete"
                                                                title="delete"
                                                                (click)=" directiveObj.deleteRow(dataSource,i)"
                                                                *ngIf="dataSource && dataSource.data && dataSource.data.length > 1">delete</i>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </ng-container>
                                    <!-- Header Section Of table -->
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <!-- Data Fetch From .TS File to table -->
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                            </div>
                            <!-- End Table LoanDetails -->
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="totalLoanAmount" placeholder="Total Loan Amount"
                                    formControlName="totalLoanAmount">
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="probableRecovery" placeholder="Probable Start Date Of Recovery"
                                    formControlName="probableRecovery">
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="interstedIssue" placeholder="Interest Issued"
                                    formControlName="interstedIssue">
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="rateOfInterst" placeholder="Rate Of Interest"
                                    formControlName="rateOfInterst">
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field>
                                <textarea matInput rows="1" maxlength="200" placeholder="Noting "
                                    formControlName="nothing" required></textarea>
                                <div class="error-wrapper"
                                    *ngIf="loanDetails.controls.nothing.touched || (loanDetails.controls.nothing.errors && isSubmitted)">
                                    <mat-error *ngIf="loanDetails.controls.nothing.errors?.required">
                                        {{errorMessages.NOTHING}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>
                    </div>
                </form>
            </mat-tab>
            <!-- End Loan Details -->
            <!-- Instalments Details -->
            <mat-tab>
                <ng-template mat-tab-label>
                    Instalments Details
                </ng-template>
                <form [formGroup]='instalmentsDetails'>

                    <div class="row">

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="loanDisInstallment"
                                    placeholder="Loan Disbursement Installment " required
                                    (selectionChange)="selectInstallment($event.value)">
                                    <mat-option *ngFor="
                        let IS of loanDisInstallment_list" [value]="IS.value">
                                        {{ IS.viewValue }}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="instalmentsDetails.controls.loanDisInstallment.touched || (instalmentsDetails.controls.loanDisInstallment.errors && isSubmitted)">
                                    <mat-error *ngIf="instalmentsDetails.controls.loanDisInstallment.errors?.required">
                                        {{errorMessages.DISTLOAN}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <!-- table displayed if installment selected is YES -->
                        <div class="col-sm-12" *ngIf="isSelectedInstallmentYes">
                            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
                                <table mat-table [dataSource]="installmentDataSource"
                                    aria-describedby="installmentDetails">
                                    <ng-container matColumnDef="srno">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                                        <td mat-cell *matCellDef="let element;let idx = index;" class="centerAlign">
                                            {{ idx + 1}}
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="mileStone">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Linked Mile
                                            Stone*
                                        </th>
                                        <td mat-cell *matCellDef="let element" class="rightAlign">
                                            <mat-form-field class="rightAlign">
                                                <input matInput>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="installment">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Installment*</th>
                                        <td mat-cell *matCellDef="let element" class="rightAlign">
                                            <mat-form-field class="rightAlign">
                                                <input matInput>
                                            </mat-form-field>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="action">
                                        <th mat-header-cell *matHeaderCellDef scope="row"> Action</th>
                                        <td mat-cell *matCellDef="let element ;let i=index" class="centerAlign">
                                            <table class="iconTable" aria-describedby="actionBtn">
                                                <tbody>
                                                    <tr>
                                                        <td width="30">
                                                            <i aria-hidden="true" class="material-icons plus add"
                                                                title="Add"
                                                                *ngIf="installmentDataSource && installmentDataSource.data && (i == installmentDataSource.data.length - 1)"
                                                                (click)="addRow()">
                                                                add
                                                            </i>
                                                        </td>
                                                        <td width="30">
                                                            <i aria-hidden="true" class="material-icons plus delete"
                                                                title="delete"
                                                                (click)="directiveObj.deleteRow(installmentDataSource,i)"
                                                                *ngIf="installmentDataSource && installmentDataSource.data && installmentDataSource.data.length > 1">delete</i>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                    </ng-container>
                                    <!-- Header Section Of table -->
                                    <tr mat-header-row *matHeaderRowDef="installmentColumns"></tr>
                                    <!-- Data Fetch From .TS File to table -->
                                    <tr mat-row *matRowDef="let row; columns: installmentColumns;"></tr>
                                </table>
                            </div>
                        </div>

                    </div>
                </form>
            </mat-tab>
            <!-- End Instalments Details -->
            <!-- Withdrawal Details -->
            <mat-tab>
                <ng-template mat-tab-label>
                    Withdrawal Details
                </ng-template>
                <form [formGroup]='withdrwalDetails'>

                    <!-- accountDetails Table -->
                    <div class="mat-elevation-z8 mt-2 overflow-x-auto">

                        <table mat-table [dataSource]="dataSourceDetails" class="mat-elevation-z8"
                            aria-describedby="accountDetails">

                            <ng-container matColumnDef="amount">
                                <th mat-header-cell *matHeaderCellDef scope="row"> Amount*</th>
                                <td mat-cell *matCellDef="let element" class="rightAlign">
                                    <mat-form-field class="rightAlign">
                                        <input matInput>
                                    </mat-form-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="voucher">
                                <th mat-header-cell *matHeaderCellDef scope="row"> Voucher*</th>
                                <td mat-cell *matCellDef="let element" class="rightAlign">
                                    <mat-form-field class="rightAlign">
                                        <input matInput>
                                    </mat-form-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="date">
                                <th mat-header-cell *matHeaderCellDef scope="row"> Date*</th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-form-field>
                                        <input matInput [matDatepicker]="date">
                                        <mat-datepicker-toggle matSuffix [for]="date"></mat-datepicker-toggle>
                                        <mat-datepicker #date></mat-datepicker>
                                    </mat-form-field>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="district">
                                <th mat-header-cell *matHeaderCellDef scope="row"> District*</th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-form-field class="full-width">
                                        <mat-select [(ngModel)]="element.district" [ngModelOptions]="{standalone: true}"
                                            required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="districtDDCtrl"
                                                    [placeholderLabel]="'Find District...'"
                                                    [noEntriesFoundLabel]="'no matching District found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option *ngFor="let item of districtList " [value]="item.value">
                                                {{item.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="cardexNo">
                                <th mat-header-cell *matHeaderCellDef scope="row"> Cardex No</th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-form-field>
                                        <input matInput>
                                        <mat-icon matSuffix class="searchIcon" (click)="cardexSearch()">search
                                        </mat-icon>
                                    </mat-form-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="ddo">
                                <th mat-header-cell *matHeaderCellDef scope="row"> DDO*</th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-form-field class="full-width">
                                        <mat-select>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="ddoNameCodeCtrl"
                                                    [placeholderLabel]="'Find DDO Name...'"
                                                    [noEntriesFoundLabel]="'no matching DDO Name found'">
                                                </ngx-mat-select-search>
                                            </mat-option>

                                            <mat-option
                                                *ngFor="let ddoname of DDO_Name_list| filterSelectInput: ddoNameCodeCtrl.value"
                                                [value]="ddoname.value">
                                                {{ddoname.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="treasury">
                                <th mat-header-cell *matHeaderCellDef scope="row"> Treasury No/PAO*</th>
                                <td mat-cell *matCellDef="let element">
                                    <mat-form-field class="full-width">
                                        <mat-select>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="treaspaoCtrl"
                                                    [placeholderLabel]="'Find Treasury No/PAO...'"
                                                    [noEntriesFoundLabel]="'no matching Treasury No/PAO found'">
                                                </ngx-mat-select-search>
                                            </mat-option>

                                            <mat-option
                                                *ngFor="let tes of TESPAO_list| filterSelectInput: treaspaoCtrl.value"
                                                [value]="tes.value">
                                                {{tes.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef scope="row"> Action</th>
                                <td mat-cell *matCellDef="let elemen;let i=index" class="centerAlign">
                                    <table class="iconTable" aria-describedby="actionBtn">
                                        <tbody>
                                            <tr>
                                                <td width="30">
                                                    <i aria-hidden="true" class="material-icons plus add" title="Add"
                                                        *ngIf="dataSourceDetails && dataSourceDetails.data && (i == dataSourceDetails.data.length - 1)"
                                                        (click)="addWithdrwalDetailsRow()">
                                                        add
                                                    </i>
                                                </td>
                                                <td width="30">
                                                    <i aria-hidden="true" class="material-icons plus delete"
                                                        title="delete"
                                                        (click)="directiveObj.deleteRow(dataSourceDetails,i)"
                                                        *ngIf="dataSourceDetails && dataSourceDetails.data && dataSourceDetails.data.length > 1">delete</i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </ng-container>
                            <!-- Header Section Of table -->
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsDetails"></tr>
                            <!-- Data Fetch From .TS File to table -->
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsDetails;"></tr>
                        </table>
                    </div>
                    <!-- End accountDetails Table -->
                </form>
            </mat-tab>
        </mat-tab-group>
        <!-- End Withdrawal Details -->
        <!-- Comon Button -->
        <div class="form-action-button">
            <button type="submit" mat-raised-button color="primary">
                <i class="material-icons" aria-hidden="true" title="Save">
                    save
                </i>
                Save
            </button>

            <button mat-raised-button type="submit" class="green" (click)="directiveObject.commentGrantDetails()"><i
                    class="material-icons" aria-hidden="true" title="Submit">
                    done
                </i> Submit
            </button>

            <button type="button" mat-raised-button color="warn" (click)="navigate()">
                <i class="material-icons" aria-hidden="true" title="Listing">
                    list
                </i>
                Listing
            </button>

            <button type="button" mat-raised-button class="btnClose">
                <i class="material-icons" aria-hidden="true" title="Close">
                    close
                </i>
                Close
            </button>
        </div>
        <!-- End Comon Button -->
    </div>
</div>