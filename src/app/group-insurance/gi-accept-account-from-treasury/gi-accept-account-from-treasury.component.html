<div class="container">
  <div class="form-wrapper">

    <!-- heading section -->
    <div class="heading-section ng-star-inserted">
      <div>Accept Account </div>
      <div class="font-heading"><strong>Reference Number:</strong> 19-20/GI/AAS/001</div>
      <div class="font-heading"><strong>Reference Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}
      </div>
    </div>

    <!-- navigation -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Worklist</a></li>
        <li class="breadcrumb-item active" aria-current="page">Accept Account Screen </li>
      </ol>
    </nav>

    <!-- Accept Account Screen Fields Starts -->
    <mat-accordion class="search-accordian">
      <mat-expansion-panel [expanded]="false">
        <mat-expansion-panel-header>
          <div class="heading-section">
            Accept Account Screen Fields
          </div>
        </mat-expansion-panel-header>
        <div class=" form-datatable-list">
          <form class="col-sm-12" [formGroup]="acceptAccountScreenForm">
            <div class="row">

              <!-- district -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="district" placeholder="District"
                    (selectionChange)="onSelectingDistrict($event)">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="districtCtrl" [placeholderLabel]="'Find District...'"
                        [noEntriesFoundLabel]="'no matching District found'" charactersOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of districtList | filterSelectInput: districtCtrl.value"
                      [value]="item.value" matTooltip="{{ item.viewValue }}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- treasury office for ahmedabad & gandhinagar -->
              <div class="col-sm-3"
                *ngIf="acceptAccountScreenForm.controls.district.value === '1' || acceptAccountScreenForm.controls.district.value === '2' ">
                <mat-form-field class="full-width">
                  <mat-select formControlName="treasuryOffice" placeholder='Treasury Office Name'>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="treasuryOfficeCtrl"
                        [placeholderLabel]="'Find Treasury Office Name...'"
                        [noEntriesFoundLabel]="'No matching Treasury Office Name found'" alphabetsSpaceOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of treasuryOfficeNameList | filterSelectInput:treasuryOfficeCtrl.value"
                      [value]="item.value" matTooltip="{{ item.viewValue }}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!--treasury office for other districts  -->
              <div class="col-md-3"
                *ngIf="acceptAccountScreenForm.controls.district.value !== '1' && acceptAccountScreenForm.controls.district.value !== '2' ">
                <mat-form-field>
                  <input matInput placeholder="Treasury Office Name" formControlName="treasuryOfficeOther" readonly>
                </mat-form-field>
              </div>

              <!-- employee type -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="employeeType" placeholder="Employee Type">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="employeeTypeCtrl"
                        [placeholderLabel]="'Find Employee Type...'"
                        [noEntriesFoundLabel]="'no matching Employee Type found'" alphabetsSpaceOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option>--None--</mat-option>
                    <mat-option *ngFor="let item of employeeTypeList | filterSelectInput: employeeTypeCtrl.value"
                      [value]="item.value" matTooltip="{{ item.viewValue }}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- month -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="month" placeholder="Month" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="typeOfMonthCtrl" [placeholderLabel]="'Find Month...'"
                        [noEntriesFoundLabel]="'no matching Month found'" charactersOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of classTypeOfMonth   | filterSelectInput: typeOfMonthCtrl.value "
                      [value]="item.value">
                      {{ item.viewValue }}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf=" acceptAccountScreenForm.controls.month.touched &&  acceptAccountScreenForm.controls.month.errors ">
                    <mat-error *ngIf="acceptAccountScreenForm.controls.month.errors.required  ">
                      {{ errorMessage.TYPE_OF_MONTH }}
                    </mat-error>
                  </div>

                </mat-form-field>
              </div>

              <!-- year -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="year" placeholder="Year" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="typeOfYearCtrl" [placeholderLabel]="'Find Year...'"
                        [noEntriesFoundLabel]="'no matching Year found'" numbersOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="
                    let item of classTypeOfYear  | filterSelectInput: typeOfYearCtrl.value " [value]="item.value">
                      {{ item.viewValue }}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf=" acceptAccountScreenForm.controls.year.touched && acceptAccountScreenForm.controls.year.errors">
                    <mat-error *ngIf="acceptAccountScreenForm.controls.year.errors.required ">
                      {{ errorMessage.TYPE_OF_YEAR }}
                    </mat-error>
                  </div>

                </mat-form-field>
              </div>

              <!-- payment type -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="paymentType" placeholder="Account Type" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="typeOfPaymentCtrl"
                        [placeholderLabel]="'Find Account Type...'"
                        [noEntriesFoundLabel]="'no matching Account Type found'" charactersOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of classTypeOfPayment  | filterSelectInput: typeOfPaymentCtrl.value"
                      [value]="item.value">
                      {{ item.viewValue }}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf=" acceptAccountScreenForm.controls.paymentType.touched && acceptAccountScreenForm.controls.paymentType.errors">
                    <mat-error *ngIf=" acceptAccountScreenForm.controls.paymentType.errors.required">
                      {{ errorMessage.TYPE_OF_PAYMENT }}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <!-- fetch data button -->
              <div class="col-sm-12">
                <div class="form-action-button">
                  <button type="submit" mat-raised-button color="primary" title="Fetch Data">
                    Fetch Data
                  </button>
                </div>
              </div>
              <!-- fetch data button ends -->

            </div>

          </form>
        </div>

      </mat-expansion-panel>
    </mat-accordion>
    <!-- Accept Account Screen Fields Ends -->
    <br>


    <!-- Table starts -->
    <div class="mat-elevation-z8 table-responsive">

      <table mat-table [dataSource]="dataSource" width="100%" matSort
        aria-describedby="acceptAccountFromTreasuryListing">

        <!-- Serial Number Column -->
        <ng-container matColumnDef="srno">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            Serial No
          </th>
          <td mat-cell *matCellDef="let element; let i=index" class="centerAlign">
            {{i+1 }}
          </td>
        </ng-container>

        <!-- Selection Checkbox Column -->
        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef scope="row">
            <mat-checkbox (change)="$event ? directiveObj.masterToggle(dataSource) : null"
              [checked]="directiveObj.selection.hasValue() && directiveObj.isAllSelected(dataSource)"
              [indeterminate]="directiveObj.selection.hasValue() && !directiveObj.isAllSelected(dataSource)"
              [aria-label]="directiveObj.checkboxLabel(dataSource)">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row" class="centerAlign">
            <mat-checkbox (click)="$event.stopPropagation()"
              (change)="$event ? directiveObj.selection.toggle(row) : null;"
              [checked]="directiveObj.selection.isSelected(row)"
              [aria-label]="directiveObj.checkboxLabel(dataSource,row)">
            </mat-checkbox>
          </td>
        </ng-container>

        <!-- Major Head Column -->
        <ng-container matColumnDef="majorHead">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            Major Head
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            <mat-label>{{ element.majorHead }}
            </mat-label>
          </td>
        </ng-container>

        <!-- Account Type Column -->
        <ng-container matColumnDef="accountType">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            Account Type
          </th>
          <td mat-cell *matCellDef="let element; let i = index">
            <mat-label>{{ element.accountType }}
            </mat-label>
          </td>
        </ng-container>

        <!-- No of Documents Column -->
        <ng-container matColumnDef="noOfDocuments">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            No of Documents
          </th>
          <td mat-cell *matCellDef="let element">
            {{ element.noOfDocuments }}
          </td>
        </ng-container>

        <!-- Amount Column -->
        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            Challan Amount (Rs.)
          </th>
          <td mat-cell *matCellDef="let element" class="rightAlign">
            {{ element.amount }}
          </td>
        </ng-container>

        <!-- TC Amount Column -->
        <ng-container matColumnDef="tcAmount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            TC Amount
          </th>
          <td mat-cell *matCellDef="let element" class="rightAlign">
            {{ element.tcAmount }}
          </td>
        </ng-container>

        <!-- Gross Amount Column -->
        <ng-container matColumnDef="grossAmount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">
            Gross Amount (in Rs.)
          </th>
          <td mat-cell *matCellDef="let element" class="rightAlign">
            {{ element.grossAmount }}
          </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
          <td mat-cell *matCellDef="let element; let i = index" class="action-btn-i centerAlign">

            <a [routerLink]="['../book-transfer-register']"><i class="material-icons plus view-icon" title="View"
                aria-hidden="true">remove_red_eye</i></a>

          </td>
        </ng-container>

        <!-- Header and Footer Row Definition -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns"></tr>
      </table>

    </div>
    <!-- Table Ends -->

    <!-- Action Buttons Starts -->
    <div class="form-action-button">
      <button type="submit" mat-raised-button color="primary" title="Accept">
        Accept
      </button>
      <button type="submit" mat-raised-button color="primary" title="Non Accept" (click)="onNonAccept()">
        Non Accept
      </button>
    </div>
    <!-- Action Buttons Ends -->

  </div>
</div>