<!-- opens on click of upload button  -->
<div class="container">
    <div class="form-wrapper">

        <!-- heading section -->
        <div class="heading-section ng-star-inserted">
            <div>Attachment</div>
        </div>

        <!-- listing -->
        <div>
            <table mat-table [dataSource]="dataSourceBrowse" width="100%">

                <ng-container matColumnDef="attachmentType">
                    <th mat-header-cell *matHeaderCellDef>Attachment Type</th>
                    <td mat-cell *matCellDef="let item;let i= index;">
                        <mat-select placeholder="Attachment Type" [(ngModel)]="item.attachmentType">
                            <mat-option>
                                <ngx-mat-select-search [formControl]="attachmentTypeCodeCtrl" [placeholderLabel]="'Find Attachment
                                Type...'" [noEntriesFoundLabel]="'no matching
                                Attachment Type found'">
                                </ngx-mat-select-search>
                            </mat-option>

                            <mat-option *ngFor="let AT of
                            attachmentType_list" [value]="AT.value">
                                {{AT.viewValue}}
                            </mat-option>
                        </mat-select>
                    </td>
                </ng-container>

                <ng-container matColumnDef="fileName">
                    <th mat-header-cell *matHeaderCellDef>File Name</th>
                    <td mat-cell *matCellDef="let item">
                        <mat-form-field floatLabel="never">
                            <textarea matInput [value]="item.name" [(ngModel)]="item.name"></textarea>
                        </mat-form-field>
                    </td>
                </ng-container>
                <ng-container matColumnDef="browse">
                    <th mat-header-cell *matHeaderCellDef>Browse File</th>
                    <td mat-cell *matCellDef="let i = index" class="centerAlign">
                        <button type="button" (click)="openFileSelector(i)" class="btn-browse">Browse Files
                        </button>
                    </td>
                </ng-container>
                <ng-container matColumnDef="uploadedFileName">
                    <th mat-header-cell *matHeaderCellDef>Uploaded File Name</th>
                    <td mat-cell *matCellDef="let item">
                        <span *ngIf="item.file && item.file.name">{{item.file.name}}
                            <i class="material-icons closesmall">
                                close
                            </i>
                        </span>

                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef>Action</th>
                    <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
                        <i class="material-icons plus delete" aria-hidden="true" (click)="deleteBrowse(i)">delete
                        </i>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedBrowseColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedBrowseColumns;"></tr>
            </table>
            <input type="file" id="fileBrowse" style="visibility: hidden;" (change)="onFileSelection($event)" />
            <div class="legend">
                1. Total File size should be under 2MB
                <br> 2. File type supported are: 'jpg', 'jpeg', 'png', 'pdf', JPG’, ‘JPEG’, ‘PNG’, ‘PDF’.
            </div>

            <div class="form-action-button">
                <button type="submit" mat-raised-button color="primary">
                    <i class="material-icons" aria-hidden="true" title="Save">
                        save
                    </i>
                    Upload
                </button>
                <button type="button" mat-raised-button class="btnClose" (click)="onNoClick()">
                    <i class="material-icons" title="Close">
                        close
                    </i>
                    Cancel
                </button>
            </div>

        </div>
    </div>
</div>