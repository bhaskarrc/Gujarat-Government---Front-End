<div class="container">
  <div class="form-wrapper">
    <!-- heading-sction -->
    <div class="heading-section ng-star-inserted">
      <div>Utilization Certificate (Verify/Aprrove)</div>
    </div>

    <mat-accordion class="search-accordian">
      <mat-expansion-panel [expanded]="true">

        <!-- search utc -->
        <mat-expansion-panel-header>
          <div class="heading-section">
            Search UTC
          </div>
        </mat-expansion-panel-header>

        <div class=" form-datatable-list">
          <!-- form -->
          <form class="col-sm-12" [formGroup]="utcFormVerify" (ngSubmit)="utcFormListData()">
            <div class="row">

              <!-- finnacial year -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="financialYear" placeholder="Financial Year">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="financialYearCtrl"
                        [placeholderLabel]="'Find Financial Year...'"
                        [noEntriesFoundLabel]="'no matching Financial Year'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of financialYearList | filterSelectInput: financialYearCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- department code -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="departmentCode" placeholder="Administrative Department"
                    (selectionChange)="selectDepartment()">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="departmentCodeCtrl"
                        [placeholderLabel]="'Find Administrative Department...'"
                        [noEntriesFoundLabel]="'no matching Administrative Department found'">
                      </ngx-mat-select-search>
                    </mat-option>

                    <mat-option
                      *ngFor="let department of departmentName_list | filterSelectInput: departmentCodeCtrl.value"
                      [value]="department.value">
                      {{department.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- head of department -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="headOfDepartment" placeholder="Head Of Department">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="headOfDepartmentCtrl"
                        [placeholderLabel]="'Find Head Of Department...'"
                        [noEntriesFoundLabel]="'no matching Head Of Department found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of hod_list| filterSelectInput:headOfDepartmentCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- scheme name -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="schemeName" placeholder="Scheme Name">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="schemeNameCtrl" [placeholderLabel]="'Find Scheme Name...'"
                        [noEntriesFoundLabel]="'no matching Scheme Name found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of schemeNameList| filterSelectInput:schemeNameCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- sanction order no-->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="sanctionOrderNo" placeholder="Sanction Order No.">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="sanctionOrderNoCtrl"
                        [placeholderLabel]="'Find Sanction Order No....'"
                        [noEntriesFoundLabel]="'no matching Sanction Order No. found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of sanctionOrderNoList| filterSelectInput:sanctionOrderNoCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- utc reference no -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="utcReference" placeholder="UTC Reference No.">
                </mat-form-field>
              </div>

              <!-- sanction order no-->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="status" placeholder="Status">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="statusCtrl" [placeholderLabel]="'Find Status....'"
                        [noEntriesFoundLabel]="'no matching Status found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let item of statusList| filterSelectInput:statusCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

            </div>
          </form>
        </div>

        <!-- serach action buttons -->
        <div class="row displayBlock form-action-button">
          <div class="centerAlign">
            <button type="submit" mat-raised-button color="primary" (click)="onSearch()">
              <i class="material-icons" aria-hidden="true">search</i>
              Search
            </button>
            <button type="reset" mat-raised-button color="accent" (click)="resetForm();">
              <i class="material-icons" aria-hidden="true">
                restore
              </i>
              Reset
            </button>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>


    <!-- listing -->
    <div class="mat-elevation-z8 mt-3">

      <!-- (₹ in Lakhs) section -->
      <p class=" rsClass " style="margin-bottom: 0px;">(₹ in Lakhs)</p>

      <table mat-table [dataSource]="dataSource" width="100%" class="responsive-table" matSort>

        <!-- checkbox -->
        <ng-container matColumnDef="checkBox">
          <th mat-header-cell *matHeaderCellDef="let row;let i= index;">
            <mat-checkbox (change)="$event ? masterToggle() : null;" [checked]="selection.hasValue() && isAllSelected()"
              [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row;let i= index;" class="centerAlign">
            <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null;"
              [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
            </mat-checkbox>
          </td>
        </ng-container>

        <!-- serial no -->
        <ng-container matColumnDef="serialNo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Sr. No.</th>
          <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{i+1}} </td>
        </ng-container>

        <!-- finnacial year -->
        <ng-container matColumnDef="financialYear">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Financial Year</th>
          <td mat-cell *matCellDef="let element"> {{element.financialYear}} </td>
        </ng-container>


        <!-- utc reference no -->
        <ng-container matColumnDef="utcReferenceNo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>UTC Reference No</th>
          <td mat-cell *matCellDef="let element"> {{element.utcReferenceNo}} </td>
        </ng-container>


        <!-- department administrative -->
        <ng-container matColumnDef="adminstrativeDepartment">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Administrative Department</th>
          <td mat-cell *matCellDef="let element"> {{element.adminstrativeDepartment}} </td>
        </ng-container>

        <!-- department hod -->
        <ng-container matColumnDef="headOfDepartment">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Head Of Department</th>
          <td mat-cell *matCellDef="let element"> {{element.headOfDepartment}} </td>
        </ng-container>

        <!-- budget head -->
        <ng-container matColumnDef="budgetHead">
          <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 125px;">Budget Head</th>
          <td mat-cell *matCellDef="let element"> {{element.budgetHead}} </td>
        </ng-container>

        <!-- Sanction Order No./Date -->
        <ng-container matColumnDef="sanctionOrderDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Sanction Order No./Date</th>
          <td mat-cell *matCellDef="let element"> {{element.sanctionOrderDate}} </td>
        </ng-container>

        <!-- sanction amount -->
        <ng-container matColumnDef="sanctionAmount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Sanction Amount</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.sanctionAmount}} </td>
        </ng-container>

        <!-- utilized amount -->
        <ng-container matColumnDef="utilizedAmount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Utilized Amount </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.utilizedAmount}} </td>
        </ng-container>

        <!-- unspent amount -->
        <ng-container matColumnDef="unspentAmount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Unspent Amount </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.unspentAmount}} </td>
        </ng-container>


        <!-- surrender amount -->
        <ng-container matColumnDef="surrenderAmount">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Surrender Amount </th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.surrenderAmount}} </td>
        </ng-container>

        <!-- Surrender Order No./Date -->
        <ng-container matColumnDef="surrenderOrderDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Surrender Order No./Date</th>
          <td mat-cell *matCellDef="let element"> {{element.surrenderOrderDate}} </td>
        </ng-container>

        <!-- workflowStatus -->
        <ng-container matColumnDef="workflowStatus">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Workflow Status </th>
          <td mat-cell *matCellDef="let element"> {{element.workflowStatus}} </td>
        </ng-container>

        <!-- status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Status </th>
          <td mat-cell *matCellDef="let element"> {{element.status}} </td>
        </ng-container>

        <!-- action -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef> Action </th>
          <td mat-cell *matCellDef="let element; let i = index;" class="action-btn-i centerAlign budgetIcon">
            <a (click)="view(element)">
              <i class="material-icons plus view-icon" title="View UTC">remove_red_eye</i></a>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; let i = index;columns: displayedColumns;">
        </tr>
      </table>

      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>

    <!-- action buttons -->
    <div class="form-action-button">
      <button type="submit" mat-raised-button color="primary">
        <i class="material-icons" aria-hidden="true" title="Save">
          save
        </i>
        Save as Draft
      </button>

      <button mat-raised-button type="submit" class="green" (click)="workflowDetails()">
        <i class="material-icons">done</i>
        Submit
      </button>
      <button type="reset" mat-raised-button color="accent">
        <i class="material-icons" aria-hidden="true">
          restore
        </i>
        Reset
      </button>
      <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
        <i class="material-icons" aria-hidden="true" title="Listing">
          list
        </i>
        Listing
      </button>
      <button type="button" mat-raised-button (click)="goToDashboard()" class="btnClose">
        <i class="material-icons" aria-hidden="true" title="Budget dashboard">
          close
        </i>
        Close
      </button>
    </div>
  </div>
</div>