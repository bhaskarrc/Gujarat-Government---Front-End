<div class="container">
    <div class="form-wrapper">
        <!-- form  start-->
        <form [formGroup]='formGroupBillTypeWise' (ngSubmit)='onSubmitData($event)'>

            <!--  Bill Type Wise Head Structure Mapping Screen -->
            <div class="box box-primary">
                <div class="box-header">Bill Type Wise Head Structure Mapping Screen</div>
                <div class="box-body">
                    <div class="row">

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="billType" placeholder="Bill Type" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="billCtrl"
                                            [placeholderLabel]="'Find Bill Type...'"
                                            [noEntriesFoundLabel]="'no matching Bill Type found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let bill of billTypeList | filterSelectInput:billCtrl.value"
                                        [value]="bill.value" matTooltip="{{bill.viewValue}}">
                                        {{bill.viewValue}}
                                    </mat-option>
                                </mat-select>

                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="classOfExpenditure" placeholder="Class of Expenditure"
                                    required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="classOfExpenditureCtrl"
                                            [placeholderLabel]="'Find Class...'"
                                            [noEntriesFoundLabel]="'no matching Classfound'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let classtyp of classType | filterSelectInput:classOfExpenditureCtrl.value"
                                        [value]="classtyp.value">
                                        {{classtyp.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width" readonly>
                                <mat-select formControlName="fundType" placeholder="Fund" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="fundTypeCtrl"
                                            [placeholderLabel]="'Find Fund...'"
                                            [noEntriesFoundLabel]="'no matching Fund'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let fundtype of fundTypeList| filterSelectInput: fundTypeCtrl.value"
                                        [value]="fundtype.value">
                                        {{fundtype.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="schemeType" placeholder="State/CSS" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="schemeTypeCtrl"
                                            [placeholderLabel]="'Find State/Css...'"
                                            [noEntriesFoundLabel]="'no matching State/Css'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let schemetype of schemeTypeList | filterSelectInput: schemeTypeCtrl.value"
                                        [value]="schemetype.value">
                                        {{schemetype.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="department" placeholder="Department" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="departmentCtrl"
                                            [placeholderLabel]="'Find Department'"
                                            [noEntriesFoundLabel]="'no matching Department'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let depart of departmentList | filterSelectInput: departmentCtrl.value"
                                        [value]="depart.value" matTooltip="{{depart.viewValue}}">
                                        {{depart.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="demand" #demand placeholder="Demand" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="demandCtrl"
                                            [placeholderLabel]="'Find Demand...'"
                                            [noEntriesFoundLabel]="'no matching Demand found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let demand of demandList | filterSelectInput: demandCtrl.value"
                                        [value]="demand.value" matTooltip="{{demand.viewValue}}">
                                        {{demand.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="majorHead" placeholder="Major Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="majorHeadCtrl"
                                            [placeholderLabel]="'Find Major Head...'"
                                            [noEntriesFoundLabel]="'no matching Major Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let majorHead of majorHeadList | filterSelectInput: majorHeadCtrl.value"
                                        [value]="majorHead.value" matTooltip="{{majorHead.viewValue}}">
                                        {{majorHead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="subMajorHead" placeholder="Sub Major Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="subMajorHeadCtrl"
                                            [placeholderLabel]="'Find Sub Major Head...'"
                                            [noEntriesFoundLabel]="'no matching Sub Major Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let subMajorHead of subMajorHeadList | filterSelectInput: subMajorHeadCtrl.value"
                                        [value]="subMajorHead.value" matTooltip="{{subMajorHead.viewValue}}">
                                        {{subMajorHead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="minorHead" placeholder="Minor Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="minorHeadCtrl"
                                            [placeholderLabel]="'Find Minor Head...'"
                                            [noEntriesFoundLabel]="'no matching Minor Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let minorHead of minorHeadList | filterSelectInput: minorHeadCtrl.value"
                                        [value]="minorHead.value" matTooltip="{{minorHead.viewValue}}">
                                        {{minorHead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="subHead" placeholder="Sub Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="subHeadCtrl"
                                            [placeholderLabel]="'Find Sub Head...'"
                                            [noEntriesFoundLabel]="'no matching Sub Head'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let subHead of subHeadList| filterSelectInput: subHeadCtrl.value"
                                        [value]="subHead.value" matTooltip="{{subHead.viewValue}}">
                                        {{subHead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="detailHead" placeholder="Detailed Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="detailHeadCtrl"
                                            [placeholderLabel]="'Find Detail Head...'"
                                            [noEntriesFoundLabel]="'no matching Detail Head'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let detailHead of detailHeadList| filterSelectInput: detailHeadCtrl.value"
                                        [value]="detailHead.value" matTooltip="{{detailHead.viewValue}}">
                                        {{detailHead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="objectClass" placeholder="Object Class" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="objClassCtrl"
                                            [placeholderLabel]="'Find Object Class...'"
                                            [noEntriesFoundLabel]="'no matching Object Class'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let Obj of objectClassList| filterSelectInput: objClassCtrl.value"
                                        [value]="Obj.value" matTooltip="{{Obj.viewValue}}">
                                        {{Obj.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="typeOfEstimate" placeholder=" Type of Estimate"
                                    (ngModelChange)="itemSelect($event)" #valueCon>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="typeCtrl"
                                            [placeholderLabel]="'Find Budget Type...'"
                                            [noEntriesFoundLabel]="'no matching Type found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let type of typeofEstimateList | filterSelectInput: typeCtrl.value"
                                        [value]="type.value">
                                        {{type.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-4"
                            *ngIf="this.formGroupBillTypeWise.controls.typeOfEstimate.value == 2 || this.formGroupBillTypeWise.controls.typeOfEstimate.value == 3">

                            <mat-form-field class="full-width">
                                <mat-select formControlName="itemName" placeholder="Item Name / Work Name">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="itemCtrl"
                                            [placeholderLabel]="'Find Item Name...'"
                                            [noEntriesFoundLabel]="'no matching Item Name found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let item of itemNameList | filterSelectInput: itemCtrl.value"
                                        [value]="item.value" matTooltip="{{item.viewValue}}">
                                        {{item.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>

                    <!-- action button start -->
                    <div class="form-action-button">
                        <button type="submit" mat-raised-button color="primary" title="Save">
                            <i class="material-icons" title="Save" aria-hidden="true"> save </i>
                            Save
                        </button>
                        <button type="button" mat-raised-button class="btnClose" title="Close">
                            <i class="material-icons" title="Close" aria-hidden="true">
                                close
                            </i>
                            Close
                        </button>
                    </div>
                    <!-- action button end -->
                </div>
            </div>
            <!--  Bill Type Wise Head Structure Mapping Screen End -->
        </form>
        <!-- form  end-->

        <!-- listing start -->
        <div>
            <table mat-table [dataSource]="dataSourceStructureSearch" class="responsive-table">

                <ng-container matColumnDef="billType">
                    <th mat-header-cell *matHeaderCellDef scope="row">Bill Type</th>
                    <td mat-cell *matCellDef="let element;let i= index;" class="">
                        {{element.billType}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="classOfExpenditure">
                    <th mat-header-cell *matHeaderCellDef scope="row">Class Of Expenditure</th>
                    <td mat-cell *matCellDef="let element;let i= index;" class="">
                        {{element.classOfExpenditure}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="fundType">
                    <th mat-header-cell *matHeaderCellDef scope="row">Fund Type</th>
                    <td mat-cell *matCellDef="let element;let i= index;" class="">
                        {{element.fundType}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="schemeType">
                    <th mat-header-cell *matHeaderCellDef scope="row">State/CSS</th>
                    <td mat-cell *matCellDef="let element;let i= index;" class="">
                        {{element.schemeType}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="department">
                    <th mat-header-cell *matHeaderCellDef class="gray-color" scope="row">Department</th>
                    <td mat-cell *matCellDef="let element" class="">
                        {{element.department}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="demand">
                    <th mat-header-cell *matHeaderCellDef scope="row">Demand</th>
                    <td mat-cell *matCellDef="let element;let i= index;" class="">
                        {{element.demand}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="majorHead">
                    <th mat-header-cell *matHeaderCellDef scope="row">Major Head</th>
                    <td mat-cell *matCellDef="let element;let i= index;" class="">
                        {{element.majorHead}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="subMajorHead">
                    <th mat-header-cell *matHeaderCellDef scope="row">Sub Major Head</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.subMajorHead}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="minorHead">
                    <th mat-header-cell *matHeaderCellDef scope="row">Minor Head</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.minorHead}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="subHead">
                    <th mat-header-cell *matHeaderCellDef scope="row">Sub Head</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.subHead}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="detailHead">
                    <th mat-header-cell *matHeaderCellDef scope="row">Detailed Head</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.detailHead}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="objectClass">
                    <th mat-header-cell *matHeaderCellDef scope="row">Object Class</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.objectClass}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="typeOfEstimate">
                    <th mat-header-cell *matHeaderCellDef scope="row">Type Of Estimate</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.typeOfEstimate}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="itemName">
                    <th mat-header-cell *matHeaderCellDef scope="row">Item name</th>
                    <td mat-cell *matCellDef="let element" class="text-center">
                        {{element.itemName}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef scope="row"> Action </th>
                    <td mat-cell *matCellDef="let element;let i = index;" class="action-btn-i centerAlign">
                        <i class="material-icons plus edit-icon" title="Edit" aria-hidden="true"
                            (click)='triggerEdit(i)'> edit </i>
                        <i class="material-icons plus delete-icon" title="Delete" aria-hidden="true"
                            (click)='triggerDelete(i)'> delete </i>
                        <i class="material-icons plus view-icon" title="View" aria-hidden="true"
                            (click)='triggerView(i)'>remove_red_eye</i>
                    </td>
                </ng-container>

                <!-- Header Section Of table -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <!-- Data Fetch From .TS File to table -->
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </div>
        <!-- listing end -->

    </div>
</div>