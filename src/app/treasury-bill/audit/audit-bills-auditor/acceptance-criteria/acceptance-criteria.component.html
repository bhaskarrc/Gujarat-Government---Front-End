<div class="panel-group">
  <mat-accordion class="search-accordian">
    <mat-expansion-panel [expanded]="false">
      <mat-expansion-panel-header>
        <div class="heading-section">
          Search
        </div>
      </mat-expansion-panel-header>
      <!-- seach acceptance  -->
      <div class=" form-datatable-list">
        <form class="col-sm-12" [formGroup]="auditAuditorAcceptanceForm" (ngSubmit)="auditAuditorAcceptanceFormData()">
          <div class="row">
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="challanno" value="19200003" placeholder="Challan Number"
                  formControlName="challanno">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <mat-select name="partyName" formControlName="partyName" placeholder="Party Name">
                  <mat-option>
                    <ngx-mat-select-search [formControl]="partyNameCtrl" [placeholderLabel]="'Select Party Name ...'"
                      [noEntriesFoundLabel]="'no matching Tange type found'">
                    </ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let party of party_list | filterSelectInput : partyNameCtrl.value : 'viewValue'"
                    [value]="party.value">
                    {{party.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="deppartment" maxlength="6" placeholder="Department" formControlName="deppartment">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput [matDatepicker]="picker3" placeholder="Challan Date">
                <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                <mat-datepicker #picker3></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="amount" class="rightAlign" value="1000.00" placeholder="Amount"
                  formControlName="amount">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="code" placeholder="Code" formControlName="code">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="mHead" value="8443" placeholder="Major Head" formControlName="mHead">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="subMajorHead" value="00" placeholder="Sub-Major Head"
                  formControlName="subMajorHead">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="minorHead" value="101" placeholder="Minor Head" formControlName="minorHead">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <input matInput name="subHead" value="01" placeholder="Sub Head" formControlName="subHead">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field>
                <mat-select name="noOfChallan" formControlName="noOfChallan" placeholder="No of Challans">
                  <mat-option>
                    <ngx-mat-select-search [formControl]="noOfChallanCtrl"
                      [placeholderLabel]="'Select No of Challans ...'"
                      [noEntriesFoundLabel]="'no matching Tange type found'">
                    </ngx-mat-select-search>
                  </mat-option>
                  <mat-option
                    *ngFor="let nochallan of noOfChallan_list | filterSelectInput : noOfChallanCtrl.value : 'viewValue'"
                    [value]="nochallan.value">
                    {{nochallan.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </form>
        <!-- Common button -->
        <div class="row displayBlock form-action-button">
          <div class="centerAlign">
            <button type="submit" mat-raised-button color="primary">
              <i class="material-icons">search</i> Search </button>
            <button type="reset" mat-raised-button color="accent">
              <i class="material-icons">restore</i> Reset </button>
          </div>
        </div>
        <!-- End Common button -->
      </div>
      <!-- End seach acceptance  -->
    </mat-expansion-panel>
  </mat-accordion>
  <br>
  <div class="box box-primary">
    <div class="box-header">Challan List</div>
    <div class="box-body">
      <!-- Table Challan List -->
      <div class="mat-elevation-z8 mt-2 responsive-table">
        <table mat-table [dataSource]="dataSource" class="table-responsive" width="100%" matSort>
          <ng-container matColumnDef="checkBox">
            <th mat-header-cell *matHeaderCellDef>
              <mat-checkbox (change)="$event ? masterToggle() : null"
                [checked]="selection.hasValue() && isAllSelected()"
                [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row" class="centerAlign">
              <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
              </mat-checkbox>
            </td>
          </ng-container>
          <ng-container matColumnDef="challanNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Challan Number</th>
            <td mat-cell *matCellDef="let element"> {{element.challanNo}} </td>
          </ng-container>


          <ng-container matColumnDef="refNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Reference Number</th>
            <td mat-cell *matCellDef="let element"> {{element.refNo}} </td>
          </ng-container>

          <ng-container matColumnDef="tokenNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Token No.</th>
            <td mat-cell *matCellDef="let element"> {{element.tokenNo}} </td>
          </ng-container>

          <ng-container matColumnDef="ddoNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>DDO No.</th>
            <td mat-cell *matCellDef="let element"> {{element.ddoNo}} </td>
          </ng-container>

          <ng-container matColumnDef="cardexNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Cardex No.</th>
            <td mat-cell *matCellDef="let element"> {{element.cardexNo}} </td>
          </ng-container>

          <ng-container matColumnDef="ddoname">
            <th mat-header-cell *matHeaderCellDef> Office Name</th>
            <td mat-cell *matCellDef="let element">
              {{element.ddoname}}
            </td>
          </ng-container>

          <ng-container matColumnDef="billdate">
            <th mat-header-cell *matHeaderCellDef> Bill Date</th>
            <td mat-cell *matCellDef="let element">
              {{element.billdate}}
            </td>
          </ng-container>
          <ng-container matColumnDef="billtype">
            <th mat-header-cell *matHeaderCellDef> Bill Type</th>
            <td mat-cell *matCellDef="let element">
              {{element.billtype}}
            </td>
          </ng-container>
          <ng-container matColumnDef="majorHead">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Major Head</th>
            <td mat-cell *matCellDef="let element" [matTooltip]="element.mhead"> {{element.majorHead}}
            </td>
          </ng-container>
          <ng-container matColumnDef="billGrossAmount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Bill Gross
              Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.billGrossAmount}} </td>
          </ng-container>

          <ng-container matColumnDef="coded">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Code</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.coded}} </td>
          </ng-container>
          <ng-container matColumnDef="billAmount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Bill Net
              Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.billAmount}} </td>
          </ng-container>
          <ng-container matColumnDef="inwarddate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Bill Inward Date</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.inwarddate}} </td>
          </ng-container>


          <ng-container matColumnDef="chequeamount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Cheque Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.chequeamount}} </td>
          </ng-container>
          <ng-container matColumnDef="department">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Department</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.department}} </td>
          </ng-container>
          <ng-container matColumnDef="party">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Party Name</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              {{element.party}} </td>
          </ng-container>
          <ng-container matColumnDef="paidAmount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Paid Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">
              <a (click)="paidamounthis()">{{element.paidAmount}} </a></td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action</th>
            <td mat-cell *matCellDef="let element" class="action-btn-i
                centerAlign">
              <a (click)="clickEventHandler()"><i class="material-icons plus view-icon"
                  title="View">remove_red_eye</i></a>

              <a class="delete-icon" (click)="delete()">
                <i class="material-icons plus delete" title="delete">delete_forever</i>
              </a>
            </td>
          </ng-container>
          <!-- Header Section Of table -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <!-- Data Fetch From .TS File to table -->
          <tr mat-row *matRowDef="let row; let i = index;columns: displayedColumns;">
          </tr>
        </table>
        <br>
        <!-- Common Button -->
        <div class="form-action-button">
          <button type="submit" mat-raised-button color="primary" (click)="show_data()">
            <i class="material-icons" aria-hidden="true" title="Save">
              save
            </i>
            Save
          </button>
          <br>
        </div>
        <!-- End COmmon button -->
      </div>
      <!-- End Table Challan List -->
      <br>
      <!-- If Table Challan List -->
      <div *ngIf="selectedAll">

        <form [formGroup]="auditAuditorChallanForm">
          <table mat-table [dataSource]="challandataSource" width="100%" matSort>
            <ng-container matColumnDef="checkBox">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event ? masterToggle() : null"
                  [checked]="selection.hasValue() && isAllSelected()"
                  [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row" class="centerAlign">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                  [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                </mat-checkbox>
              </td>
              <td mat-footer-cell *matFooterCellDef>Total</td>
            </ng-container>
            <ng-container matColumnDef="challanNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Challan Number</th>
              <td mat-cell *matCellDef="let element"> {{element.challanNo}}</td>.
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>
            <ng-container matColumnDef="coded">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Challan coded</th>
              <td mat-cell *matCellDef="let element"> {{element.coded}}</td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>


            <ng-container matColumnDef="chequeamount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Cheque Amount</th>
              <td mat-cell *matCellDef="let element" class="rightAlign">
                <mat-form-field>

                  <input matInput [value]="R1" numbersOnly class="rightAlign" [(ngModel)]="element.chequeamount"
                    [ngModelOptions]="{standalone: true}" required type="text">
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef class="rightAlign">{{getchequeTotal() | number :'1.2-2'}}</td>
            </ng-container>
            <ng-container matColumnDef="amount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Amount</th>
              <td mat-cell *matCellDef="let element" class="rightAlign">
                <mat-form-field>
                  <input matInput [value]="R1" numbersOnly class="rightAlign" [(ngModel)]="element.amount"
                    [ngModelOptions]="{standalone: true}" required type="text">
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef class="rightAlign">{{getTotal() | number :'1.2-2'}}</td>
            </ng-container>


            <ng-container matColumnDef="billdate">
              <th mat-header-cell *matHeaderCellDef> Bill Date</th>
              <td mat-cell *matCellDef="let element">
                {{element.billdate}}
              </td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

            <ng-container matColumnDef="refNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Reference Number</th>
              <td mat-cell *matCellDef="let element"> {{element.refNo}} </td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

            <ng-container matColumnDef="tokenNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Token No.</th>
              <td mat-cell *matCellDef="let element"> {{element.tokenNo}} </td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef> Action</th>
              <td mat-cell *matCellDef="let element" class="action-btn-i
                      centerAlign">
                <a (click)="clickEventHandler()"><i class="material-icons plus view-icon"
                    title="View">remove_red_eye</i></a>
                <a class="delete-icon">
                  <i class="material-icons plus" aria-hidden="true" title="Save">
                    save
                  </i>
                </a>
                <a class="delete-icon" (click)="delete_low()">
                  <i class="material-icons plus delete" title="delete">delete_forever</i>
                </a>
              </td>
              <td mat-footer-cell *matFooterCellDef> </td>

            </ng-container>
            <!-- Header Section Of table -->
            <tr mat-header-row *matHeaderRowDef="challandisplayedColumns"></tr>
            <!-- Data Fetch From .TS File to table -->
            <tr mat-row *matRowDef="let row; let i = index;columns: challandisplayedColumns;">
            </tr>
            <!-- Footer Section Of table -->
            <tr mat-footer-row *matFooterRowDef="challandisplayedColumns"></tr>

          </table>
        </form>
        <!-- Common Button -->
        <div class="form-action-button">
          <button mat-raised-button type="submit" class="green" (click)="submitToNextLevel()"><i class="material-icons">
              done
            </i> Submit
          </button>
          <button type="button" mat-raised-button (click)="close()" class="btnClose">
            <i class="material-icons" aria-hidden="true" title="Budget dashboard">
              close
            </i>
            Close
          </button>
        </div>
        <!-- End Common Button -->

      </div>
      <!--  End If Table Challan List -->

    </div>
  </div>
</div>