<div class="container">
  <div class="form-wrapper">
    <div class="heading-section ng-star-inserted">
      <div>Voucher & Stamp Commission</div>
      <div class="font-heading"><b>Reference No:</b> 19-20/EA/VSC/001</div>
      <div class="font-heading"><b>Reference Date:</b> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}</div>
    </div>
    <!-- Navigations Starts -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">EA</a></li>
        <li class="breadcrumb-item active" aria-current="page">Voucher & Stamp Commission</li>
      </ol>
    </nav>
    <!-- Navigations Ends-->
    <form [formGroup]="voucherStampComission">
      <!-- DDO Name starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">DDO Name and Voucher Information</div>
          <div class="box-body">
            <div class="row">

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput type="text" placeholder="DDO Name" formControlName="ddoName" charactersOnly>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput name="cardexNo" formControlName="cardexNo" placeholder="Cardex No." numbersOnly
                    required>
                  <div class="error-wrapper"
                    *ngIf="voucherStampComission.controls.cardexNo.touched || (voucherStampComission.controls.cardexNo.errors && isSubmitted)">
                    <mat-error *ngIf="voucherStampComission.controls.cardexNo.errors?.required">
                      {{errorMessages.CARDEX_NO}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>


              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput type="text" placeholder="Voucher No." formControlName="voucherNo" numbersOnly
                    maxlength="5" required>
                  <div class="error-wrapper"
                    *ngIf="voucherStampComission.controls.voucherNo.touched || (voucherStampComission.controls.voucherNo.errors && isSubmitted)">
                    <mat-error *ngIf="voucherStampComission.controls.voucherNo.errors?.required">
                      {{errorMessages.VOUCHER_NUMBER}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="voucherDate" [matDatepicker]="voucherDate" [max]='maxDate'
                    placeholder="Voucher Date" readonly required>
                  <mat-datepicker-toggle matSuffix [for]="voucherDate">
                  </mat-datepicker-toggle>
                  <mat-datepicker #voucherDate></mat-datepicker>

                  <div class="error-wrapper"
                    *ngIf="voucherStampComission.controls.voucherDate.touched || (voucherStampComission.controls.voucherDate.errors && isSubmitted)">
                    <mat-error *ngIf="voucherStampComission.controls.voucherDate.errors?.required">
                      {{errorMessages.DATE}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput type="text" maxlength="16" numbersOnly placeholder="Gross Amount"
                    formControlName="grossAmount" required>
                  <div class="error-wrapper"
                    *ngIf="voucherStampComission.controls.grossAmount.touched || (voucherStampComission.controls.grossAmount.errors && isSubmitted)">
                    <mat-error *ngIf="voucherStampComission.controls.grossAmount.errors?.required">
                      {{errorMessages.AMOUNT}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>


              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput type="text" maxlength="16" numbersOnly placeholder="Net Amount"
                    formControlName="netAmount" required>
                  <div class="error-wrapper"
                    *ngIf="voucherStampComission.controls.netAmount.touched || (voucherStampComission.controls.netAmount.errors && isSubmitted)">
                    <mat-error *ngIf="voucherStampComission.controls.netAmount.errors?.required">
                      {{errorMessages.AMOUNT}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Type Of Stamp" formControlName="typeOfStamp">
                  <div class="error-wrapper"
                    *ngIf="voucherStampComission.controls.typeOfStamp.touched || (voucherStampComission.controls.typeOfStamp.errors && isSubmitted)">
                    <mat-error *ngIf="voucherStampComission.controls.typeOfStamp.errors?.required">
                      {{errorMessages.BILL_CATEGORY}}
                    </mat-error>
                  </div>
                </mat-form-field>

              </div>

            </div>
          </div>
        </div>
      </div>
      <!-- DDO Name ends -->

      <!-- Head Detail starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Head Detail</div>
          <div class="box-body">

            <div class="row">
              <div class="col-sm-3">

                <mat-form-field class="full-width">
                  <input matInput placeholder="Demand" formControlName="demand">
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Major Head" formControlName="majorHead">
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Sub Major Head" formControlName="subMajorHead">
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Minor Head" formControlName="minorHead">
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Sub Head" formControlName="subHead">
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Detailed Head" formControlName="detailHead">
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput placeholder="Expenditure Major Head" formControlName="expenditureMajorHead">
                </mat-form-field>
              </div>

            </div>
          </div>
        </div>
      </div>
      <!-- Head Detail ends -->
      <!-- Expenditure Detail starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Expenditure Detail</div>
          <div class="box-body">



            <table mat-table [dataSource]="expenditureDataSource" class="mat-elevation-z8 "
              aria-describedby="expenditurTable">


              <ng-container matColumnDef="edpCode">
                <th mat-header-cell *matHeaderCellDef scope="row">EDP Code</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.edpCode" [ngModelOptions]="{standalone: true}"
                      (keypress)="numberOnly($event)" type="text" maxlength="4">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                  <b>Total</b></td>
              </ng-container>

              <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef scope="row">Description</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.description" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="budgetCode">
                <th mat-header-cell *matHeaderCellDef scope="row">Budget Code</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.budgetCode" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef scope="row">Amount (Rs)</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.amount" [ngModelOptions]="{standalone: true}" type="text"
                      (keypress)="numberOnly($event)" class="rightAlign" maxlength="10">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="expenditureDisplayColumns"></tr>

              <tr mat-row *matRowDef="let row; let i = index;columns: expenditureDisplayColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="expenditureDisplayColumns"></tr>
            </table>


          </div>
        </div>
      </div>
      <!-- Expenditure Detail ends -->
      <!-- Recovery Detail starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Recovery Detail</div>
          <div class="box-body">

            <table mat-table [dataSource]="recoveryDataSource" class="mat-elevation-z8 "
              aria-describedby="expenditurTable">


              <ng-container matColumnDef="edpCode">
                <th mat-header-cell *matHeaderCellDef scope="row">EDP Code</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.edpCodeR" [ngModelOptions]="{standalone: true}"
                      (keypress)="numberOnly($event)" type="text" maxlength="4">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                  <b>Total</b></td>
              </ng-container>

              <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef scope="row">Description</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.descriptionR" [ngModelOptions]="{standalone: true}"
                      type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="budgetCode">
                <th mat-header-cell *matHeaderCellDef scope="row">Budget Code</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.budgetCodeR" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef scope="row">Amount (Rs)</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.amount" [ngModelOptions]="{standalone: true}" type="text"
                      (keypress)="numberOnly($event)" class="rightAlign" maxlength="10">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="recoveryDisplayColumns"></tr>
              <tr mat-row *matRowDef="let row; let i = index;columns: recoveryDisplayColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="recoveryDisplayColumns"></tr>
            </table>


          </div>
        </div>
      </div>
      <!-- Recovery Detail ends -->
      <!-- Receipt Detail starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Receipt Detail</div>
          <div class="box-body">
            <table mat-table [dataSource]="receiptDataSource" class="mat-elevation-z8 "
              aria-describedby="expenditurTable">

              <ng-container matColumnDef="edpCode">
                <th mat-header-cell *matHeaderCellDef scope="row">EDP Code</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.edpCodeRe" [ngModelOptions]="{standalone: true}"
                      (keypress)="numberOnly($event)" type="text" maxlength="4">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                  <b>Total</b></td>
              </ng-container>

              <ng-container matColumnDef="dedType">
                <th mat-header-cell *matHeaderCellDef scope="row">DED Type</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.dedType" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="majorHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Major Head</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.majorHead" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="subMajorHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Sub-Major Head</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.subMajorHead" [ngModelOptions]="{standalone: true}"
                      type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>
              <ng-container matColumnDef="minorHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Minor Head</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.minorHead" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>
              <ng-container matColumnDef="subHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Sub Head</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.subHead" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef scope="row">Amount (Rs)</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.amount" [ngModelOptions]="{standalone: true}" type="text"
                      (keypress)="numberOnly($event)" class="rightAlign" maxlength="10">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="receiptDisplayColumns"></tr>
              <tr mat-row *matRowDef="let row; let i = index;columns: receiptDisplayColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="receiptDisplayColumns"></tr>
            </table>


          </div>
        </div>
      </div>
      <!-- Receipt Detail ends -->
      <!-- Receipt Detail starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Receipt Detail</div>
          <div class="box-body">

            <table mat-table [dataSource]="amountDataSource" class="mat-elevation-z8 "
              aria-describedby="expenditurTable">

              <ng-container matColumnDef="deductionA">
                <th mat-header-cell *matHeaderCellDef scope="row">Deduction-A</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.deductionA" [ngModelOptions]="{standalone: true}"
                      (keypress)="numberOnly($event)" class="rightAlign" maxlength="10" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                  <b>Total</b></td>
              </ng-container>

              <ng-container matColumnDef="deductionB">
                <th mat-header-cell *matHeaderCellDef scope="row">Deduction-B</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.deductionB" (keypress)="numberOnly($event)" class="rightAlign"
                      maxlength="10" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="expenditure">
                <th mat-header-cell *matHeaderCellDef scope="row">Expenditure</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.expenditure" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <ng-container matColumnDef="recovery">
                <th mat-header-cell *matHeaderCellDef scope="row">Recovery</th>
                <td mat-cell *matCellDef="let element" class="centerAlign">
                  <mat-form-field floatLabel="never">
                    <input matInput [(ngModel)]="element.recovery" [ngModelOptions]="{standalone: true}" type="text">
                  </mat-form-field>
                </td>
                <td mat-footer-cell *matFooterCellDef>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="amountDisplayColumns"></tr>
              <tr mat-row *matRowDef="let row; let i = index;columns: amountDisplayColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="amountDisplayColumns"></tr>
            </table>


          </div>
        </div>
      </div>
      <!-- Receipt Detail ends -->


      <div class="box box-primary">

        <!-- display e-payment details if payment type is e-payment -->
        <div class="mat-elevation-z8">
          <div class="box-header"> Payment Details</div>
          <div class="box-body">
            <div class="row">

              <div class=" col-sm-12">
                <!-- display cheque details if payment type is cheque -->
                <div class="mat-elevation-z8 mt-2">
                  <table mat-table [dataSource]="checkDataSource" matSort aria-describedby="chequeDetails">
                    <ng-container matColumnDef="chequeType">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row" style="width: 33.3%;">Cheque
                        Type *
                      </th>
                      <td mat-cell *matCellDef="let  element; let i = index">
                        {{element.chequeType}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef>Total </td>
                    </ng-container>

                    <ng-container matColumnDef="chequeAmount">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row" style="width: 33.3%;">
                        Challan Amount (in
                        Rs.) *</th>
                      <td mat-cell *matCellDef="let  element;let i=index">
                        <mat-form-field class="example-full-width" class="rightAlign">
                          <input matInput decimalLimitTwoOnly [(ngModel)]="element.chequeAmount"
                            value="{{element.chequeAmount}}" decimalPoint2 [ngModelOptions]="{standalone:  true}"
                            required>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef class="rightAlign">
                        {{getTotalAmount() | number :'1.2-2'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row" style="width: 33.3%;">Action
                      </th>
                      <td mat-cell *matCellDef="let element;let i=index">
                        <table class="iconTable" aria-describedby="actionBtn">
                          <tbody>
                            <tr>
                              <td width="30">
                                <i class="material-icons plus add" aria-hidden="true"
                                  *ngIf="(i ==  checkDataSource.data.length  - 1)" (click)="addNewRow()">
                                  add
                                </i>
                              </td>
                              <td width="30">
                                <i class="material-icons  plus delete" aria-hidden="true"
                                  *ngIf="checkDataSource.data.length > 1" (click)="addDeleteChequekDataRow(i)">
                                  delete
                                </i>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </td>

                      <td mat-footer-cell *matFooterCellDef class="rightAlign"></td>
                    </ng-container>

                    <!-- Header Section Of table -->
                    <tr mat-header-row *matHeaderRowDef="checkColumn"></tr>
                    <!-- Data Fetch From .TS File to table -->
                    <tr mat-row *matRowDef="let row; let i=  index;columns:checkColumn"></tr>
                    <!-- Footer Section Of table -->
                    <tr mat-footer-row *matFooterRowDef="checkColumn"></tr>
                  </table>


                </div>
              </div>

            </div>

          </div>
        </div>

      </div>
      <!-- Common Action Button Starts -->
      <div class="form-action-button">
        <button mat-raised-button type="button" class="green" (click)="onSave();">
          <i aria-hidden="true" class="material-icons">
            done
          </i> Submit
        </button>
        <button type="button" mat-raised-button (click)="clearForm()" class="btnClose">
          <i class="material-icons" title="close" aria-hidden="true" title="cancle">
            close</i>
          Cancel
        </button>
      </div>
      <!-- Common Action Button Ends-->

    </form>
  </div>
</div>