<div class="container">
  <div class="form-wrapper">

    <div class="heading-section ng-star-inserted">
      <div>Surprise Verification - Treasury Office</div>
      <div class="font-heading">
        <b>Reference No:</b> 19-20/STM/SVTO/001</div>
    <div class="font-heading">
        <b>Reference Date:</b> {{ date | date: 'dd-MMM-yyyy HH:mm'}}</div>
    </div>

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Stamp Processing</a></li>
        <li class="breadcrumb-item active" aria-current="page">Surprise Verification</li>
      </ol>
    </nav>

    <div class="panel-group">


      <mat-tab-group mat-stretch-tabs>
            <mat-tab label="Surprise Verification" class="full-width">
              <!-- Entry Section Starts-->
                  <div #parentGrids>
                    <form [formGroup]="surpriseVerificationToForm" (ngSubmit)="surpriseVerificationToData()">
                      <div class="row">
                        <!-- Toggle for Eng/Guj -->
                            <div class="text-right col-sm-12 ">
                              <button mat-raised-button type="button" class="lang-btn"
                                (click)="toggleLanguage()">{{currentLang.value == 'Eng' ? 'Guj' : 'Eng' }}</button>
                            </div>
                        <div class="col-sm-3">
                          <mat-form-field class="full-width disabled">
                            <input matInput type="text" formControlName="finYear" placeholder="Financial Year" required
                              readonly>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.finYear.touched && (surpriseVerificationToForm.controls.finYear.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.finYear.errors.required">
                              {{errorMessages.FIN_YEAR}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                          <mat-form-field class="full-width disabled">
                            <mat-label>Name Of Office</mat-label>
                            <input matInput formControlName="offName" #offVal [matTooltip]="offVal.value" required readonly>
        
                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.offName.touched && (surpriseVerificationToForm.controls.offName.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.offName.errors.required">
                              {{errorMessages.DEPT}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>

                        <div class="col-sm-3" *ngIf="surpriseVerificationToForm.controls.troffice.value != null">
                          <mat-form-field class="full-width">
                            <mat-select formControlName="veriType" #veriTypeVal placeholder="Type of Verification" required>
                              <mat-option>
                                <ngx-mat-select-search [formControl]="veriTypeCtrl"
                                  [placeholderLabel]="'Find Authorized Type of Verification...'"
                                  [noEntriesFoundLabel]="'no Authorized Type of Verification found'">
                                </ngx-mat-select-search>
                              </mat-option>
                              <mat-option *ngFor="let ch of veriType_List | filterSelectInput:veriTypeCtrl.value"
                              [matTooltip]="ch.viewValue" [value]="ch.value">
                                {{ch.viewValue}}
                              </mat-option>
                            </mat-select>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.veriType.touched && (surpriseVerificationToForm.controls.veriType.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.veriType.errors.required">
                              {{errorMessages.TYPE}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>

                        <div class="col-sm-3" *ngIf="surpriseVerificationToForm.controls.veriType.value == '3'">
                          <mat-form-field class="full-width disabled">
                            <mat-label>Treasury Office</mat-label>
                            <input matInput formControlName="toffice" #trOffVal
                            [matTooltip]="trOffVal.value"  required readonly>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.toffice.touched && (surpriseVerificationToForm.controls.toffice.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.toffice.errors.required">
                              {{errorMessages.DEPT}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>

                        <div class="col-sm-3" *ngIf="surpriseVerificationToForm.controls.veriType.value == '1' || 
                        surpriseVerificationToForm.controls.veriType.value == '2'">
                          <mat-form-field class="full-width">
                            <mat-select formControlName="troffice" #subTreVal placeholder="Sub Treasury Office" required>
                              <mat-option>
                                <ngx-mat-select-search [formControl]="trofficeCtrl"
                                  [placeholderLabel]="'Find Authorized Sub Treasury Offices...'"
                                  [noEntriesFoundLabel]="'no Authorized Sub Treasury Office found'">
                                </ngx-mat-select-search>
                              </mat-option>
                              <mat-option *ngFor="let ch of subTre_List | filterSelectInput:trofficeCtrl.value"
                              [matTooltip]="ch.viewValue"  [value]="ch.value">
                                {{ch.viewValue}}
                              </mat-option>
                            </mat-select>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.troffice.touched && (surpriseVerificationToForm.controls.troffice.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.troffice.errors.required">
                              {{errorMessages.SUB_TRE}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                          <mat-form-field>
                            <input matInput formControlName="visitDate" placeholder="Date Of Visit" [matDatepicker]="picker"
                              required>
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.visitDate.touched && (surpriseVerificationToForm.controls.visitDate.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.visitDate.errors.required">
                              {{errorMessages.DATE}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>


                        <div class="col-sm-3">
                          <mat-form-field class="full-width disabled">
                            <mat-label>Name Of Verification Officer</mat-label>
                            <input matInput formControlName="verificationoffice" required readonly>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.verificationoffice.touched && (surpriseVerificationToForm.controls.verificationoffice.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.verificationoffice.errors.required">
                              {{errorMessages.NAME}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                          <mat-form-field class="full-width disabled">
                            <mat-label>Designation</mat-label>
                            <input matInput formControlName="desi" required readonly>

                          <div class="error-wrapper"
                            *ngIf="surpriseVerificationToForm.controls.desi.touched && (surpriseVerificationToForm.controls.desi.errors)">
                            <mat-error *ngIf="surpriseVerificationToForm.controls.desi.errors.required">
                              {{errorMessages.DESIGNATION}}
                            </mat-error>
                          </div>
                          </mat-form-field>
                        </div>
                        <div class="col-sm-9">
                        </div>
                        <div class="col-sm-6">
                            <mat-form-field class="example-full-width">
                                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="8" placeholder="Remarks"
                                    formControlName="remarks" (focus)="setGujaratiDefault()"
                                    (focusout)="hasFocusSet=1;setEnglishOnFocusOut()" [ngClass]="hasFocusSet == 1 ? 'hasfocus' : ''" required></textarea>
                                    <div class="error-wrapper"
                                        *ngIf="surpriseVerificationToForm.controls.remarks.touched && surpriseVerificationToForm.controls.remarks.errors">
                                        <mat-error *ngIf="surpriseVerificationToForm.controls.remarks.errors.required">
                                            {{errorMessages.REMARK}} 
                                        </mat-error>
                                    </div>
                            </mat-form-field>
                        </div>



                      </div>
                    </form>

                    <!-- Action Buttons -->
                    <div class="form-action-button">
                      <button type="submit" mat-raised-button color="primary">
                        <i class="material-icons" aria-hidden="true" title="Save">
                          save
                        </i>
                        Save as Draft
                      </button>
              
                      <button mat-raised-button type="submit" (click)="directiveObject.sumbit()" class="green">
                        <i aria-hidden="true" class="material-icons">
                          done
                        </i> Submit
                      </button>
              
                      <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                        <i class="material-icons" aria-hidden="true" title="Listing">
                          list
                        </i>
                        Listing
                      </button>
                      <button type="button" mat-raised-button (click)="directiveObject.closeConfirmationPopup()" class="btnClose">
                        <i class="material-icons" aria-hidden="true" title="Dashboard">
                          close
                        </i>
                        Close
                      </button>
                    </div>
                </div>
              <!-- Entry Section Ends-->
            </mat-tab>
        
            <!-- Treasury Inspection Management Entry Section ends-->
            
            <!-- Attachments Section Starts-->
            <mat-tab label="Attachments" class="full-width">
              <app-common-attachment [attachemntValue]="attachmentType_list"></app-common-attachment>
    
            <!-- Action Buttons -->
            <div class="form-action-button">
              
              <button type="submit" mat-raised-button color="primary">
                <i class="material-icons" aria-hidden="true" title="Save">
                  save
                </i>
                Upload
              </button>
      
              <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                <i class="material-icons" aria-hidden="true" title="Listing">
                  list
                </i>
                Listing
              </button>
              <button type="button" mat-raised-button (click)="directiveObject.closeConfirmationPopup()" class="btnClose">
                <i class="material-icons" aria-hidden="true" title="Dashboard">
                  close
                </i>
                Close
              </button>
            </div>
            </mat-tab>
            <!-- Attachments Section Starts-->     
          
      </mat-tab-group>
    </div>

  </div>
</div>
