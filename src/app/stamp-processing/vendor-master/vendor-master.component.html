<div class="container">
    <div class="form-wrapper">

        <div class="heading-section ng-star-inserted">
            <div>Vendor Master</div>
        </div>

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Stamp Processing</a></li>
                <li class="breadcrumb-item active" aria-current="page">Vendor Master</li>
            </ol>
        </nav>

        <div class="panel-group">

            <mat-tab-group mat-stretch-tabs>
                <!-- Vendor Master Entry Section Starts-->
                <mat-tab label="Vendor Master" class="full-width">
                    <div class="box box-primary">
                      <div class="box-header">Vendor Details</div>
                      <div class="box-body">
                        <form [formGroup]="vendorForm">
                            <div class="row">

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="treSub" placeholder="Treasury/Sub-Treasury Office"
                                            required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="treSubCtrl"
                                                    [placeholderLabel]="'Find Treasury/Sub-Treasury Office...'"
                                                    [noEntriesFoundLabel]="'no matching Treasury/Sub-Treasury Office found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let indFor of treSub_List | filterSelectInput:treSubCtrl.value"
                                                [value]="indFor.value">
                                                {{indFor.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.treSub.touched && (vendorForm.controls.treSub.errors)">
                                            <mat-error *ngIf="vendorForm.controls.treSub.errors.required">
                                                {{errorMessages.TRE_OR_SUB}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3" *ngIf="vendorForm.controls.treSub.value=='1'">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="treasuryOffice"
                                            placeholder="Treasury Office">
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3" *ngIf="vendorForm.controls.treSub.value=='2'">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="subTreOff" placeholder="Sub Treasury Office"
                                            required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="subTreOffCtrl"
                                                    [placeholderLabel]="'Find Sub Treasury Office...'"
                                                    [noEntriesFoundLabel]="'no matching Sub Treasury Office found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let subTre of subTre_List | filterSelectInput:subTreOffCtrl.value"
                                                [matTooltip]="subTre.viewValue"  [value]="subTre.value">
                                                {{subTre.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.subTreOff.touched && (vendorForm.controls.subTreOff.errors)">
                                            <mat-error *ngIf="vendorForm.controls.subTreOff.errors.required">
                                                {{errorMessages.SUB_TRE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="venType" placeholder="Type of Vendor" required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="venTypeCtrl"
                                                    [placeholderLabel]="'Find Type of Vendor...'"
                                                    [noEntriesFoundLabel]="'no Vendor found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let stm of venType_List | filterSelectInput:venTypeCtrl.value"
                                                [value]="stm.value">
                                                {{stm.viewValue}}
                                            </mat-option>
                                        </mat-select>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.venType.touched && (vendorForm.controls.venType.errors)">
                                            <mat-error *ngIf="vendorForm.controls.venType.errors.required">
                                                {{errorMessages.TYPE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="vendorName"
                                            placeholder="Vendor Name" required>
                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.vendorName.touched && (vendorForm.controls.vendorName.errors)">
                                            <mat-error *ngIf="vendorForm.controls.vendorName.errors.required">
                                                {{errorMessages.NAME}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="vendorCode"
                                            placeholder="Vendor Code">
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3" *ngIf="vendorForm.controls.venType.value == '2'">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="discount" placeholder="Discount Allowed" required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="discCtrl"
                                                    [placeholderLabel]="'Find Discount...'"
                                                    [noEntriesFoundLabel]="'no matching Discount found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let disc of discount_List | filterSelectInput:discCtrl.value"
                                                [value]="disc.value">
                                                {{disc.viewValue}}
                                            </mat-option>
                                        </mat-select>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.discount.touched && (vendorForm.controls.discount.errors)">
                                            <mat-error *ngIf="vendorForm.controls.discount.errors.required">
                                                {{errorMessages.DISC}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3" *ngIf="vendorForm.controls.venType.value == '1'">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="spDisc" placeholder="Special Discount">
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="spDiscCtrl"
                                                    [placeholderLabel]="'Find Special Discount...'"
                                                    [noEntriesFoundLabel]="'no Special Discount found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let stm of spDisc_List | filterSelectInput:spDiscCtrl.value"
                                                [value]="stm.value">
                                                {{stm.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="vendorAddress"
                                            placeholder="Vendor Address" required>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.vendorAddress.touched && (vendorForm.controls.vendorAddress.errors)">
                                            <mat-error *ngIf="vendorForm.controls.vendorAddress.errors.required">
                                                {{errorMessages.ADDRESS}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="place"
                                            placeholder="Place of Business" required>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.place.touched && (vendorForm.controls.place.errors)">
                                            <mat-error *ngIf="vendorForm.controls.place.errors.required">
                                                {{errorMessages.PLACE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="contNum"
                                            placeholder="Contact Number" required>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.contNum.touched && (vendorForm.controls.contNum.errors)">
                                            <mat-error *ngIf="vendorForm.controls.contNum.errors.required">
                                                {{errorMessages.PHONE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="email"
                                            placeholder="Email" required>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.email.touched && (vendorForm.controls.email.errors)">
                                            <mat-error *ngIf="vendorForm.controls.email.errors.required">
                                                {{errorMessages.EMAIL}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>



                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" formControlName="regNo"
                                            placeholder="Vendor Registration No." required>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.regNo.touched && (vendorForm.controls.regNo.errors)">
                                            <mat-error *ngIf="vendorForm.controls.regNo.errors.required">
                                                {{errorMessages.NUMBER}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput formControlName="fromDate" placeholder="Vendorship Start Date"
                                            [matDatepicker]="picker" required>
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker></mat-datepicker>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.fromDate.touched && (vendorForm.controls.fromDate.errors)">
                                            <mat-error *ngIf="vendorForm.controls.fromDate.errors.required">
                                                {{errorMessages.DATE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field>
                                        <input matInput formControlName="toDate" placeholder="Vendorship End Date"
                                            [matDatepicker]="picker1" required>
                                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                        <mat-datepicker #picker1></mat-datepicker>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.toDate.touched && (vendorForm.controls.toDate.errors)">
                                            <mat-error *ngIf="vendorForm.controls.toDate.errors.required">
                                                {{errorMessages.DATE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="status" placeholder="Vendor Status" required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="statusCtrl"
                                                    [placeholderLabel]="'Find Status...'"
                                                    [noEntriesFoundLabel]="'no Status found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let st of status_List | filterSelectInput:statusCtrl.value"
                                                [value]="st.value">
                                                {{st.viewValue}}
                                            </mat-option>
                                        </mat-select>

                                        <div class="error-wrapper"
                                            *ngIf="vendorForm.controls.status.touched && (vendorForm.controls.status.errors)">
                                            <mat-error *ngIf="vendorForm.controls.status.errors.required">
                                                {{errorMessages.STATUS}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                            </div>
                        </form>
                        </div>
                    </div>

                    
                    <div class="box box-primary" *ngIf="vendorForm.controls.venType.value == '1' 
                    && vendorForm.controls.spDisc.value == '1'">
                      <div class="box-header">Special Vendor Discount Details</div>
                      <div class="box-body">
                        <!-- Table Section -->
                        <div class="mat-elevation-z8 mt-2">
                            <table mat-table [dataSource]="dataSource" aria-describedby="vendorMasterList" class="mat-elevation-z8">

                            <!-- Sr. No.  -->
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef scope="row">Sr. No. </th>
                                <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{i + 1}} </td>
                            </ng-container>

                            <!-- Category -->
                            <ng-container matColumnDef="category">
                                <th mat-header-cell *matHeaderCellDef scope="row">Category</th>
                                <td mat-cell *matCellDef="let element" class="text-left"> {{element.category}} </td>
                            </ng-container>

                            <!-- Discount (%) -->
                            <ng-container matColumnDef="disc">
                                <th mat-header-cell *matHeaderCellDef scope="row">Discount (%)</th>
                                <td mat-cell *matCellDef="let element" class="text-left">                             
                                    <mat-form-field>
                                        <input matInput [ngModel]="element.disc">
                                    </mat-form-field>    
                                </td>
                            </ng-container>
                            <!-- Header Section Of table -->
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <!-- Data Fetch From .TS File to table -->
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
                        </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="form-action-button">
                        <button type="submit" mat-raised-button color="primary" (click)="directiveObject.saveConfirmationPopup()">
                            <i class="material-icons" aria-hidden="true" title="Save">
                                save
                            </i>
                            Save
                        </button>
                        <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                            <i class="material-icons" aria-hidden="true" title="Listing">
                                list
                            </i>
                            Listing
                        </button>
                        <button type="button" mat-raised-button (click)="directiveObject.closeConfirmationPopup()" class="btnClose">
                            <i class="material-icons" aria-hidden="true" title="Dashboard">
                                close
                            </i>
                            Close
                        </button>
                    </div>
                </mat-tab>
                <!-- Vendor Master Entry Section Ends-->

                <!-- Attachments Section Starts-->
                <mat-tab label="Attachments" class="full-width">
                    <app-common-attachment [attachemntValue]="attachmentType_list"></app-common-attachment>
                    <!-- Action Buttons -->
                    <div class="form-action-button">
                        <button type="submit" mat-raised-button color="primary">
                            <i class="material-icons" aria-hidden="true" title="Save">
                                save
                            </i>
                            Upload
                        </button>
                        <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                            <i class="material-icons" aria-hidden="true" title="Listing">
                                list
                            </i>
                            Listing
                        </button>
                        <button type="button" mat-raised-button (click)="directiveObject.closeConfirmationPopup()" class="btnClose">
                            <i class="material-icons" aria-hidden="true" title="Dashboard">
                                close
                            </i>
                            Close
                        </button>
                    </div>
                </mat-tab>

                <!-- Attachments Section Ends-->
            </mat-tab-group>
        </div>

    </div>
</div>