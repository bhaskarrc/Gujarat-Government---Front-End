<div class="container">
    <div class="form-wrapper">

        <div class="heading-section ng-star-inserted">
            <div>Authorization of Challan</div>
            <div class="font-heading">
                <b>Reference No:</b> 19-20/STM/ACTO/001</div>
            <div class="font-heading">
                <b>Reference Date:</b> {{ date | date: 'dd-MMM-yyyy HH:mm'}}</div>
        </div>

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Stamp Processing</a></li>
                <li class="breadcrumb-item active" aria-current="page">Authorization of Challan</li>
            </ol>
        </nav>

        <div class="panel-group">

            <div class="box box-primary">
                <div class="box-header">Authorization of Challan</div>
                <div class="box-body">
                    <!-- Entry Section -->
                    <div #parentGrids>
                        <form [formGroup]="authForm">
                            <div class="row">
                                <!-- Financial Year -->
                                <div class="col-sm-3">
                                    <mat-form-field class="full-width disabled">
                                        <input matInput type="text" formControlName="finYear"
                                            placeholder="Financial Year" required readonly>

                                        <div class="error-wrapper"
                                            *ngIf="authForm.controls.finYear.touched && (authForm.controls.finYear.errors)">
                                            <mat-error *ngIf="authForm.controls.finYear.errors.required">
                                                {{errorMessages.FIN_YEAR}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                                <!-- Treasury Office -->
                                <div class="col-sm-3">
                                    <mat-form-field class="full-width disabled">
                                        <mat-label>Treasury Office</mat-label>
                                        <input matInput formControlName="dept" [value]="deptVal" required readonly>

                                        <div class="error-wrapper"
                                            *ngIf="authForm.controls.dept.touched && (authForm.controls.dept.errors)">
                                            <mat-error *ngIf="authForm.controls.dept.errors.required">
                                                {{errorMessages.TRE}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>
                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="challanMode" #modeChallan
                                            placeholder="Mode of Payment" required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="challanModeCtrl"
                                                    [placeholderLabel]="'Find Mode of Challan...'"
                                                    [noEntriesFoundLabel]="'no Mode of Challan found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option
                                                *ngFor="let ven of challanMode_List | filterSelectInput:challanModeCtrl.value"
                                                [value]="ven.value">
                                                {{ven.viewValue}}
                                            </mat-option>
                                        </mat-select>
                                        <div class="error-wrapper"
                                            *ngIf="authForm.controls.challanMode.touched && (authForm.controls.challanMode.errors)">
                                            <mat-error *ngIf="authForm.controls.challanMode.errors.required">
                                                {{errorMessages.MODE_OF_PAYMENT}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>
                                <!-- Challan Number -->
                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="chNo" #challanNumber placeholder="Challan Number"
                                            required>
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="chNoCtrl"
                                                    [placeholderLabel]="'Find Challan Number...'"
                                                    [noEntriesFoundLabel]="'no Challan Number found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option *ngFor="let req of chNo_List | filterSelectInput:chNoCtrl.value"
                                                [value]="req.value">
                                                {{req.viewValue}}
                                            </mat-option>
                                        </mat-select>

                                        <div class="error-wrapper"
                                            *ngIf="authForm.controls.chNo.touched && (authForm.controls.chNo.errors)">
                                            <mat-error *ngIf="authForm.controls.chNo.errors.required">
                                                {{errorMessages.CHALLAN_NUM}}
                                            </mat-error>
                                        </div>
                                    </mat-form-field>
                                </div>

                            </div>
                        </form>

                        <!-- Action Buttons -->
                        <div class="form-action-button">
                            <button type="button" mat-raised-button color="primary">
                                <i class="material-icons" aria-hidden="true" title="Get Details">
                                    list
                                </i>
                                Get Details
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            <div class="mat-elevation-z8 table-responsive mt-2">
                <table mat-table [dataSource]="dataSource" aria-describedby="challanTableTo"
                    *ngIf="modeChallan.value=='1' && challanNumber.value">

                    <!-- Sr. No.  -->
                    <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef scope="row">Sr. No. </th>
                        <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{i + 1}} </td>
                    </ng-container>

                    <!-- Challan Number -->
                    <ng-container matColumnDef="chNo">
                        <th mat-header-cell *matHeaderCellDef scope="row">Challan Number</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.chNo}} </td>
                    </ng-container>

                    <!-- Date of Challan -->
                    <ng-container matColumnDef="dateCh">
                        <th mat-header-cell *matHeaderCellDef scope="row">Date of Challan</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.dateCh}} </td>
                    </ng-container>

                    <!-- Name of Vendor and Code -->
                    <ng-container matColumnDef="venName">
                        <th mat-header-cell *matHeaderCellDef scope="row">Name of Vendor and Code</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.venName}} </td>
                    </ng-container>

                    <!-- Challan Amount -->
                    <ng-container matColumnDef="chAmt">
                        <th mat-header-cell *matHeaderCellDef scope="row">Challan Amount</th>
                        <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.chAmt}} </td>
                    </ng-container>

                    <!-- Bank Scroll Ref. No. -->
                    <ng-container matColumnDef="refNo">
                        <th mat-header-cell *matHeaderCellDef scope="row">Bank Scroll Ref. No.</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.refNo}} </td>
                    </ng-container>

                    <!-- Bank Scroll Amount -->
                    <ng-container matColumnDef="srlAmt">
                        <th mat-header-cell *matHeaderCellDef scope="row">Bank Scroll Amount</th>
                        <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.srlAmt}} </td>
                    </ng-container>

                    <!-- Status of Challan -->
                    <ng-container matColumnDef="chStatus">
                        <th mat-header-cell *matHeaderCellDef scope="row">Status of Challan</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.chStatus}} </td>
                    </ng-container>

                    <!-- Payment Status -->
                    <ng-container matColumnDef="payStatus">
                        <th mat-header-cell *matHeaderCellDef scope="row">Payment Status</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.payStatus}} </td>
                    </ng-container>

                    <!-- Remarks -->
                    <ng-container matColumnDef="remark">
                        <th mat-header-cell *matHeaderCellDef scope="row">Remarks</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign">
                            <mat-form-field floatLabel="never">
                                <textarea matInput></textarea>
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <!-- Header Section Of table -->
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <!-- Data Fetch From .TS File to table -->
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>


                <!--when OVER THE COUNTER is selected as mode of challan-->



                <table mat-table [dataSource]="dataSource" aria-describedby="challanTableTo"
                    *ngIf="modeChallan.value=='2' && challanNumber.value">

                    <!-- Sr. No.  -->
                    <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef scope="row">Sr. No. </th>
                        <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{i + 1}} </td>
                    </ng-container>

                    <!-- Challan Number -->
                    <ng-container matColumnDef="chNo">
                        <th mat-header-cell *matHeaderCellDef scope="row">Challan Number</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.chNo}} </td>
                    </ng-container>

                    <!-- Date of Challan -->
                    <ng-container matColumnDef="dateCh">
                        <th mat-header-cell *matHeaderCellDef scope="row">Date of Challan</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.dateCh}} </td>
                    </ng-container>

                    <!-- Name of Vendor and Code -->
                    <ng-container matColumnDef="venName">
                        <th mat-header-cell *matHeaderCellDef scope="row">Name of Vendor and Code</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.venName}} </td>
                    </ng-container>

                    <!-- Challan Amount -->
                    <ng-container matColumnDef="chAmt">
                        <th mat-header-cell *matHeaderCellDef scope="row">Challan Amount</th>
                        <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.chAmt}} </td>
                    </ng-container>

                    <!-- Bank Scroll Ref. No. -->
                    <ng-container matColumnDef="refNo">
                        <th mat-header-cell *matHeaderCellDef scope="row">Bank Scroll Ref. No.</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign">
                            <mat-form-field floatLabel="never">
                                <input matInput [value]="element.refNo" [(ngModel)]="element.refNo"
                                    [ngModelOptions]="{standalone: true}" [disabled]='element.edit'>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <!-- Bank Scroll Amount -->
                    <ng-container matColumnDef="srlAmt">
                        <th mat-header-cell *matHeaderCellDef scope="row">Bank Scroll Amount</th>
                        <td mat-cell *matCellDef="let element" class="rightAlign">
                            <mat-form-field floatLabel="never">
                                <input matInput [value]="element.scrAmt" [(ngModel)]="element.scrAmt"
                                    [ngModelOptions]="{standalone: true}" [disabled]='element.edit'>
                            </mat-form-field>
                        </td>
                    </ng-container>

                    <!-- Status of Challan -->
                    <ng-container matColumnDef="chStatus">
                        <th mat-header-cell *matHeaderCellDef scope="row">Status of Challan</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.chStatus}} </td>
                    </ng-container>

                    <!-- Payment Status -->
                    <ng-container matColumnDef="payStatus">
                        <th mat-header-cell *matHeaderCellDef scope="row">Payment Status</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.payStatus}} </td>
                    </ng-container>

                    <!-- Remarks -->
                    <ng-container matColumnDef="remark">
                        <th mat-header-cell *matHeaderCellDef scope="row">Remarks</th>
                        <td mat-cell *matCellDef="let element" class="leftAlign">
                            <mat-form-field floatLabel="never">
                                <textarea matInput></textarea>
                            </mat-form-field>
                        </td>
                    </ng-container>
                    <!-- Header Section Of table -->
                    <tr mat-header-row *matHeaderRowDef="displayedColumnsOverTheCounter"></tr>
                    <!-- Data Fetch From .TS File to table -->
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsOverTheCounter;"></tr>
                </table>
            </div>

            <!-- Action Buttons -->
            <div class="form-action-button">
                <button type="submit" mat-raised-button color="primary">
                    <i class="material-icons" aria-hidden="true" title="Save">
                        save
                    </i>
                    Save as Draft
                </button>

                <button mat-raised-button type="submit" (click)="directiveObject.sumbit('fromAuthorizationOfChallanTo')"
                    class="green">
                    <i class="material-icons">
                        done
                    </i> Submit
                </button>

                <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                    <i class="material-icons" aria-hidden="true" title="Listing">
                        list
                    </i>
                    Listing
                </button>
                <button type="button" mat-raised-button (click)="directiveObject.closeConfirmationPopup()"
                    class="btnClose">
                    <i class="material-icons" aria-hidden="true" title="Dashboard">
                        close
                    </i>
                    Close
                </button>

            </div>
        </div>

    </div>
</div>