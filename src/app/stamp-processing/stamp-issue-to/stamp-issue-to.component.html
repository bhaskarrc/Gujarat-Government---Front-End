<div class="container">
  <div class="form-wrapper">

    <div class="heading-section ng-star-inserted">
      <div>Stamp Issue</div>
      <div class="font-heading">
        <b>Reference No:</b> 19-20/STM/SI/001</div>
      <div class="font-heading">
        <b>Reference Date:</b> {{ date | date: 'dd-MMM-yyyy HH:mm'}}</div>
    </div>

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Stamp Processing</a></li>
        <li class="breadcrumb-item active" aria-current="page">Stamp Issue</li>
      </ol>
    </nav>

    <div class="panel-group">

      <!-- Stamp Issue Entry Section Starts-->
      <div class="box box-primary">
        <div class="box-header">Stamp Issue</div>
        <div class="box-body">

          <div #parentGrids>
            <form [formGroup]="stampIssue">
              <div class="row">
                <div class="col-sm-3">
                  <mat-form-field class="full-width disabled">
                    <input matInput type="text" formControlName="finYear" placeholder="Financial Year" required
                      readonly>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.finYear.touched && (stampIssue.controls.finYear.errors)">
                    <mat-error *ngIf="stampIssue.controls.finYear.errors.required">
                      {{errorMessages.FIN_YEAR}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="stIssue" placeholder="Stamp Issue To"
                    (selectionChange)="updateColumns()" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="stIssueCtrl" [placeholderLabel]="'Find Stamp Issue To...'"
                          [noEntriesFoundLabel]="'no Stamp Issue To found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let req of stIssue_List | filterSelectInput:stIssueCtrl.value"
                        [value]="req.value">
                        {{req.viewValue}}
                      </mat-option>
                    </mat-select>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.stIssue.touched && (stampIssue.controls.stIssue.errors)">
                    <mat-error *ngIf="stampIssue.controls.stIssue.errors.required">
                      {{errorMessages.ISSUE_TO}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='1'">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="treOff" placeholder="Treasury Office" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="treOffCtrl" [placeholderLabel]="'Find Treasury Office...'"
                          [noEntriesFoundLabel]="'no Treasury Office found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let req of treOff_List | filterSelectInput:treOffCtrl.value"
                      matTooltip="{{req.viewValue}}" [value]="req.value">
                        {{req.viewValue}}
                      </mat-option>
                    </mat-select>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.treOff.touched && (stampIssue.controls.treOff.errors)">
                    <mat-error *ngIf="stampIssue.controls.treOff.errors.required">
                      {{errorMessages.TRE}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='2'">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="subTreOff" placeholder="Sub Treasury Office" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="subTreOffCtrl"
                          [placeholderLabel]="'Find Sub Treasury Office...'"
                          [noEntriesFoundLabel]="'no Sub Treasury Office found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let req of subTreOff_List | filterSelectInput:subTreOffCtrl.value"
                      matTooltip="{{req.viewValue}}" [value]="req.value">
                        {{req.viewValue}}
                      </mat-option>
                    </mat-select>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.subTreOff.touched && (stampIssue.controls.subTreOff.errors)">
                    <mat-error *ngIf="stampIssue.controls.subTreOff.errors.required">
                      {{errorMessages.SUB_TRE}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='3'">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="venParty" placeholder="Vendor / Party" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="venPartyCtrl"
                          [placeholderLabel]="'Find Vendor / Party...'"
                          [noEntriesFoundLabel]="'no Vendor / Party found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let req of venParty_List | filterSelectInput:venPartyCtrl.value"
                        [value]="req.viewValue">
                        {{req.viewValue}}
                      </mat-option>
                    </mat-select>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.venParty.touched && (stampIssue.controls.venParty.errors)">
                    <mat-error *ngIf="stampIssue.controls.venParty.errors.required">
                      {{errorMessages.NAME}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3"
                  *ngIf="stampIssue.controls.stIssue.value=='1' || stampIssue.controls.stIssue.value=='2'">
                  <mat-form-field class="full-width">
                    <mat-select formControlName="indentNumber" placeholder="Indent Number" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="indentNumberCtrl"
                          [placeholderLabel]="'Find Indent Number...'" [noEntriesFoundLabel]="'no Indent Number found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let stm of indentNumber_List | filterSelectInput:indentNumberCtrl.value"
                        [value]="stm.value">
                        {{stm.viewValue}}
                      </mat-option>
                    </mat-select>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.indentNumber.touched && (stampIssue.controls.indentNumber.errors)">
                    <mat-error *ngIf="stampIssue.controls.indentNumber.errors.required">
                      {{errorMessages.INDENT_NUM}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='3'">
                  <mat-form-field>
                    <mat-select formControlName="challanNumber" placeholder="Challan Number" required>
                      <mat-option>
                        <ngx-mat-select-search [formControl]="challanNumberCtrl"
                          [placeholderLabel]="'Find Challan Number...'"
                          [noEntriesFoundLabel]="'no Challan Number found'">
                        </ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngFor="let stm of challanNumber_List | filterSelectInput:challanNumberCtrl.value"
                        [value]="stm.value">
                        {{stm.viewValue}}
                      </mat-option>
                    </mat-select>

                  <div class="error-wrapper"
                    *ngIf="stampIssue.controls.challanNumber.touched && (stampIssue.controls.challanNumber.errors)">
                    <mat-error *ngIf="stampIssue.controls.challanNumber.errors.required">
                      {{errorMessages.CHALLAN_NUM}}
                    </mat-error>
                  </div>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='1'">
                  <mat-form-field class="full-width disabled">
                    <input matInput type="text" formControlName="dateOfIndentTre" [value]="dateOfIndentTreVal"
                      placeholder="Date of Indent Raised by Treasury Office" readonly>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='2'">
                  <mat-form-field class="full-width disabled">
                    <input matInput type="text" formControlName="dateOfIndentTre" [value]="dateOfIndentTreVal"
                      placeholder="Date of Indent Raised by Sub Treasury Office" readonly>
                  </mat-form-field>
                </div>

                <div class="col-sm-3" *ngIf="stampIssue.controls.stIssue.value=='3'">
                  <mat-form-field class="full-width disabled">
                    <input matInput type="text" formControlName="dateOfIndentTre" [value]="dateOfIndentTreVal"
                      placeholder="Date of Challan" readonly>
                  </mat-form-field>
                </div>

                <div class="col-sm-3"
                  *ngIf="stampIssue.controls.stIssue.value=='1' || stampIssue.controls.stIssue.value=='2'">
                  <mat-form-field class="full-width disabled">
                    <input matInput type="text" formControlName="indentType" [value]="indentTypeVal"
                      placeholder="Type of Indent" readonly>
                  </mat-form-field>
                </div>

              </div>
            </form>
            <!-- Action Buttons -->
            <div class="form-action-button">
              <button type="submit" mat-raised-button color="primary" (click)="whenAddClick()" title="Add">
                <i class="material-icons" aria-hidden="true">
                  add
                </i>
                Add
              </button>
            </div>

          </div>
        </div>
      </div>
      <!-- Stamp Issue Entry Section Ends-->

      <div class="col-md-3 ng-star-inserted" *ngIf="(onAdd==true) && (stampIssue.controls.stIssue.value=='3')">
        <mat-form-field class="full-width disabled">
          <input matInput type="text" [value]="stampIssue.controls.venParty.value" placeholder="Name of Vendor and Code"
            readonly>
        </mat-form-field>
      </div>


      <!-- Table Section -->
      <div *ngIf="onAdd && stampIssue.controls.stIssue.valid" class="customresponsive mat-elevation-z8 tableSelectFix">
        
                    <!-- Header Table -->
                    <table mat-table *ngIf="onAdd"
                        [dataSource]="dataSourceFinalHeading" aria-describedby="dataSourceHeading"
                        class="mat-elevation-z8 mt-2">

                        <!-- Sr. No. -->
                        <ng-container matColumnDef="position">
                            <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                        </ng-container>

                        <!-- Type of Stamp -->
                        <ng-container matColumnDef="typeOfStamp">
                            <th mat-header-cell *matHeaderCellDef scope="row">Type of <br> Stamp</th>
                        </ng-container>

                        <!-- Denomination Code -->
                        <ng-container matColumnDef="deno">
                            <th mat-header-cell *matHeaderCellDef scope="row">Denomination <br> Code</th>
                        </ng-container>

                        <!-- Discount (%) -->
                        <ng-container matColumnDef="disc">
                            <th mat-header-cell *matHeaderCellDef scope="row">Discount (%)</th>
                        </ng-container>

                        <!-- Denomination Value -->
                        <ng-container matColumnDef="unitVal">
                            <th mat-header-cell *matHeaderCellDef scope="row">Denomination <br> Value</th>
                        </ng-container>

                        <!-- No. of Stamps (Label / Stamp) -->
                        <ng-container matColumnDef="stampNo">
                            <th mat-header-cell *matHeaderCellDef scope="row">No. of Stamps (Label / Stamp)</th>
                        </ng-container>

                        <!-- Total Sheet -->
                        <ng-container matColumnDef="sheetNo">
                            <th mat-header-cell *matHeaderCellDef scope="row">Total Sheet</th>
                        </ng-container>

                        <!-- Label / Stamp In Each Sheet -->
                        <ng-container matColumnDef="stampSheet">
                            <th mat-header-cell *matHeaderCellDef scope="row">Label / Stamp In Each Sheet</th>
                        </ng-container>

                        <!-- From Series -->
                        <ng-container matColumnDef="fromSeries">
                          <th mat-header-cell *matHeaderCellDef scope="row">From Series</th>
                        </ng-container>
        
                        <!-- To Series -->
                        <ng-container matColumnDef="toSeries">
                          <th mat-header-cell *matHeaderCellDef scope="row">To Series</th>
                        </ng-container>

                        <!-- Total Amount -->
                        <ng-container matColumnDef="totAmt">
                            <th mat-header-cell *matHeaderCellDef scope="row">Total Amount</th>
                        </ng-container>

                        <!-- Discount (₹) -->
                        <ng-container matColumnDef="discRs">
                            <th mat-header-cell *matHeaderCellDef scope="row">Discount (₹)</th>
                        </ng-container>

                        <!-- Net Amount -->
                        <ng-container matColumnDef="netAmt">
                            <th mat-header-cell *matHeaderCellDef scope="row">Net Amount</th>
                        </ng-container>

                        <!-- Stock provided against previous indent -->
                        <ng-container matColumnDef="availQty">
                          <th mat-header-cell *matHeaderCellDef scope="row">Stock provided against previous indent</th>
                        </ng-container>
            
                        <!-- Quantity due against previous indent -->
                        <ng-container matColumnDef="authQty">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity due against previous indent</th>
                        </ng-container>
            
                        <!-- Requested Quantity by Treasury Office -->
                        <ng-container matColumnDef="requestedQuantity">
                          <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Treasury Office</th>
                        </ng-container>
            
                        <!-- Requested Quantity by Sub Treasury Office -->
                        <ng-container matColumnDef="requestedQuantitySub">
                          <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Sub Treasury Office</th>
                        </ng-container>

                        <!-- Quantity To Be Issued (Label / Stamp) To Treasury Office -->
                        <ng-container matColumnDef="stmpIssueTre">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Treasury Office</th>
                      </ng-container>

                      <!-- Quantity To Be Issued (Label / Stamp) To Sub Treasury Office -->
                      <ng-container matColumnDef="stmpIssueSub">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Sub Treasury Office</th>
                      </ng-container>

                      <!-- Stamp To Be Issued To Vendor / Party -->
                        <ng-container matColumnDef="stmpIssueVen">
                            <th mat-header-cell *matHeaderCellDef scope="row">Stamp To Be Issued To Vendor / Party</th>
                        </ng-container>

                        <!-- Quantity approved by scrutiny officer -->
                        <ng-container matColumnDef="qtyApprScr">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity approved by scrutiny officer</th>
                        </ng-container>
            
                        <!-- Amount -->
                        <ng-container matColumnDef="amt">
                          <th mat-header-cell *matHeaderCellDef scope="row">Amount</th>
                        </ng-container>

                        <!-- Quantity Approved -->
                        <ng-container matColumnDef="qtyAppred">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity Approved</th>
                        </ng-container>

                        <!-- Action -->
                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayFinal"></tr>
                    </table>
                    <table mat-table *ngIf="onAdd" multiTemplateDataRows
                        [dataSource]="dataSourceFinal1" aria-describedby="challanprepFin3" class="mat-elevation-z8">

                        <ng-container matColumnDef="position">
                            <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{element.position}} </td>
                            <td mat-footer-cell *matFooterCellDef>Total</td>
                        </ng-container>

                        <ng-container matColumnDef="typeOfStamp">
                            <td mat-cell *matCellDef="let item;let i = index;">{{item.typeOfStamp}}</td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="deno">
                            <th mat-header-cell *matHeaderCellDef scope="row">Denomination Code</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.deno}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="disc">
                            <th mat-header-cell *matHeaderCellDef scope="row">Discount (%)</th>
                            <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.disc}}%
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="unitVal">
                            <th mat-header-cell *matHeaderCellDef scope="row">Denomination Value</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.unitVal}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="stampNo">
                            <th mat-header-cell *matHeaderCellDef scope="row">No. of Stamps (Label / Stamp)</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                {{element.stampNo}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef>21</td>
                        </ng-container>

                        <ng-container matColumnDef="sheetNo">
                            <th mat-header-cell *matHeaderCellDef scope="row">No. of Sheet</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                {{element.sheetNo}}

                            </td>
                            <td mat-footer-cell *matFooterCellDef>4</td>
                        </ng-container>

                        <ng-container matColumnDef="stampSheet">
                            <th mat-header-cell *matHeaderCellDef scope="row">Label / Stamp In Each Sheet</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.stampSheet}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef>4</td>
                        </ng-container>

                        <!-- From Series -->
                        <ng-container matColumnDef="fromSeries">
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                            <span *ngIf="element.fromSeries=='-'">{{element.fromSeries}}</span>
                            <div *ngIf="element.fromSeries!=='-'">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.fromSeries" [(ngModel)]="element.fromSeries"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </div>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
        
                        <!-- To Series -->
                        <ng-container matColumnDef="toSeries">
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                            <span *ngIf="element.toSeries=='-'">{{element.toSeries}}</span>
                            <div *ngIf="element.toSeries!=='-'">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.toSeries" [(ngModel)]="element.toSeries"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </div>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="totAmt">
                            <th mat-header-cell *matHeaderCellDef scope="row">Total Amount</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.totAmt}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Discount -->
                        <ng-container matColumnDef="discRs">
                            <td mat-cell *matCellDef="let element;let i=index"> {{element.discRs}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="netAmt">
                            <th mat-header-cell *matHeaderCellDef scope="row">Net Amount</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.netAmt}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Stock provided against previous indent -->
                        <ng-container matColumnDef="availQty">
                          <th mat-header-cell *matHeaderCellDef scope="row">Stock provided against previous indent</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.availQty}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Quantity due against previous indent -->
                        <ng-container matColumnDef="authQty">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity due against previous indent</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.authQty}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Reuested Quantity by Treasury Office -->
                        <ng-container matColumnDef="requestedQuantity">
                          <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Treasury Office</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.requestedQuantity}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
                        <!-- Reuested Quantity by Sub Treasury Office -->
                        <ng-container matColumnDef="requestedQuantitySub">
                          <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Sub Treasury Office</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.requestedQuantitySub}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueTre">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Treasury Office</th>
                            <td mat-cell *matCellDef="let element;let i=index">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.stmpIssueTre" [(ngModel)]="element.stmpIssueTre"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueSub">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Sub Treasury Office</th>
                            <td mat-cell *matCellDef="let element;let i=index">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.stmpIssueSub" [(ngModel)]="element.stmpIssueSub"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueVen">
                            <th mat-header-cell *matHeaderCellDef scope="row">Stamp To Be Issued To Vendor / Party</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.stmpIssueVen}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Quantity approved by scrutiny officer -->
                        <ng-container matColumnDef="qtyApprScr">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity approved by scrutiny officer</th>
                          <td mat-cell *matCellDef="let element">
                            <div class="form-action-button">
                              <mat-form-field class="full-width" [ngStyle]="{'width': '65%'}">
                                <input matInput [(ngModel)]="element.qtyApprScr" numbersOnly>
                              </mat-form-field>
                              <i class="material-icons btn-history" title="View History" (click)="openHistory()">history</i>
                            </div>
                          </td>
                          <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Amount -->
                        <ng-container matColumnDef="amt">
                          <th mat-header-cell *matHeaderCellDef scope="row">Amount</th>
                          <td mat-cell *matCellDef="let element" class="rightAlign">
                            {{element.qtyApprScr * element.unitVal}}</td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <ng-container matColumnDef="qtyAppred">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity Approved</th>
                            <td mat-cell *matCellDef="let element;let i=index"> 
                              <div class="form-action-button">
                                <mat-form-field floatLabel="never" [ngStyle]="{'width': '70%'}">
                                  <input matInput [value]="element.qtyAppred" [(ngModel)]="element.qtyAppred"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                                <i class="material-icons floatRgt btn-history" title="View History"
                                (click)="directiveObject.openHistoryPrepChallanTotSheet(element)">history</i>
                              </div>
                            </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="text-left">
                                <div class="centerAlign">
                                  <a (click)="openAddDetails(element)"><i class="material-icons plus plus add"
                                      title="add">add</i></a>
                                </div>
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <!-- Expansion section -->
                        <ng-container matColumnDef="expandedDetail" expandedElement=null>
                          <tr>
                              <td mat-cell *matCellDef="let outerElement" [attr.colspan]="spanVal">
                                  <div class="element-detail"
                                      [@expandRow]="outerElement === expandedElement ? 'expanded' : 'collapsed'"
                                      [style.height]="0">
                                      <table mat-table [dataSource]="outerElement.innerDataSource"
                                      class="classForBackground wordBreakForPanel" aria-describedby="challanprepFin3">
                  
                                          <ng-container matColumnDef="position">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="typeOfStamp">
                                              <td mat-cell *matCellDef="let item;let i = index;">{{item.typeOfStamp}}</td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="deno">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Denomination Code</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.deno}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="disc">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Discount (%)</th>
                                              <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.disc}}%
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="unitVal">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Denomination Value</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.unitVal}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stampNo">
                                              <th mat-header-cell *matHeaderCellDef scope="row">No. of Stamps (Label / Stamp)</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                                  {{element.stampNo}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="sheetNo">
                                              <th mat-header-cell *matHeaderCellDef scope="row">No. of Sheet</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                                  {{element.sheetNo}}
                  
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stampSheet">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Label / Stamp In Each Sheet</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.stampSheet}}
                                              </td>
                                          </ng-container>
                  
                                          <!-- From Series -->
                                          <ng-container matColumnDef="fromSeries">
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                              {{element.fromSeries}}
                                            </td>
                                          </ng-container>
                          
                                          <!-- To Series -->
                                          <ng-container matColumnDef="toSeries">
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                              {{element.toSeries}}
                                            </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="totAmt">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Total Amount</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.totAmt}}
                                              </td>
                                          </ng-container>
                  
                                          <!-- Discount -->
                                          <ng-container matColumnDef="discRs">
                                              <td mat-cell *matCellDef="let element;let i=index"> {{element.discRs}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="netAmt">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Net Amount</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.netAmt}}
                                              </td>
                                          </ng-container>

                                          <!-- Stock provided against previous indent -->
                                          <ng-container matColumnDef="availQty">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Stock provided against previous indent</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.availQty}}
                                            </td>
                                          </ng-container>
                              
                                          <!-- Quantity due against previous indent -->
                                          <ng-container matColumnDef="authQty">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity due against previous indent</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.authQty}}
                                            </td>
                                          </ng-container>
                              
                                          <!-- Reuested Quantity by Treasury Office -->
                                          <ng-container matColumnDef="requestedQuantity">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Treasury Office</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.requestedQuantity}}
                                            </td>
                                          </ng-container>
                                          <!-- Reuested Quantity by Sub Treasury Office -->
                                          <ng-container matColumnDef="requestedQuantitySub">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Sub Treasury Office</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.requestedQuantitySub}}
                                            </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stmpIssueTre">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Treasury Office</th>
                                              <td mat-cell *matCellDef="let element;let i=index"> {{element.stmpIssueTre}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stmpIssueSub">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Sub Treasury Office</th>
                                              <td mat-cell *matCellDef="let element;let i=index"> {{element.stmpIssueSub}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stmpIssueVen">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Stamp To Be Issued To Vendor / Party</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.stmpIssueVen}}
                                              </td>
                                          </ng-container>

                                          <!-- Quantity approved by scrutiny officer -->
                                          <ng-container matColumnDef="qtyApprScr">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity approved by scrutiny officer</th>
                                            <td mat-cell *matCellDef="let element">{{element.qtyApprScr}}
                                            </td>
                                          </ng-container>
                              
                                          <!-- Amount -->
                                          <ng-container matColumnDef="amt">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Amount</th>
                                            <td mat-cell *matCellDef="let element" class="rightAlign">
                                              {{element.qtyApprScr * element.unitVal}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="qtyAppred">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Quantity Approved</th>
                                              <td mat-cell *matCellDef="let element;let i=index"> 
                                                {{element.qtyAppred}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="action">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="text-left">
                                                  <div class="centerAlign">
                                                    <a (click)="deleteRow(outerElement,i)"><i class="material-icons plus delete" aria-hidden="true"
                                                    title="delete">delete</i></a>
                                                  </div>
                                              </td>
                                          </ng-container>
                  
                                          <tr mat-row *matRowDef="let row; columns: displayFinal;"></tr>
                                      </table>
                                    </div>
                              </td>
                          </tr>
                          </ng-container>

                        <tr mat-row  [ngClass]="row.rowStyleClass" *matRowDef="let row; columns: displayFinal;"
                        (click)="expandedElement = (expandedElement === row) ? null : row"></tr>
                        <!-- Expan Section row -->
                        <tr class="example-detail-row" mat-row *matRowDef="let row; columns: ['expandedDetail']"></tr>
                        <tr mat-footer-row *matFooterRowDef="displayFinal"></tr>
                    </table>
                    <table mat-table *ngIf="onAdd" multiTemplateDataRows
                        [dataSource]="dataSourceFinal2" aria-describedby="challanprepFin4" class="mat-elevation-z8">

                        <ng-container matColumnDef="position">
                            <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{element.position}} </td>
                            <td mat-footer-cell *matFooterCellDef>Total</td>
                        </ng-container>

                        <ng-container matColumnDef="typeOfStamp">
                            <td mat-cell *matCellDef="let item;let i = index;">{{item.typeOfStamp}}</td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="deno">
                            <th mat-header-cell *matHeaderCellDef scope="row">Denomination Code</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.deno}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="disc">
                            <th mat-header-cell *matHeaderCellDef scope="row">Discount (%)</th>
                            <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.disc}}%
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="unitVal">
                            <th mat-header-cell *matHeaderCellDef scope="row">Denomination Value</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.unitVal}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="stampNo">
                            <th mat-header-cell *matHeaderCellDef scope="row">No. of Stamps (Label / Stamp)</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                {{element.stampNo}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef>21</td>
                        </ng-container>

                        <ng-container matColumnDef="sheetNo">
                            <th mat-header-cell *matHeaderCellDef scope="row">No. of Sheet</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                {{element.sheetNo}}

                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="stampSheet">
                            <th mat-header-cell *matHeaderCellDef scope="row">Label / Stamp In Each Sheet</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.stampSheet}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef>4</td>
                        </ng-container>

                        <!-- From Series -->
                        <ng-container matColumnDef="fromSeries">
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                            <span *ngIf="element.fromSeries=='-'">{{element.fromSeries}}</span>
                            <div *ngIf="element.fromSeries!=='-'">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.fromSeries" [(ngModel)]="element.fromSeries"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </div>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
        
                        <!-- To Series -->
                        <ng-container matColumnDef="toSeries">
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                            <span *ngIf="element.toSeries=='-'">{{element.toSeries}}</span>
                            <div *ngIf="element.toSeries!=='-'">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.toSeries" [(ngModel)]="element.toSeries"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </div>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="totAmt">
                            <th mat-header-cell *matHeaderCellDef scope="row">Total Amount</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.totAmt}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Discount -->
                        <ng-container matColumnDef="discRs">
                            <td mat-cell *matCellDef="let element;let i=index"> {{element.discRs}} </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="netAmt">
                            <th mat-header-cell *matHeaderCellDef scope="row">Net Amount</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.netAmt}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Stock provided against previous indent -->
                        <ng-container matColumnDef="availQty">
                          <th mat-header-cell *matHeaderCellDef scope="row">Stock provided against previous indent</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.availQty}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Quantity due against previous indent -->
                        <ng-container matColumnDef="authQty">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity due against previous indent</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.authQty}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Reuested Quantity by Treasury Office -->
                        <ng-container matColumnDef="requestedQuantity">
                          <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Treasury Office</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.requestedQuantity}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
                        <!-- Reuested Quantity by Sub Treasury Office -->
                        <ng-container matColumnDef="requestedQuantitySub">
                          <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Sub Treasury Office</th>
                          <td mat-cell *matCellDef="let element" class="leftAlign">
                              {{element.requestedQuantitySub}}
                          </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueTre">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Treasury Office</th>
                            <td mat-cell *matCellDef="let element;let i=index">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.stmpIssueTre" [(ngModel)]="element.stmpIssueTre"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueSub">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Sub Treasury Office</th>
                            <td mat-cell *matCellDef="let element;let i=index">
                                <mat-form-field floatLabel="never">
                                  <input matInput [value]="element.stmpIssueSub" [(ngModel)]="element.stmpIssueSub"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                            </td>
                            <td mat-footer-cell *matFooterCellDef >300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueVen">
                            <th mat-header-cell *matHeaderCellDef scope="row">Stamp To Be Issued To Vendor / Party</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.stmpIssueVen}}
                            </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Quantity approved by scrutiny officer -->
                        <ng-container matColumnDef="qtyApprScr">
                          <th mat-header-cell *matHeaderCellDef scope="row">Quantity approved by scrutiny officer</th>
                          <td mat-cell *matCellDef="let element">
                            <div class="form-action-button">
                              <mat-form-field class="full-width" [ngStyle]="{'width': '65%'}">
                                <input matInput [(ngModel)]="element.qtyApprScr" numbersOnly>
                              </mat-form-field>
                              <i class="material-icons btn-history" title="View History" (click)="openHistory()">history</i>
                            </div>
                          </td>
                          <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Amount -->
                        <ng-container matColumnDef="amt">
                          <th mat-header-cell *matHeaderCellDef scope="row">Amount</th>
                          <td mat-cell *matCellDef="let element" class="rightAlign">
                            {{element.qtyApprScr * element.unitVal}} </td>
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <ng-container matColumnDef="qtyAppred">
                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity Approved</th>
                            <td mat-cell *matCellDef="let element;let i=index">
                              <div class="form-action-button">
                                <mat-form-field floatLabel="never" [ngStyle]="{'width': '70%'}">
                                  <input matInput [value]="element.qtyAppred" [(ngModel)]="element.qtyAppred"
                                    [ngModelOptions]="{standalone: true}">
                                </mat-form-field>
                                <i class="material-icons floatRgt btn-history" title="View History"
                                (click)="directiveObject.openHistoryPrepChallanTotSheet(element)">history</i>
                              </div>
                            </td>
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="action">
                            <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="text-left">
                                <div class="centerAlign">
                                  <a (click)="openAddDetails(element)"><i class="material-icons plus plus add"
                                      title="add">add</i></a>
                                </div>
                            </td>
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <!-- Expansion section -->
                        <ng-container matColumnDef="expandedDetail" expandedElement=null>
                          <tr>
                              <td mat-cell *matCellDef="let outerElement2" [attr.colspan]="spanVal">
                                  <div class="element-detail"
                                      [@expandRow]="outerElement2 === expandedElement ? 'expanded' : 'collapsed'"
                                      [style.height]="0">
                                      <table mat-table [dataSource]="outerElement2.innerDataSource"
                                      class="classForBackground wordBreakForPanel" aria-describedby="challanprepFin3">
                  
                                          <ng-container matColumnDef="position">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{i + 1}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="typeOfStamp">
                                              <td mat-cell *matCellDef="let item;let i = index;">{{item.typeOfStamp}}</td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="deno">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Denomination Code</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.deno}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="disc">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Discount (%)</th>
                                              <td mat-cell *matCellDef="let element" class="leftAlign"> {{element.disc}}%
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="unitVal">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Denomination Value</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.unitVal}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stampNo">
                                              <th mat-header-cell *matHeaderCellDef scope="row">No. of Stamps (Label / Stamp)</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                                  {{element.stampNo}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="sheetNo">
                                              <th mat-header-cell *matHeaderCellDef scope="row">No. of Sheet</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign">
                                                  {{element.sheetNo}}
                  
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stampSheet">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Label / Stamp In Each Sheet</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="leftAlign"> {{element.stampSheet}}
                                              </td>
                                          </ng-container>
                  
                                          <!-- From Series -->
                                          <ng-container matColumnDef="fromSeries">
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                              {{element.fromSeries}}
                                            </td>
                                          </ng-container>
                          
                                          <!-- To Series -->
                                          <ng-container matColumnDef="toSeries">
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                              {{element.toSeries}}
                                            </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="totAmt">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Total Amount</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.totAmt}}
                                              </td>
                                          </ng-container>
                  
                                          <!-- Discount -->
                                          <ng-container matColumnDef="discRs">
                                              <td mat-cell *matCellDef="let element;let i=index"> {{element.discRs}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="netAmt">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Net Amount</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.netAmt}}
                                              </td>
                                          </ng-container>

                                          <!-- Stock provided against previous indent -->
                                          <ng-container matColumnDef="availQty">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Stock provided against previous indent</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.availQty}}
                                            </td>
                                          </ng-container>
                              
                                          <!-- Quantity due against previous indent -->
                                          <ng-container matColumnDef="authQty">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity due against previous indent</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.authQty}}
                                            </td>
                                          </ng-container>
                              
                                          <!-- Reuested Quantity by Treasury Office -->
                                          <ng-container matColumnDef="requestedQuantity">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Treasury Office</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.requestedQuantity}}
                                            </td>
                                          </ng-container>
                                          <!-- Reuested Quantity by Sub Treasury Office -->
                                          <ng-container matColumnDef="requestedQuantitySub">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Requested Quantity by Sub Treasury Office</th>
                                            <td mat-cell *matCellDef="let element" class="leftAlign">
                                                {{element.requestedQuantitySub}}
                                            </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stmpIssueTre">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Treasury Office</th>
                                              <td mat-cell *matCellDef="let element;let i=index"> {{element.stmpIssueTre}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stmpIssueSub">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Quantity To Be Issued (Label / Stamp) To Sub Treasury Office</th>
                                              <td mat-cell *matCellDef="let element;let i=index"> {{element.stmpIssueSub}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="stmpIssueVen">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Stamp To Be Issued To Vendor / Party</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="rightAlign"> {{element.stmpIssueVen}}
                                              </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="qtyAppred">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Quantity Approved</th>
                                              <td mat-cell *matCellDef="let element;let i=index"> 
                                                {{element.qtyAppred}}
                                              </td>
                                          </ng-container>

                                          <!-- Quantity approved by scrutiny officer -->
                                          <ng-container matColumnDef="qtyApprScr">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Quantity approved by scrutiny officer</th>
                                            <td mat-cell *matCellDef="let element">{{element.qtyApprScr}}
                                            </td>
                                          </ng-container>
                              
                                          <!-- Amount -->
                                          <ng-container matColumnDef="amt">
                                            <th mat-header-cell *matHeaderCellDef scope="row">Amount</th>
                                            <td mat-cell *matCellDef="let element" class="rightAlign">
                                              {{element.qtyApprScr * element.unitVal}} </td>
                                          </ng-container>
                  
                                          <ng-container matColumnDef="action">
                                              <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                                              <td mat-cell *matCellDef="let element;let i=index" class="text-left">
                                                  <div class="centerAlign">
                                                    <a (click)="deleteRow(outerElement2,i)"><i class="material-icons plus delete" aria-hidden="true"
                                                    title="delete">delete</i></a>
                                                  </div>
                                              </td>
                                          </ng-container>
                  
                                          <tr mat-row *matRowDef="let row; columns: displayFinal;"></tr>
                                      </table>
                                    </div>
                              </td>
                          </tr>
                          </ng-container>

                        <tr mat-row [ngClass]="row.rowStyleClass" *matRowDef="let row; columns: displayFinal;"
                        (click)="expandedElement = (expandedElement === row) ? null : row"></tr>
                        <!-- Expan Section row -->
                        <tr class="example-detail-row" mat-row *matRowDef="let row; columns: ['expandedDetail']"></tr>
                        <tr mat-footer-row *matFooterRowDef="displayFinal"></tr>
                    </table>

                    <!-- Final Footer Table -->
                    <table mat-table *ngIf="onAdd"
                        [dataSource]="dataSourceFinalHeading" aria-describedby="dataSourceFooter"
                        class="mat-elevation-z8">

                        <ng-container matColumnDef="position">
                            <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                            <td mat-cell *matCellDef="let element;let i=index" class="centerAlign"> {{i + 1}} </td>
                            <td mat-footer-cell *matFooterCellDef>Gross Total</td>
                        </ng-container>

                        <ng-container matColumnDef="typeOfStamp">
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="deno">
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="disc">
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="unitVal">
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="stampNo">
                            <td mat-footer-cell *matFooterCellDef>21</td>
                        </ng-container>

                        <ng-container matColumnDef="sheetNo">
                            <td mat-footer-cell *matFooterCellDef>4</td>
                        </ng-container>

                        <ng-container matColumnDef="stampSheet">
                            <td mat-footer-cell *matFooterCellDef>4</td>
                        </ng-container>

                        <!-- From Series -->
                        <ng-container matColumnDef="fromSeries">
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
        
                        <!-- To Series -->
                        <ng-container matColumnDef="toSeries">
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="totAmt">
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <ng-container matColumnDef="discRs">
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>

                        <ng-container matColumnDef="netAmt">
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Stock provided against previous indent -->
                        <ng-container matColumnDef="availQty">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Quantity due against previous indent -->
                        <ng-container matColumnDef="authQty">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Reuested Quantity by Treasury Office -->
                        <ng-container matColumnDef="requestedQuantity">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
                        <!-- Reuested Quantity by Sub Treasury Office -->
                        <ng-container matColumnDef="requestedQuantitySub">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueTre">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueSub">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="stmpIssueVen">
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <!-- Quantity approved by scrutiny officer -->
                        <ng-container matColumnDef="qtyApprScr">
                          <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>
            
                        <!-- Amount -->
                        <ng-container matColumnDef="amt">
                            <td mat-footer-cell *matFooterCellDef class="rightAlign">300</td>
                        </ng-container>

                        <ng-container matColumnDef="qtyAppred">
                            <td mat-footer-cell *matFooterCellDef>300</td>
                        </ng-container>

                        <ng-container matColumnDef="action">
                            <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
                        <tr mat-footer-row *matFooterRowDef="displayFinal"></tr>
                    </table>

      </div>
      <!-- Action Buttons -->
      <div class="form-action-button">
        <button type="submit" mat-raised-button color="primary">
          <i class="material-icons" aria-hidden="true" title="Save">
            save
          </i>
          Save as Draft
        </button>
        <button mat-raised-button type="submit" (click)="directiveObject.sumbit(stampIssue.controls.stIssue.value+'stampIssue')" class="green">
          <i class="material-icons" aria-hidden="true">
            done
          </i> Submit
        </button>

        <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
          <i class="material-icons" aria-hidden="true" title="Listing">
            list
          </i>
          Listing
        </button>

        <button type="button" mat-raised-button (click)="directiveObject.closeConfirmationPopup()" class="btnClose">
          <i class="material-icons" aria-hidden="true" title="Dashboard">
            close
          </i>
          Close
        </button>
      </div>
    </div>

  </div>
</div>