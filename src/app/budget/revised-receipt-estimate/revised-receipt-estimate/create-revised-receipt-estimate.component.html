<div class="container">
    <div class="form-wrapper">
        <div class="heading-section ng-star-inserted row mx-auto">
            <div class="col-sm-12 col-md-12 col-lg-4">Revised Receipt Estimates</div>
            <div class="font-heading  4"><strong>Reference Number:</strong> 19-20/BUD/RRE/001</div>
            <div class="font-heading col-sm-6 col-md-6 col-lg-4 text-right"><strong>Reference Date:</strong> {{ date | date: 'dd-MMM-yyyy HH:mm'}}</div>
        </div>

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Budget</a></li>
                <li class="breadcrumb-item active" aria-current="page">Revised Receipt Estimates</li>
            </ol>
        </nav>
        <div>
            <div #parentGrids>
                <mat-tab-group mat-stretch-tabs class="standing-est-tabing" [selectedIndex]="selectedIndex">
                    <!-- <mat-tab>
                        <ng-template mat-tab-label>
                            <mat-icon class="example-tab-icon" *ngIf="doneHeader">check</mat-icon>
                            Header
                        </ng-template>

                        <div class=" form-datatable-list">
                            <form class="col-sm-12" [formGroup]="createRevisedReceiptEstimateForm" (ngSubmit)="saveEstimate()">
                                <div class="row">
                                    <div class="col-sm-6 col-md-3">
                                        <mat-form-field class="full-width">
                                            <mat-select formControlName="finYear" placeholder="Financial Year" >
                                                <mat-option class="text-dark">
                                                    <ngx-mat-select-search [formControl]="finYearCtrl" [placeholderLabel]="'Find Financial Year...'" [noEntriesFoundLabel]="'no matching Financial Year found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>

                                                <mat-option *ngFor="let FY of filteredFinYear | async" [value]="FY.value">
                                                    {{FY.viewValue}}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="createRevisedReceiptEstimateForm.controls.finYear.touched && createRevisedReceiptEstimateForm.controls.finYear.errors">
                                                <mat-error *ngIf="createRevisedReceiptEstimateForm.controls.finYear.errors.required">
                                                    {{errorMessages.FIN_YEAR}}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-sm-6 col-md-3">
                                        <mat-form-field class="full-width">
                                            <mat-select formControlName="departmentCode" placeholder="Department" #singleSelect1 required>
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="departmentCodeCtrl" [placeholderLabel]="'Find Department...'" [noEntriesFoundLabel]="'no matching Department found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>

                                                <mat-option *ngFor="let department of filteredDepartmentCode | async" [value]="department.value">
                                                    {{department.viewValue}}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="createRevisedReceiptEstimateForm.controls.departmentCode.touched && createRevisedReceiptEstimateForm.controls.departmentCode.errors">
                                                <mat-error *ngIf="createRevisedReceiptEstimateForm.controls.departmentCode.errors.required">
                                                    {{errorMessages.DEPARTMENT}}</mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-sm-6 col-md-3">
                                        <mat-form-field class="full-width">
                                            <mat-select formControlName="branchCode" placeholder="Name of the Branch" #singleSelect1 required>
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="branchCodeCtrl" [placeholderLabel]="'Find Branch Name...'" [noEntriesFoundLabel]="'no matching Branch Name found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="let branch of filteredBranchCode | async" [value]="branch.value">
                                                    {{branch.viewValue}}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="createRevisedReceiptEstimateForm.controls.branchCode.touched && createRevisedReceiptEstimateForm.controls.branchCode.errors">
                                                <mat-error *ngIf="createRevisedReceiptEstimateForm.controls.branchCode.errors.required">
                                                    {{errorMessages.BRANCH}}
                                                </mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-sm-6 col-md-3">
                                        <mat-form-field class="full-width">
                                            <mat-select formControlName="estimationFrom"  placeholder="Estimation From" >
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="estimationFromCtrl" [placeholderLabel]="'Find Estimation From...'" [noEntriesFoundLabel]="'no matching Estimation From found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option *ngFor="let estimation of filteredEstimationFrom | async" [value]="estimation.value">
                                                    {{estimation.viewValue}}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="createRevisedReceiptEstimateForm.controls.estimationFrom.touched && createRevisedReceiptEstimateForm.controls.estimationFrom.errors">
                                                <mat-error *ngIf="createRevisedReceiptEstimateForm.controls.estimationFrom.errors.required">
                                                    {{errorMessages.ESTIMATION_FORM}}</mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>


                                    <div class="col-sm-6 col-md-3">
                                        <mat-form-field class="full-width">
                                            <mat-select formControlName="majorHeadCode" placeholder="Major Head" #singleSelect1 required>
                                                <mat-option>
                                                    <ngx-mat-select-search [formControl]="majorHeadCodeCtrl" [placeholderLabel]="'Find Major Head...'" [noEntriesFoundLabel]="'no matching Major Head found'">
                                                    </ngx-mat-select-search>
                                                </mat-option>
                                                <mat-option matTooltip="{{majorhead.viewValue}}" *ngFor="let majorhead of filteredMajorHeadCode | async" [value]="majorhead.value">
                                                    {{majorhead.viewValue}}
                                                </mat-option>
                                            </mat-select>
                                            <div class="error-wrapper" *ngIf="createRevisedReceiptEstimateForm.controls.majorHeadCode.touched && createRevisedReceiptEstimateForm.controls.majorHeadCode.errors">
                                                <mat-error *ngIf="createRevisedReceiptEstimateForm.controls.majorHeadCode.errors.required">
                                                    {{errorMessages.MAJOR_HEAD}}</mat-error>
                                            </div>
                                        </mat-form-field>
                                    </div>

                                </div>
                            </form>
                        </div>
                        <div class="form-action-button next-button" *ngIf="!doneHeader">
                            <button type="submit" mat-raised-button color="primary" (click)="saveConfirmationPopup()">
                                Save & Proceed
                                <i class="material-icons" aria-hidden="true" title="Next">
                                    chevron_right
                                </i>
                            </button>
                        </div>

                    </mat-tab> -->
                    <!-- <mat-tab label="Detail" [disabled]="tabDisable"> -->
                    <mat-tab label="Detail">
                        <div class="rsClass"> (₹ in Lakhs) </div>
                        <!--*ngIf="codes && codes.length > 0"-->
                        <div class="mat-elevation-z8 customresponsive">
                            <table mat-table #table aria-describedby="revisedReceiptEstTable" [dataSource]="dataSource" class="responsive-table">
                                <!--*ngIf="codes && codes.length > 0"-->

                                <!-- Position Column -->
                                <ng-container matColumnDef="subMajorHead">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Object Head Sub Major Head</th>
                                    <td mat-cell *matCellDef="let element;let i= index;">
                                        <!-- <span *ngIf="!expendCharges">
                                        <a href="javascript:void(0);"
                                            (click)="showCharge($event, i, element);">{{element.objecthead}}</a>
                                    </span> -->
                                        <span class="rightAlign">
                                        {{element.subMajorHead}}
                                    </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="minorHead">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Budget estimates for current year</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="rightAlign">
                                        {{element.minorHead}}
                                    </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="subHead">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Budget estimates for current year</th>
                                    <td mat-cell *matCellDef="let element">
                                        <span class="rightAlign">
                                        {{element.subHead}}
                                    </span>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="detailHead">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Detail Head</th>
                                    <td mat-cell *matCellDef="let element">
                                        <div class="rightAlign">
                                            {{element.detailHead}}
                                        </div>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="objectHead">
                                  <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}" class="tdpadding">
                                      <span> Object Head </span>
                                    </th>
                                  <td mat-cell *matCellDef="let item">
                                    <!-- {{item.objectHead}} -->
                                    <mat-form-field floatLabel="never">
                                      <input matInput>
                                    </mat-form-field>
                                  </td>
                                  <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>

                                <ng-container matColumnDef="receipt">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.receipt" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.receipt" (input)="getBillNo(element.receipt)" (blur)="decimalPoint(element,'receipt')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="disbursement">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Disbursement
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.disbursement" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.disbursement" (blur)="decimalPoint(element,'disbursement')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="actualReceiptForLastYear">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Actual Receipt For Last Year </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput (keypress)="decimalKeyPress($event)" [value]="element.actualReceiptForLastYear" [(ngModel)]="element.actualReceiptForLastYear" (blur)="decimalPoint(element,'actualReceiptForLastYear')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="receipt1">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.receipt1" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.receipt1" (input)="getBillNo(element.receipt1)" (blur)="decimalPoint(element,'receipt1')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="disbursement1">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Disbursement
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.disbursement1" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.disbursement1" (blur)="decimalPoint(element,'disbursement1')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="receipt2">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt (1a)</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.receipt2" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.receipt2" (input)="getBillNo(element.receipt2)" (blur)="decimalPoint(element,'receipt2')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="disbursement2">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Disbursement (1b)
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.disbursement2" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.disbursement2" (blur)="decimalPoint(element,'disbursement2')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="receipt3">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt
                                         (2a)
                                         
                                        </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.receipt3" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.receipt3" (input)="getBillNo(element.receipt3)" (blur)="decimalPoint(element,'receipt3')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="disbursement3">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Disbursement 
                                        (2b)
                                       
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.disbursement3" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.disbursement3" (blur)="decimalPoint(element,'disbursement3')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="receipt4">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt ((1a) + (2a))</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.receipt4" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.receipt4" (input)="getBillNo(element.receipt4)" (blur)="decimalPoint(element,'receipt4')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="disbursement4">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Disbursement ((1b) + (2b))
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.disbursement4" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.disbursement4" (blur)="decimalPoint(element,'disbursement4')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>


                                <!-- <ng-container matColumnDef="actualDisburSementForLastYear">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Actual Receipt For Last Year </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput (keypress)="decimalKeyPress($event)" [value]="element.actualDisburSementForLastYear" [(ngModel)]="element.actualDisburSementForLastYear" (blur)="decimalPoint(element,'actualDisburSementForLastYear')">
                                        </mat-form-field>
                                    </td>
                                </ng-container> -->
                                <!-- <ng-container matColumnDef="actualReceiptFor8MonthsOfCurrYr1A">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}"> Actual Receipt for 8 months of Curr_Yr (1a) </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput (keypress)="decimalKeyPress($event)" [value]="element.actualReceiptFor8MonthsOfCurrYr1A" [(ngModel)]="element.actualReceiptFor8MonthsOfCurrYr1A" (blur)="decimalPoint(element,'actualReceiptFor8MonthsOfCurrYr1A')">
                                        </mat-form-field>
                                    </td>
                                </ng-container> -->
                                <!-- <ng-container matColumnDef="actualDisbursementFor8MonthsOfCurrYr1B">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Actual Disbursement for 8 months of Curr_Yr (1b) </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput (keypress)="decimalKeyPress($event)" [value]="element.actualDisbursementFor8MonthsOfCurrYr1B" [(ngModel)]="element.actualDisbursementFor8MonthsOfCurrYr1B" (blur)="decimalPoint(element,'actualDisbursementFor8MonthsOfCurrYr1B')">
                                        </mat-form-field>
                                    </td>
                                </ng-container> -->
                                <!-- <ng-container matColumnDef="actReciForLast4MonthCurR2A">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}"> Actual Receipt for last four month of Cur_Yr Receipt (2a)</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput (keypress)="decimalKeyPress($event)" [value]="element.actReciForLast4MonthCurR2A" [(ngModel)]="element.actReciForLast4MonthCurR2A" (blur)="decimalPoint(element,'actReciForLast4MonthCurR2A')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="actDisbForLast4MonthCurR2B">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}"> Actual Disbursement for last four month of Cur_Yr (2b) </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput (keypress)="decimalKeyPress($event)" [value]="element.actDisbForLast4MonthCurR2B" [(ngModel)]="element.actDisbForLast4MonthCurR2B" (blur)="decimalPoint(element,'actDisbForLast4MonthCurR2B')">
                                        </mat-form-field>
                                    </td>
                                </ng-container> -->
                                <ng-container matColumnDef="receipt1M2">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt
                                        <!-- <BR>(1a) + (2a) -->
                                        </th>
                                    <td mat-cell *matCellDef="let element" class="coldisable rightAlign">
                                        <!-- {{ element.last8month + element.first4month }} -->
                                        {{ covertToNumber(element) | number : '1.2-2'}}
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="disbursement1M2">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Disbursement
                                         <!-- (1b) + (2b) -->
                                         </th>
                                    <td mat-cell *matCellDef="let element" class="coldisable rightAlign">
                                        <!-- {{ element.last8month + element.first4month }} -->
                                        {{ covertToNumber2(element) | number : '1.2-2'}}
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="Provision4nYReceipt">
                                    <th mat-header-cell *matHeaderCellDef scope="row">Receipt</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.Provision4nYReceipt" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.Provision4nYReceipt" (input)="getBillNo(element.Provision4nYReceipt)" (blur)="decimalPoint(element,'Provision4nYReceipt')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="Provision4nYdisbursement">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Disbursement
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.Provision4nYdisbursement" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.Provision4nYdisbursement" (blur)="decimalPoint(element,'Provision4nYdisbursement')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="PropoAmountReceipt">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Receipt</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.PropoAmountReceipt" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.PropoAmountReceipt" (input)="getBillNo(element.PropoAmountReceipt)" (blur)="decimalPoint(element,'PropoAmountReceipt')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="PropoAmountDisbu">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Disbursement
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.PropoAmountDisbu" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.PropoAmountDisbu" (blur)="decimalPoint(element,'PropoAmountDisbu')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="fDAcctOctNovCurrYearRec">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Receipt</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.fDAcctOctNovCurrYearRec" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.fDAcctOctNovCurrYearRec" (input)="getBillNo(element.fDAcctOctNovCurrYearRec)" (blur)="decimalPoint(element,'fDAcctOctNovCurrYearRec')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="fDAcctOctNovCurrYearDis">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Disbursement
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.fDAcctOctNovCurrYearDis" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.fDAcctOctNovCurrYearDis" (blur)="decimalPoint(element,'fDAcctOctNovCurrYearDis')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="FDLatestEt4castCurrYearRec">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Receipt</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.FDLatestEt4castCurrYearRec" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.FDLatestEt4castCurrYearRec" (input)="getBillNo(element.FDLatestEt4castCurrYearRec)" (blur)="decimalPoint(element,'FDLatestEt4castCurrYearRec')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="FDLatestEt4castCurrYearDis">
                                    <th mat-header-cell *matHeaderCellDef scope="row"> Disbursement
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.FDLatestEt4castCurrYearDis" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.FDLatestEt4castCurrYearDis" (blur)="decimalPoint(element,'FDLatestEt4castCurrYearDis')">
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <!-- <ng-container matColumnDef="proposedAmount">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}"> Proposed Amount
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                            <input matInput [value]="element.proposedAmount" (keypress)="decimalKeyPress($event)" [(ngModel)]="element.proposedAmount" (blur)="decimalPoint(element,'proposedAmount')">
                                        </mat-form-field>
                                    </td>
                                </ng-container> -->
                                <ng-container matColumnDef="remarks">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">Remarks</th>
                                    <td mat-cell *matCellDef="let element">
                                        <mat-form-field>
                                            <!-- <input matInput [value]="element.remarks" [(ngModel)]="element.remarks"> -->
                                            <!-- <textarea matInput [value]="element.remarks" [(ngModel)]="element.remarks" matTextareaAutosize matAutosizeMinRows=1 matAutosizeMaxRows=5></textarea> -->
                                            <textarea matInput [value]="element.remarks" [(ngModel)]="element.remarks"></textarea>
                                        </mat-form-field>
                                    </td>
                                </ng-container>
                                <ng-container matColumnDef="DeductRefundMap">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}"> Deduct Refund Mapping (Not to be edited)
                                    </th>
                                    <td mat-cell *matCellDef="let element" class="rightAlign">
                                        <mat-form-field floatLabel="never" class="rightAlign">
                                        <input matInput [value]="element.DeductRefundMap" [(ngModel)]="element.DeductRefundMap">
                                    </mat-form-field>
                                        <!-- {{element.DeductRefundMap}} -->
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="subMajorHead1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Sub Major Head</th>
                                </ng-container>
                                <ng-container matColumnDef="minorHead1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2"> Minor Head </th>
                                </ng-container>

                                <ng-container matColumnDef="Subhead1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2"> Sub head </th>
                                </ng-container>

                                <ng-container matColumnDef="detailHead1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Detail Head
                                    </th>
                                </ng-container>
                                <ng-container matColumnDef="objecthead1">
                                  <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Object Head
                                  </th>
                                </ng-container>
                                <ng-container matColumnDef="header1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Budget Estimate For Current Year {{loadCurrentYear()}}</th>
                                   
                                </ng-container>

                                <ng-container matColumnDef="budgetEst1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Actual For last year {{loadLastYear()}}</th>
                                   
                                </ng-container>

                                <ng-container matColumnDef="budgetEst2">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Actual For first 8 Months of Current Year {{loadCurrentYear()}}</th>
                                   
                                </ng-container>
                                <ng-container matColumnDef="budgetEst3">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Probable For Last four Months of Current Year {{loadCurrentYear()}}</th>
                                   
                                </ng-container>


                                <!-- <ng-container matColumnDef="actualReceipLy">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Actual Receipt For {{prvYear}} {{loadLastYear()}}</th>
                                  
                                </ng-container> -->

                                <!-- <ng-container matColumnDef="col8">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2"> Actual Disbursement For {{loadLastYear()}} </th>
                                  
                                </ng-container> -->
                                <!-- <ng-container matColumnDef="actualReceipt8A">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2"> Actual Receipt for 8 months of {{loadCurrentYear()}}(1a)</th>
                                   
                                </ng-container>
                                <ng-container matColumnDef="actualDisbursement8A">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Actual Disbursement for 8 months of {{loadCurrentYear()}}(1b)</th>
                                  
                                </ng-container> -->
                                <!-- <ng-container matColumnDef="actualReceipt82A">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Actual Receipt for last 4 month of {{loadCurrentYear()}} Receipt (2a)</th>
                                   
                                </ng-container>
                                <ng-container matColumnDef="actualDisbursement82B">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Actual Disbursement for last 4 month of {{loadCurrentYear()}} (2b)</th>
                                   
                                </ng-container> -->
                                <ng-container matColumnDef="header2">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Total</th>
                                </ng-container>
                                <ng-container matColumnDef="header3">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Provision for Next Year {{loadNextYear()}} </th>
                                    <!--next Year-->
                                </ng-container>
                                <ng-container matColumnDef="header4">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Proposed amount for R.E. {{loadCurrentYear()}}</th>
                                </ng-container>
                                <ng-container matColumnDef="header5">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">(FD Only) Account Oct/Nov of Current Year {{loadCurrentYear()}}</th>
                                    <!--curr_year-->
                                </ng-container>
                                <ng-container matColumnDef="header6">
                                   
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2"> (FD Only) Latest Estimate as per Forecast Current Year {{loadCurrentYear()}}</th>
                                    <!--curr_year-->
                                </ng-container>


                                <ng-container matColumnDef="header7">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Provision Finally admitted by FD</th>
                                    <!--curr_year-->
                                </ng-container>



                                <!-- <ng-container matColumnDef="proposedAm">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">propose Amount</th>
                                </ng-container> -->
                                <ng-container matColumnDef="remarks1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Remarks</th>
                                </ng-container>
                                <ng-container matColumnDef="DeductRefundMap1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Deduct Refund Mapping</th>
                                </ng-container>
                                <ng-container matColumnDef="1">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">1</th>
                                </ng-container>
                                <ng-container matColumnDef="2">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">2</th>
                                </ng-container>
                                <ng-container matColumnDef="3">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">3</th>
                                </ng-container>
                                <ng-container matColumnDef="4">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">4</th>
                                </ng-container>
                                <ng-container matColumnDef="5">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">5</th>
                                </ng-container>
                                <ng-container matColumnDef="6">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">6</th>
                                </ng-container>
                             <ng-container matColumnDef="7">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">7</th>
                                </ng-container>
                                    <ng-container matColumnDef="8">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">8</th>
                                </ng-container>
                                <ng-container matColumnDef="9">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">9</th>
                                </ng-container>
                                <ng-container matColumnDef="10">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">10</th>
                                </ng-container>
                                <ng-container matColumnDef="11">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">11</th>
                                </ng-container>

                                <ng-container matColumnDef="12">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">12</th>
                                </ng-container>
                                <ng-container matColumnDef="13">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">13</th>
                                </ng-container>
                                <ng-container matColumnDef="14">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">14</th>
                                </ng-container>
                                <ng-container matColumnDef="15">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">15</th>
                                </ng-container>
                                <ng-container matColumnDef="16">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">16</th>
                                </ng-container>
                                <ng-container matColumnDef="17">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">17</th>
                                </ng-container>
                                <ng-container matColumnDef="18">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">18</th>
                                </ng-container>
                                <ng-container matColumnDef="19">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">19</th>
                                </ng-container>
                                <ng-container matColumnDef="20">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">20</th>
                                </ng-container>
                                <ng-container matColumnDef="21">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">21</th>
                                </ng-container>
                                <ng-container matColumnDef="22">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">22</th>
                                </ng-container>
                                <ng-container matColumnDef="23">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">23</th>
                                </ng-container>
                                <ng-container matColumnDef="24">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">24</th>
                                </ng-container>
                                <ng-container matColumnDef="25">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">25</th>
                                </ng-container>
                                <ng-container matColumnDef="26">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">26</th>
                                </ng-container>
                                <ng-container matColumnDef="27">
                                    <th mat-header-cell *matHeaderCellDef scope="row" class="tblwithoutBg">27</th>
                                </ng-container>

                                <button mat-button (click)="saveStandCharge()">Back</button>

                                <!-- <tr mat-header-row *matHeaderRowDef="['subMajorHead1','minorHead1','Subhead1','detailHead1','header1','actualReceipLy','col8','actualReceipt8A','actualDisbursement8A','actualReceipt82A', 'actualDisbursement82B','header2','header3','header4','header5','header6','proposedAm','remarks1','DeductRefundMap1']">
                                </tr> -->

                                <tr mat-header-row *matHeaderRowDef="['subMajorHead1','minorHead1','Subhead1','detailHead1','objecthead1','header1', 'budgetEst1', 'budgetEst2','budgetEst3','header2','header3','header4','header5','header6','header7','remarks1','DeductRefundMap1']">
                                </tr>


                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

                                <tr mat-header-row class="unsetHeight" *matHeaderRowDef="['1','2','3','4','5','6','7','8','9','10','11','12',
                                '13','14','15','16','17','18','19','20','21','22','23','24' ,'25','26','27']">
                                </tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;let i= index;"></tr>
                            </table>
                            
                        </div>


                        <div class="form-action-button" *ngIf="!expendCharges">
                            <button type="submit" mat-raised-button color="primary">
                                <i class="material-icons" aria-hidden="true" title="Save">
                                    save
                                </i>
                                Save as Draft
                            </button>
                            <button mat-raised-button (click)="submit()" type="submit" class="green"><i class="material-icons" aria-hidden="true">
                                    done
                                </i> Submit</button>
                            <button type="reset" mat-raised-button color="accent">
                                <i class="material-icons" aria-hidden="true">
                                    restore
                                </i>
                                Reset
                            </button>
                            <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                                <i class="material-icons" aria-hidden="true" title="Listing">
                                    list
                                </i>
                                Listing
                            </button>
                            <button type="button" mat-raised-button (click)="goToDashboard()" class="btnClose">
                                <i class="material-icons" aria-hidden="true" title="Budget dashboard">
                                    close
                                </i>
                                Close
                            </button>
                        </div>
                        <div #scrollChargeMe *ngIf="expendCharges" style="margin-top: 15px;">

                            <div class="form-action-button" *ngIf="expendCharges">
                                <button type="submit" mat-raised-button color="primary">
                                    <i class="material-icons" aria-hidden="true" title="Save">
                                        save
                                    </i>
                                    Save
                                </button>
                                <button mat-raised-button type="submit" class="green"><i class="material-icons" aria-hidden="true">
                                        done
                                    </i> Submit</button>
                                <button type="reset" mat-raised-button color="accent">
                                    <i class="material-icons" aria-hidden="true">
                                        restore
                                    </i>
                                    Reset
                                </button>
                                <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                                    <i class="material-icons" aria-hidden="true" title="Listing">
                                        list
                                    </i>
                                    Listing
                                </button>
                                <button type="button" mat-raised-button (click)="goToDashboard()" class="btnClose">
                                    <i class="material-icons" aria-hidden="true" title="Budget dashboard">
                                        close
                                    </i>
                                    Close
                                </button>
                                <button mat-button (click)="backCharge()" mat-raised-button color="primary" class="back-button">
                                    <mat-icon aria-label="icon-button">
                                        keyboard_return
                                    </mat-icon>
                                    Back
                                </button>
                            </div>
                        </div>
                    </mat-tab>
                    <!-- <mat-tab label="Attachments" [disabled]="tabDisable"> -->
                    <mat-tab label="Attachments">
                        <table mat-table aria-describedby="attachmentTable" [dataSource]="dataSourceBrowse" width="100%" id="browseTable">
                            <ng-container matColumnDef="position">
                                <th mat-header-cell *matHeaderCellDef scope="row">Sr. No.</th>
                                <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
                                {{ i + 1 }}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="attachmentType">
                                <th mat-header-cell *matHeaderCellDef scope="row">Attachment Type</th>
                                <!-- <td mat-cell *matCellDef="let item"> {{item.serviceType}} </td>-->
                                <td mat-cell *matCellDef="let item;let i = index;">
                                    <mat-select placeholder="Attachment Type" [(ngModel)]="item.attachmentType" #singleSelect1 required>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="attachmentTypeCodeCtrl" [placeholderLabel]="'Find Attachment Type...'" [noEntriesFoundLabel]="'no matching Attachment Type found'">
                                            </ngx-mat-select-search>
                                        </mat-option>

                                        <mat-option *ngFor="let AT of filteredAttachmentTypeCode | async" [value]="AT.value">
                                            {{AT.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="fileName">
                                <th mat-header-cell *matHeaderCellDef scope="row">File Name</th>
                                <!-- <td mat-cell *matCellDef="let item"> {{item.serviceType}} </td>-->
                                <td mat-cell *matCellDef="let item">
                                    <mat-form-field floatLabel="never">
                                        <input matInput [value]="item.name" [(ngModel)]="item.name">
                                    </mat-form-field>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="browse">
                                <th mat-header-cell *matHeaderCellDef scope="row">Browse File</th>
                                <!-- <td mat-cell *matCellDef="let item"> {{item.serviceType}} </td>-->
                                <td mat-cell *matCellDef="let i = index">
                                    <button type="button" (click)="openFileSelector(i)" class="btn-browse">Browse Files</button>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="uploadedFileName">
                                <th mat-header-cell *matHeaderCellDef scope="row">Uploaded File Name</th>
                                <!-- <td mat-cell *matCellDef="let item"> {{item.serviceType}} </td>-->
                                <td mat-cell *matCellDef="let item">
                                    <span *ngIf="item.file && item.file.name">{{item.file.name}}</span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="uploadedBy">
                                <th mat-header-cell *matHeaderCellDef scope="row">Uploaded By</th>
                                <td mat-cell *matCellDef="let item">
                                    <mat-label>Mr. Pratik Shah</mat-label>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                                <td mat-cell *matCellDef="let item; let i = index">
                                    <table class="iconTable">
                                        <tbody>
                                            <tr>
                                                <td width="30">
                                                    <i class="material-icons plus" *ngIf="dataSourceBrowse && dataSourceBrowse.data && (i == dataSourceBrowse.data.length - 1)" (click)="addBrowse()">
                                                    add
                                                </i>
                                                </td>
                                                <td width="30">
                                                    <i class="material-icons plus delete" *ngIf="dataSourceBrowse && dataSourceBrowse.data && dataSourceBrowse.data.length > 1" (click)="deleteBrowse(i)">
                                                    delete
                                                </i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedBrowseColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedBrowseColumns;"></tr>
                        </table>
                        <input type="file" id="fileBrowse" style="visibility: hidden;" (change)="onFileSelection($event)" />
                        <div class="legend">
                          1. Total File size should be under 2MB<br> 2. File type supported are: 'jpg', 'jpeg', 'png', 'pdf', JPG’,
                          ‘JPEG’, ‘PNG’, ‘PDF’.
                        </div>
                        <div class="form-action-button">
                            <button type="submit" mat-raised-button color="primary">
                            <i class="material-icons" aria-hidden="true" title="Save">
                                save
                            </i>
                            Upload
                        </button>
                            <!-- <button mat-raised-button type="submit" class="green"><i class="material-icons" aria-hidden="true">
                                done
                            </i> Submit</button> -->
                            <!-- <button type="reset" mat-raised-button color="accent">
                            <i class="material-icons" aria-hidden="true">
                                restore
                            </i>
                            Reset
                        </button> -->
                            <button type="button" mat-raised-button (click)="gotoListing()" color="warn">
                            <i class="material-icons" aria-hidden="true" title="Listing">
                                list
                            </i>
                            Listing
                        </button>
                            <button type="button" mat-raised-button (click)="goToDashboard()" class="btnClose">
                            <i class="material-icons" aria-hidden="true" title="Budget dashboard">
                                close
                            </i>
                            Close
                        </button>
                        </div>
                    </mat-tab>
                </mat-tab-group>

                <div class="save" title="Save All" *ngIf="!tabDisable">
                    <button mat-mini-fab color="primary" class="saveFloatButton" (click)="saveAllData()">
                      <mat-icon aria-label="Example icon-button">save</mat-icon>
                  </button>
                </div>
            </div>
        </div>
    </div>
</div>



