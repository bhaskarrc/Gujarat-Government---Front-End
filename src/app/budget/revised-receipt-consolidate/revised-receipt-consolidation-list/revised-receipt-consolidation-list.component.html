<div class="container">
  <div class="form-wrapper">

    <div class="heading-section ng-star-inserted">
      <div>List of Revised Receipt Consolidate
      </div>
    </div>

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Budget</a></li>
        <li class="breadcrumb-item active" aria-current="page">List of Revised Receipt Consolidate</li>
      </ol>
    </nav>

    <!-- Search Section Starts-->
    <mat-accordion class="search-accordian">
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <div class="heading-section">
            Search
          </div>
        </mat-expansion-panel-header>
        <div class="form-datatable-list">
          <form class="col-sm-12" [formGroup]="searchListForm">
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="finYear" placeholder="Financial
                    Year" #singleSelect1>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="finYearCtrl" [placeholderLabel]="'Find Financial Year...'"
                        [noEntriesFoundLabel]="'no
                        matching Financial Year found'">
                      </ngx-mat-select-search>
                    </mat-option>

                    <mat-option *ngFor="let FY of
                      filteredFinYear | async" [value]="FY.value">
                      {{FY.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="dept" placeholder="Department">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="deptCtrl" [placeholderLabel]="'Find Department...'"
                        [noEntriesFoundLabel]="'no matching Department found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let va of dept_list |filterSelectInput:deptCtrl.value" [value]="va.value">
                      {{va.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="majorHeadCode" placeholder="Major
                    Head">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="majorHeadCodeCtrl" [placeholderLabel]="'Find Major Head...'"
                        [noEntriesFoundLabel]="'no
                        matching Major Head found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let majorHead of
                      filteredMajorlist |
                      filterSelectInput:majorHeadCodeCtrl.value" [value]="majorHead.value">
                      {{majorHead.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="refDatepickerfr" formControlName="frRefDate"
                    placeholder="Received On - From">
                  <mat-datepicker-toggle matSuffix [for]="refDatepickerfr"></mat-datepicker-toggle>
                  <mat-datepicker #refDatepickerfr></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="refDatepickerto" formControlName="toRefDate"
                    placeholder="Received On - To">
                  <mat-datepicker-toggle matSuffix [for]="refDatepickerto"></mat-datepicker-toggle>
                  <mat-datepicker #refDatepickerto></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="Datepickerfrom" formControlName="sentOn"
                    placeholder="Sent On - From">
                  <mat-datepicker-toggle matSuffix [for]="Datepickerfrom"></mat-datepicker-toggle>
                  <mat-datepicker #Datepickerfrom></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="Datepickerto" formControlName="sentTo"
                    placeholder="Sent On - To">
                  <mat-datepicker-toggle matSuffix [for]="Datepickerto"></mat-datepicker-toggle>
                  <mat-datepicker #Datepickerto></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="status" placeholder="Status">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="statusCtrl" [placeholderLabel]="'Find Status...'"
                        [noEntriesFoundLabel]="'no matching Status found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let va of statuslist |filterSelectInput:statusCtrl.value" [value]="va.value">
                      {{va.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>


            </div>
          </form>
        </div>

        <!-- Action Buttons -->
        <div class="row displayBlock form-action-button">
          <div class="centerAlign">
            <button type="submit" mat-raised-button color="primary">
              <i class="material-icons" aria-hidden="true">search</i>
              Search
            </button>
            <button type="reset" mat-raised-button color="accent">
              <i class="material-icons" aria-hidden="true">
                restore
              </i>
              Reset
            </button>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <!-- Search Section Ends-->

    <div class="mat-elevation-z8 mt-2">
      <!-- Table Section Starts -->
      <table mat-table [dataSource]="dataSource" aria-describedby="revisedReceiptConsolidateList" width="100%" matSort>

        <!-- Sr No. -->
        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">
            srno. </th>
          <td mat-cell *matCellDef="let element; let i= index;" class="centerAlign">
            {{ i + 1 }} </td>
        </ng-container>
        <ng-container matColumnDef="head1">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Sr No.</th>
        </ng-container>

        <!-- Financial Year -->
        <ng-container matColumnDef="fianicial">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}">Financial Year</th>
          <td mat-cell *matCellDef="let element"> {{element.fianicial}}
          </td>
        </ng-container>

        <ng-container matColumnDef="head22">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Financial Year</th>
        </ng-container>

        <!-- Major Head -->
        <ng-container matColumnDef="majorHead">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}">Financial Year</th>
          <td mat-cell *matCellDef="let element" [matTooltip]="element.majorHeadToolTip"> {{element.majorHead}}
          </td>
        </ng-container>

        <ng-container matColumnDef="head2">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Major Head</th>
        </ng-container>

        <!-- No. of Department -->
        <ng-container matColumnDef="noDDOs">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}"> </th>
          <td mat-cell *matCellDef="let element">
            <a [routerLink]="'../department-list'">{{element.noDDOs}}</a>
          </td>
        </ng-container>
        <ng-container matColumnDef="head3">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">No. of Department</th>
        </ng-container>

        <!-- Consolidated Proposed Amount -->
        <!-- Receipt -->
        <ng-container matColumnDef="receipt">
          <th mat-header-cell *matHeaderCellDef scope="row">Receipt</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.receipt}} </td>
        </ng-container>

        <!-- Disbursement -->
        <ng-container matColumnDef="disburs">
          <th mat-header-cell *matHeaderCellDef scope="row">Disbursement</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.disbursement}} </td>
        </ng-container>


        <ng-container matColumnDef="head13">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.colspan]="2">Consolidated Proposed Amount</th>
        </ng-container>
        
        <!-- Received On and Date -->
        <ng-container matColumnDef="receivedOnFrom">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}">Received On and Date</th>
          <td mat-cell *matCellDef="let element" class="centerAlign">
            {{element.receivedOnFrom}} </td>
        </ng-container>

        <ng-container matColumnDef="head7">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Received On and Date</th>
        </ng-container>

        <!-- Sent On and Date -->
        <ng-container matColumnDef="sentToOn">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}">Sent On and Date</th>
          <td mat-cell *matCellDef="let element" class="centerAlign">
            {{element.sentToOn}} </td>
        </ng-container>

        <ng-container matColumnDef="head8">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Sent On and Date</th>
        </ng-container>

        <!-- Lying With -->
        <ng-container matColumnDef="lyingWith">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}">Lying With</th>
          <td mat-cell *matCellDef="let element" class="centerAlign">
            {{element.lyingWith}} </td>
        </ng-container>
        <ng-container matColumnDef="head9">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Lying With</th>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header [ngStyle]="{'display': 'none'}">Status</th>
          <td mat-cell *matCellDef="let element" class="centerAlign">
            <a matTooltip="{{element.tooltip}}"> {{element.status}} </a></td>
        </ng-container>
        <ng-container matColumnDef="head10">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Status</th>
        </ng-container>

        <!-- Action -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'display': 'none'}">
            Action</th>
          <td mat-cell *matCellDef="let element;let i= index;" class="action-btn-i  centerAlign">
            <a class="delete-icon" *ngIf="element.status=='-'"><i class="material-icons rotate-180 plus delete"
                (click)="consolidatePage()" title="Consolidate">
                device_hub
              </i></a>
            <a *ngIf="element.status=='Draft' || element.status=='Pending'"><i class="material-icons plus edit-icon" aria-hidden="true" title="Edit"> edit </i></a>

            <a *ngIf="element.status=='Draft' || element.status=='Pending'"><i class="material-icons plus view-icon" aria-hidden="true" title="Detail View" (click)="consolidateView()">
                remove_red_eye
              </i></a>
            <!-- <a *ngIf="element.status=='Draft' || element.status=='Pending' || element.status=='Rejected' || element.status=='Approved'"><i
                class="material-icons plus" (click)="showHistoryDialog()" aria-hidden="true"
                title="History Detail">receipt</i></a> -->
          </td>
        </ng-container>
        <ng-container matColumnDef="head11">
          <th mat-header-cell *matHeaderCellDef scope="row" [attr.rowspan]="2">Action</th>
        </ng-container>

        <!-- Main Header of Table -->
        <tr mat-header-row
          *matHeaderRowDef="['head1','head22','head2','head3','head13','head7','head8','head9','head10','head11']">
        </tr>
        <!-- Sub Header of Table -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <!-- Data Fetch From .TS File to table -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <!-- Table Section Ends -->
      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>
