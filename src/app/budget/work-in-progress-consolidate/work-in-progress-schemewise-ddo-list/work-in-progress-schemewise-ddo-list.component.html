<div class="container">
  <div class="form-wrapper">
      <div class="heading-section ng-star-inserted">
          <div>Work-In-Progress Consolidate</div>
          <!-- <div class="font-heading"><strong>Transaction Number:</strong> 19-20/BUD/SCE/001</div> -->
          <!-- <div class="font-heading"><strong>Transaction Date:</strong> {{ date | date: 'dd-MMM-yyyy HH:mm'}}</div> -->
      </div>

      <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item"><a href="#">Budget</a></li>
              <li class="breadcrumb-item active" aria-current="page">Work-In-Progress Consolidate</li>
          </ol>
      </nav>

      <div class="row header-detail">
          <div class="col-sm-6 colPadding" *ngFor="let item of headerJson">
              <div class="col-sm-4 labelCSS">{{item.label}}<span class="floatRight">:</span></div>
              <div class="col-sm-8 paddingUnset">{{item.value}}</div>
          </div>
      </div>


      <div>
          <mat-tab-group mat-stretch-tabs class="standing-est-tabing">
              <mat-tab label="Budget Estimate Prepared">
                  <div class="rsClass"> (â‚¹ in Lakhs) </div>
                  <table mat-table aria-describedby="budEstPrepared" [dataSource]="ddoListDataSource" matSort>

                      <ng-container matColumnDef="srNo">
                          <th mat-header-cell *matHeaderCellDef scope="row">Sr No</th>
                          <td mat-cell *matCellDef="let item;let idx = index;" class="centerAlign">
                              {{ idx + 1}}
                          </td>
                          <td mat-footer-cell *matFooterCellDef>Total</td>
                      </ng-container>

                      <ng-container matColumnDef="checkbox">
                          <th mat-header-cell *matHeaderCellDef scope="row">Select DDO</th>
                          <td mat-cell *matCellDef="let item;let idx = index;" class="centerAlign">
                              <mat-checkbox [value]="item.checkbox" [checked]="item.checkbox" [(ngModel)]="item.checkbox" title="Select" (change)="checkboxValueChange()"></mat-checkbox>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="ddoName">
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>DDO Name </th>
                          <td mat-cell *matCellDef="let item;">
                              <a class="hyper-link" *ngIf="item.ddoProposedAmt > 0.00; else DDOName;" title="Detail View" (click)="loadDetailView(item)">{{item.ddoName}}</a>
                              <ng-template #DDOName>
                                  {{item.ddoName}}
                              </ng-template>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="ddoProposedAmt">
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Proposed Amount by DDO</th>
                          <td mat-cell *matCellDef="let item" class="rightAlign">
                              {{item.ddoProposedAmt | number : '1.2-2'}}
                          </td>
                          <td mat-footer-cell *matFooterCellDef class="rightAlign">{{calcAmtProposedByDDO() | number : '1.2-2'}}
                      </ng-container>

                      <ng-container matColumnDef="hodProposedAmt">
                          <!--hodProposedAmt-->
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Proposed Amount by HOD</th>
                          <td mat-cell *matCellDef="let item" class="rightAlign">
                              <!-- {{item.hodAmt | number : '1.2-2'}} -->
                              <mat-form-field floatLabel="never" class="rightAlign">
                                  <input matInput [value]="item.hodProposedAmt " [(ngModel)]="item.hodProposedAmt" step="0.00">
                              </mat-form-field>
                          </td>
                          <td mat-footer-cell *matFooterCellDef class="rightAlign">
                              {{calcAmtProposedByHOD() | number : '1.2-2'}}
                      </ng-container>

                      <ng-container matColumnDef="ddoReferenceNo">
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Reference No.</th>
                          <td mat-cell *matCellDef="let item">
                              {{item.ddoReferenceNo}}
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="ddoTransactionDate">
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Submission Date</th>
                          <td mat-cell *matCellDef="let item">
                              {{item.ddoTransactionDate}}
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="ddoListColumn"></tr>
                      <tr mat-row *matRowDef="let row; columns: ddoListColumn;"></tr>
                      <tr mat-footer-row *matFooterRowDef="ddoListColumn; sticky: true"></tr>
                  </table>
                  <!-- <mat-paginator #ddoListPaginator [pageSizeOptions]="paginationSize" showFirstLastButtons></mat-paginator> -->

                  <div class="form-action-button">
                      <button type="button" mat-raised-button (click)="goToDashboard()" class="btnClose">
                        <i class="material-icons" aria-hidden="true" title="Budget dashboard">
                        close
                        </i>
                        Close
                    </button>
                      <button mat-button (click)="goToSchemeList()" mat-raised-button color="primary" class="back-button">
                        <mat-icon aria-label="icon-button">
                        keyboard_return
                        </mat-icon>
                        Back
                    </button>
                  </div>
              </mat-tab>
              <mat-tab label="Budget Estimate Not Prepared">
                  <div #parentGrids>
                      <form [formGroup]="schemewiseDdo">
                        <div class="row">
                          <div class="col-sm-3">
                              <mat-form-field class="full-width">
                                  <mat-select formControlName="ddoEo" placeholder="DDO / EO" required>
                                      <mat-option>
                                          <ngx-mat-select-search [formControl]="ddoEoCtrl" [placeholderLabel]="'Find DDO / EO...'" [noEntriesFoundLabel]="'no matching DDO / EO found'">
                                          </ngx-mat-select-search>
                                      </mat-option>
                                      <mat-option *ngFor="let va of ddoEo_list | filterSelectInput:ddoEoCtrl.value" [value]="va.value">
                                          {{va.viewValue}}
                                      </mat-option>
                                  </mat-select>
                              </mat-form-field>
                              <div class="error-wrapper" *ngIf="schemewiseDdo.controls.ddoEo.touched && (schemewiseDdo.controls.ddoEo.errors)">
                                <mat-error *ngIf="schemewiseDdo.controls.ddoEo.errors.required">
                                    {{errorMessages.DDO_EO}}
                                </mat-error>
                            </div>
                          </div>
                        </div>
                      </form>
                      <div class="form-action-button">
                        <button type="submit" mat-raised-button color="primary" (click)="whenAddClick()" title="Add">
                          <i class="material-icons" aria-hidden="true">
                             add
                          </i>
                          Add
                       </button>
                      </div>
                  </div>
                  <table mat-table *ngIf="(onAdd)" aria-describedby="budEstNotPrepared" [dataSource]="ddoListNotProposedDataSource" matSort>

                      <ng-container matColumnDef="srNo">
                          <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'width':'10%'}">Sr No</th>
                          <td mat-cell *matCellDef="let item;let idx = index;" class="centerAlign">
                              {{ idx + 1}}
                          </td>
                      </ng-container>

                      <ng-container matColumnDef="checkbox">
                          <th mat-header-cell *matHeaderCellDef scope="row" [ngStyle]="{'width':'10%'}">
                              <mat-checkbox [checked]="checkbox" [(ngModel)]="checkbox" title="Select All" (change)="selectAll()"></mat-checkbox>
                              <!-- Select DDO -->
                          </th>
                          <td mat-cell *matCellDef="let item;let idx = index;" class="centerAlign">
                              <mat-checkbox [value]="item.checkbox" [checked]="item.checkbox" [(ngModel)]="item.checkbox" title="Select" (change)="checkboxValueNotProposedChange()"></mat-checkbox>
                          </td>
                      </ng-container>

                      <ng-container matColumnDef="ddoName">
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>DDO Name </th>
                          <td mat-cell *matCellDef="let item;">
                              {{item.ddoName}}
                          </td>
                      </ng-container>

                      <ng-container matColumnDef="ddoProposedAmt">
                          <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Proposed Amount by DDO</th>
                          <td mat-cell *matCellDef="let item" class="centerAlign">
                              {{item.ddoProposedAmt}}
                          </td>
                      </ng-container>

                      <ng-container matColumnDef="action">
                          <th mat-header-cell *matHeaderCellDef scope="row">Create Estimate</th>
                          <td mat-cell *matCellDef="let item" class="centerAlign">
                              <i class="material-icons plus edit-icon" title="Create Estimate" (click)="loadCreateEstimatePage(item)">
                                create
                            </i>
                          </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="ddoNotProposedListColumn"></tr>
                      <tr mat-row *matRowDef="let row; columns: ddoNotProposedListColumn;"></tr>
                  </table>
                  <!-- <mat-paginator #ddoNotProposedListPaginator [pageSizeOptions]="paginationSize" showFirstLastButtons></mat-paginator> -->

                  <div class="form-action-button">
                      <button mat-raised-button color="primary" [disabled]="!isSendReminderEnable" (click)="sendReminderNotProposed()">
                        <i class="material-icons" aria-hidden="true" title="Send Reminder">
                        send
                        </i>
                        Send Reminder
                    </button>
                      <button type="button" mat-raised-button (click)="goToDashboard()" class="btnClose">
                        <i class="material-icons" aria-hidden="true" title="Budget dashboard">
                        close
                        </i>
                        Close
                    </button>
                      <button mat-button (click)="goToSchemeList()" mat-raised-button color="primary" class="back-button">
                        <mat-icon aria-label="icon-button">
                        keyboard_return
                        </mat-icon>
                        Back
                    </button>
                  </div>
              </mat-tab>
          </mat-tab-group>
      </div>
  </div>
</div>