<div class="container">
  <div class="form-wrapper">
    <div class="heading-section ng-star-inserted">
      <div class="col-md-4 col-sm-12 title">
        Listing of Establishment Details of the Standing Charges
      </div>
    </div>

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Budget</a></li>
        <li class="breadcrumb-item active" aria-current="page">
          Listing of Establishment Details of the Standing Charges
        </li>
      </ol>
    </nav>

    <div class="panel-group">
      <mat-accordion class="search-accordian">
          <mat-expansion-panel [expanded]="true">
              <mat-expansion-panel-header>
                  <div class="heading-section">
                      Search
                  </div>
              </mat-expansion-panel-header>
                  <!-- <form class="col-sm-12" [formGroup]="establishmentListForm">
                    <div class="row">
                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Financial year"
                            numbersOnly
                            formControlName="fiCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Department"
                            formControlName="deptCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Estimation From"
                            formControlName="estFromCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Revenue/Capital"
                            formControlName="revCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Demand"
                            formControlName="demandCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Major Head"
                            formControlName="mHeadCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Sub Major Head"
                            formControlName="smHeadCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Minor Head"
                            formControlName="minHeadCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Sub Head"
                            formControlName="subHeadCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Voted/Charge"
                            formControlName="voteCtrl"
                          />
                        </mat-form-field>
                      </div>

                      <div class="col-sm-3">
                        <mat-form-field class="full-width">
                          <input
                            matInput
                            type="text"
                            placeholder="Detailed Head"
                            formControlName="dHeadCtrl"
                          />
                        </mat-form-field>
                      </div>
                    </div>

                  
                  </form> -->
                  <form class="col-sm-12" [formGroup]="createEstimateForm" (ngSubmit)="saveEstimate()">
                    <div class="row">
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="finYear" placeholder="Financial Year">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="finYearCtrl" [placeholderLabel]="'Find Financial Year...'" [noEntriesFoundLabel]="'no matching Financial Year found'">
                                        </ngx-mat-select-search>
                                    </mat-option>

                                    <mat-option *ngFor="let FY of finYear_list | filterSelectInput: finYearCtrl.value" [value]="FY.value" matTooltip="{{FY.viewValue}}">
                                        {{FY.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="departmentCode" placeholder="Department">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="departmentCodeCtrl" [placeholderLabel]="'Find Department...'" [noEntriesFoundLabel]="'no matching Department found'">
                                        </ngx-mat-select-search>
                                    </mat-option>

                                    <mat-option *ngFor="let department of department_list | filterSelectInput: departmentCodeCtrl.value" [value]="department.value" matTooltip="{{department.viewValue}}">
                                        {{department.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="estimationFrom" placeholder="Estimation From" #singleSelect1>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="estimationFromCtrl" [placeholderLabel]="'Find Estimation From...'" [noEntriesFoundLabel]="'no matching Estimation From found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let estimation of estimation_list | filterSelectInput: estimationFromCtrl.value" [value]="estimation.value">
                                        {{estimation.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="demandCode" placeholder="Demand">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="demandCodeCtrl" [placeholderLabel]="'Find Demand Code...'" [noEntriesFoundLabel]="'no matching Demand Code found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let demand of demand_list | filterSelectInput: demandCodeCtrl.value" [value]="demand.value" matTooltip="{{demand.viewValue}}">
                                        {{demand.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                            
                                <mat-select formControlName="majorHeadCode" placeholder="Major Head">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="majorHeadCodeCtrl" [placeholderLabel]="'Find Major Head...'" [noEntriesFoundLabel]="'no matching Major Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{majorhead.viewValue}}" *ngFor="let majorhead of majorHead_list | filterSelectInput: majorHeadCodeCtrl.value" [value]="majorhead.value">
                                        {{majorhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="revenueCapital" placeholder="Revenue/Capital">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="revenueCapitalCtrl" [placeholderLabel]="'Find Revenue/Capital...'" [noEntriesFoundLabel]="'no matching Revenue/Capital'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{RCapital.viewValue}}" *ngFor="let RCapital of revenue_capital_list | filterSelectInput: revenueCapitalCtrl.value" [value]="RCapital.value">
                                        {{RCapital.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                              
                                <mat-select formControlName="subMajorHeadCode" placeholder="Sub Major Head">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="subMajorHeadCodeCtrl" [placeholderLabel]="'Find Sub Major Head...'" [noEntriesFoundLabel]="'no matching Sub Major Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{submajorhead.viewValue}}" *ngFor="let submajorhead of subMajorHead_list | filterSelectInput: subMajorHeadCodeCtrl.value" [value]="submajorhead.value">
                                        {{submajorhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <!--matTooltip="{{createEstimateForm.get('minorHeadCode').value}}"-->
                                <mat-select formControlName="minorHeadCode" placeholder="Minor Head">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="minorHeadCodeCtrl" [placeholderLabel]="'Find Minor Head...'" [noEntriesFoundLabel]="'no matching Minor Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{minorhead.viewValue}}" *ngFor="let minorhead of minorHead_list | filterSelectInput: minorHeadCodeCtrl.value" [value]="minorhead.value">
                                        {{minorhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <!--matTooltip="{{createEstimateForm.get('subHeadCode').value}}"-->
                                <mat-select formControlName="subHeadCode" placeholder="Sub Head">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="subHeadCodeCtrl" [placeholderLabel]="'Find Sub Head...'" [noEntriesFoundLabel]="'no matching Sub Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{subhead.viewValue}}" *ngFor="let subhead of subHead_list | filterSelectInput: subHeadCodeCtrl.value" [value]="subhead.value">
                                        {{subhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <!--matTooltip="{{createEstimateForm.get('detailHeadCode').value}}"-->
                                <mat-select formControlName="detailHeadCode" placeholder="Detailed Head">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="detailHeadCodeCtrl" [placeholderLabel]="'Find Detailed Head...'" [noEntriesFoundLabel]="'no matching Detailed Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{detailhead.viewValue}}" *ngFor="let detailhead of detailHead_list | filterSelectInput: detailHeadCodeCtrl.value" [value]="detailhead.value">
                                        {{detailhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="chargedVotedCode" placeholder="Charged/Voted">
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="chargedVotedCodeCtrl" [placeholderLabel]="'Find Charged/Voted...'" [noEntriesFoundLabel]="'no matching Charged/Voted found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option matTooltip="{{chargedVoted.viewValue}}" *ngFor="let chargedVoted of chargedVoted_list | filterSelectInput: chargedVotedCodeCtrl.value" [value]="chargedVoted.value">
                                        {{chargedVoted.viewValue}}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field class="full-width">
                            <mat-select class="selection-box" formControlName="objHead" placeholder="Object head">
                                <mat-option>
                                    <ngx-mat-select-search #codeInput [formControl]="codeCtrl" [placeholderLabel]="'Select Object head'" [noEntriesFoundLabel]="'no matching object head found'">
                                    </ngx-mat-select-search>
                                </mat-option>
                                <mat-option id="{{sObject.viewValue}}" *ngFor="let sObject of allMainCodes | filterSelectInput: codeCtrl.value;let i = index" [value]="sObject.value" matTooltip="{{sObject.viewValue}}">
                                    {{sObject.viewValue}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        </div>
                        
                    </div>
                </form>
                  <div class="form-action-button">
                    <button type="submit" mat-raised-button color="primary" (click)="showTab()">
                      <i class="material-icons" aria-hidden="true" title="search">search</i>
                      Search
                    </button>
                    <button type="reset" mat-raised-button color="accent" (click)="clearForm()"><i class="material-icons" aria-hidden="true" title="reset">
                        restore
                      </i>
                      Reset
                    </button>
                  </div>
              </mat-expansion-panel>
        </mat-accordion>
    </div>

          <div class="mat-elevation-z8 mt-2">
            <table mat-table [dataSource]="dataSource" width="100%" matSort>                
                <ng-container matColumnDef="position">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Sr. No.</th>
                    <td mat-cell *matCellDef="let element; let i = index;" class="centerAlign">
                        {{ i + 1 }} </td>
                </ng-container>


                <ng-container matColumnDef="bHead">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Budget Head</th>
                    <td mat-cell *matCellDef="let element"> {{element.bHead}} </td>
                </ng-container>

                <ng-container matColumnDef="sanPost">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">No. of Sanctioned Post</th>
                    <td mat-cell *matCellDef="let element"> {{element.sanPost}} </td>
                </ng-container>

                <ng-container matColumnDef="objectHead">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row" [ngStyle]="{'width':'40%'}">Object Head</th>
                    <td mat-cell *matCellDef="let element"> {{element.objectHead}} </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Status</th>
                  <td mat-cell *matCellDef="let element"> {{element.status}} </td>
              </ng-container>
                
                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef>Action</th>
                    <td mat-cell *matCellDef="let item; let i = index" class="centerAlign">
                      <!-- <a [routerLink]="'../wireframe-of-establishment-details'">Process</a> &nbsp; -->
                      <a [routerLink]="'../wireframe-of-establishment-details'"><i class="material-icons plus view-icon" title="Process">autorenew</i></a>&nbsp;
                      <a [routerLink]="'../wireframe-of-establishment-details'"><i class="material-icons plus edit-icon" title="Edit">edit</i></a>&nbsp;
                      <i class="material-icons plus delete" *ngIf="(dataSource.data.length>1)" (click)="deleteConfirmationPopup(i)" title="Delete">delete</i>
                    </td>
                    
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; let i = index;columns: displayedColumns;">
                </tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            
        </div>
  </div>
</div>
