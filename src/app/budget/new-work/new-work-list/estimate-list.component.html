<div class="container">
    <div class="form-wrapper">
        <div class="heading-section ng-star-inserted">
            <div>New Work Estimate List</div>
            <!-- <div class='square-box ml-auto'>
                <div class='square-outer'>
                    <div class="square completed"></div>
                    <div class="square-text">Complete</div>
                </div>
                <div class='square-outer'>
                    <div class="square incomplete"></div>
                    <div class="square-text">Incomplete</div>
                </div>
            </div> -->
        </div>

        <!-- <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Budget</a></li>
                <li class="breadcrumb-item active" aria-current="page">New Work Estimate List</li>
            </ol>
        </nav> -->
        <mat-accordion class="search-accordian">
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                    <div class="heading-section">
                        Search New Work Estimate
                    </div>
                </mat-expansion-panel-header>
                <div class=" form-datatable-list">
                    <form class="col-sm-12" [formGroup]="searchEstimateForm" (ngSubmit)="searchEstimate()">
                        <div class="row">
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="departmentCode" placeholder="Department"
                                        #singleSelect1>
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="departmentCodeCtrl"
                                                [placeholderLabel]="'Find Department...'"
                                                [noEntriesFoundLabel]="'no matching Department found'">
                                            </ngx-mat-select-search>
                                        </mat-option>

                                        <mat-option *ngFor="let department of filteredDepartmentCode | async"
                                            [value]="department.value">
                                            {{department.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.departmentCode.touched && searchEstimateForm.controls.departmentCode.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.departmentCode.errors.required">
                                            {{errorMessages.DEPARTMENT}}</mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="finYear" placeholder="Financial Year">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="finYearCtrl"
                                                [placeholderLabel]="'Find Financial Year...'"
                                                [noEntriesFoundLabel]="'no matching Financial Year found'">
                                            </ngx-mat-select-search>
                                        </mat-option>

                                        <mat-option *ngFor="let FY of filteredFinYear | async" [value]="FY.value">
                                            {{FY.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.finYear.touched && searchEstimateForm.controls.finYear.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.finYear.errors.required">
                                            {{errorMessages.FIN_YEAR}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="branchCode" placeholder="Branch Name">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="branchCodeCtrl"
                                                [placeholderLabel]="'Find Branch Name...'"
                                                [noEntriesFoundLabel]="'no matching Branch Name found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let branch of filteredBranchCode | async"
                                            [value]="branch.value">
                                            {{branch.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.branchCode.touched && searchEstimateForm.controls.branchCode.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.branchCode.errors.required">
                                            {{errorMessages.BRANCH}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="demandCode" placeholder="Demand">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="demandCodeCtrl"
                                                [placeholderLabel]="'Find Demand Code...'"
                                                [noEntriesFoundLabel]="'no matching Demand Code found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option matTooltip="{{demand.viewValue}}" *ngFor="let demand of filteredDemandCode | async"
                                            [value]="demand.value">
                                            {{demand.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.demandCode.touched && searchEstimateForm.controls.demandCode.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.demandCode.errors.required">
                                            {{errorMessages.DEMAND}}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="estimationFrom" placeholder="Estimation From">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="estimationFromCtrl"
                                                [placeholderLabel]="'Find Estimation From...'"
                                                [noEntriesFoundLabel]="'no matching Estimation From found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let estimation of filteredEstimationFrom | async"
                                            [value]="estimation.value">
                                            {{estimation.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.estimationFrom.touched && searchEstimateForm.controls.estimationFrom.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.estimationFrom.errors.required">
                                            {{errorMessages.ESTIMATION_FORM}}</mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="majorHeadCode" placeholder="Major Head">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="majorHeadCodeCtrl"
                                                [placeholderLabel]="'Find Major Head...'"
                                                [noEntriesFoundLabel]="'no matching Major Head found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let majorhead of filteredMajorHeadCode | async"
                                            [value]="majorhead.value"
                                            matTooltip="{{majorhead.viewValue}}">
                                            {{majorhead.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.majorHeadCode.touched && searchEstimateForm.controls.majorHeadCode.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.majorHeadCode.errors.required">
                                            {{errorMessages.MAJOR_HEAD}}</mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="subMajorHeadCode" placeholder="Sub Major Head">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="subMajorHeadCodeCtrl"
                                                [placeholderLabel]="'Find Sub Major Head...'"
                                                [noEntriesFoundLabel]="'no matching Sub Major Head found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let submajorhead of filteredSubMajorHeadCode | async"
                                            [value]="submajorhead.value"
                                            matTooltip="{{submajorhead.viewValue}}">
                                            {{submajorhead.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.subMajorHeadCode.touched && searchEstimateForm.controls.subMajorHeadCode.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.subMajorHeadCode.errors.required">
                                            {{errorMessages.SUB_MAJOR_HEAD}}</mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="minorHeadCode" placeholder="Minor Head">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="minorHeadCodeCtrl"
                                                [placeholderLabel]="'Find Minor Head...'"
                                                [noEntriesFoundLabel]="'no matching Minor Head found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="let minorhead of filteredMinorHeadCode | async"
                                            [value]="minorhead.value"
                                            matTooltip="{{minorhead.viewValue}}">
                                            {{minorhead.viewValue}}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper"
                                        *ngIf="searchEstimateForm.controls.minorHeadCode.touched && searchEstimateForm.controls.minorHeadCode.errors">
                                        <mat-error *ngIf="searchEstimateForm.controls.minorHeadCode.errors.required">
                                            {{errorMessages.MINOR_HEAD}}</mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <label class="staticLable"><b>Form Type : </b> Form G/H </label>
                            </div>
                        </div>
                        <div class="row displayBlock form-action-button">
                            <div class="centerAlign">
                                <button type="submit" mat-raised-button color="primary">
                                    <i class="material-icons" aria-hidden="true">search</i>
                                    Search
                                </button>
                                <button type="reset" mat-raised-button color="accent" (click)="clearForm();">
                                    <i class="material-icons" aria-hidden="true">
                                        restore
                                    </i>
                                    Reset
                                </button>
                            </div>

                        </div>
                    </form>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
        <div class="col-sm-4 offset-sm-8 mt-2"></div>
        <div class="mat-elevation-z8">
                <table mat-table aria-describedby="newWorkList" [dataSource]="dataSource" matSort>
                    <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Sr. No.</th>
                        <td mat-cell *matCellDef="let element" class="centerAlign"> {{element.position}} </td>
                    </ng-container>
                    <ng-container matColumnDef="formType">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Form Type</th>
                        <td mat-cell *matCellDef="let element"> {{element.formType}} </td>
                    </ng-container>

                    <ng-container matColumnDef="finYear">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Financial Year</th>
                        <td mat-cell *matCellDef="let element"> {{element.finYear}} </td>
                    </ng-container>

                    <!-- <ng-container matColumnDef="HOD">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>HOD </th>
                        <td mat-cell *matCellDef="let element"> {{element.HOD}} </td>
                    </ng-container> -->

                    <ng-container matColumnDef="demand">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Demand </th>
                        <td mat-cell *matCellDef="let element"> {{element.demand}} </td>
                    </ng-container>

                    <ng-container matColumnDef="majorHead">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Major Head </th>
                        <td mat-cell *matCellDef="let element"> {{element.majorHead}} </td>
                    </ng-container>

                    <ng-container matColumnDef="subMajorHead">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Sub Major Head </th>
                        <td mat-cell *matCellDef="let element"> {{element.subMajorHead}} </td>
                    </ng-container>

                    <ng-container matColumnDef="minorHead">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Minor Head </th>
                        <td mat-cell *matCellDef="let element"> {{element.minorHead}} </td>
                    </ng-container>

                    <ng-container matColumnDef="subHead">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Sub Head </th>
                        <td mat-cell *matCellDef="let element"> {{element.subHead}} </td>
                    </ng-container>

                    <ng-container matColumnDef="detailHead">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Detail Head </th>
                        <td mat-cell *matCellDef="let element"> {{element.detailHead}} </td>
                    </ng-container>

                    <ng-container matColumnDef="objectHead">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Object Head </th>
                        <td mat-cell *matCellDef="let element"> {{element.objectHead}} </td>
                    </ng-container>

                    <ng-container matColumnDef="chargeVoted">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Charged / Voted</th>
                        <td mat-cell *matCellDef="let element"> {{element.chargeVoted}} </td>
                    </ng-container>

                    <ng-container matColumnDef="CSS">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>CSS</th>
                        <td mat-cell *matCellDef="let element"> {{element.CSS}} </td>
                    </ng-container>

                    <!-- <ng-container matColumnDef="needProcessing">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Need Processing</th>
                        <td mat-cell *matCellDef="let element"> {{element.needProcessing}} </td>
                    </ng-container> -->

                    <ng-container matColumnDef="fileRefNo">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Reference No. </th>
                        <td mat-cell *matCellDef="let element"> {{element.fileRefNo}} </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                        <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header> Status </th>
                        <td mat-cell *matCellDef="let element; let i = index;let row;">
                            {{element.status}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef scope="row" style="width: 8%;"> Action </th>
                        <td mat-cell *matCellDef="let element;let i = index;" class="action-btn-i centerAlign">
                            <a [routerLink]="'../new-work-estimate'"><i class="material-icons plus edit-icon"
                                    title="Edit"> edit </i></a>
                            <a [routerLink]="'../new-work-view'"><i class="material-icons plus view-icon"
                                    title="View">remove_red_eye</i></a>
                            <!-- <a *ngIf="element.status === '100%'" (click)="sendTo(element)"><i
                                    class="material-icons plus send-icon" title="Send to verifier">send</i></a> -->
                            <a class="delete-icon" *ngIf="element.status !== '100%'" (click)="delete(element)"><i
                                    class="material-icons plus delete" title="delete">delete</i></a>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; let i = index;columns: displayedColumns;"></tr>
                </table>
                <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
            
        </div>
    </div>
</div>
<!-- <div class="row">
            <div class="col-sm-6 offset-4">
                    <div class="form-group">
                       <button type="submit" class="btn" mat-raised-button color="primary"> Delete </button>
                       <button type="submit" class="btn" mat-raised-button color="primary" (click)="gotonext()"> Create Estimate </button>
                       <button type="submit" class="btn" mat-raised-button color="primary"> Create Correction</button>
                    </div>
            </div>
    </div> -->