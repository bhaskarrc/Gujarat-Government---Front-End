<div class="container">
  <div class="form-wrapper">

    <div class="heading-section ng-star-inserted">
      <div>List of Standing Charge Consolidate
      </div>
    </div>

    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Budget</a></li>
        <li class="breadcrumb-item active" aria-current="page">List of
          Standing Charge Consolidate</li>
      </ol>
    </nav>

    <!-- Standing Charge Consolidate List Search Section Starts-->
    <mat-accordion class="search-accordian">
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <div class="heading-section">
            Search
          </div>
        </mat-expansion-panel-header>
        <div class="form-datatable-list">
          <form class="col-sm-12" [formGroup]="searchListForm">
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="finYear" placeholder="Financial
                    Year" #singleSelect1>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="finYearCtrl" [placeholderLabel]="'Find Financial Year...'"
                        [noEntriesFoundLabel]="'no
                        matching Financial Year found'">
                      </ngx-mat-select-search>
                    </mat-option>

                    <mat-option *ngFor="let FY of
                      filteredFinYear | async" [value]="FY.value">
                      {{FY.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="majorHeadCode" placeholder="Major
                    Head">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="majorHeadCodeCtrl" [placeholderLabel]="'Find Major Head...'"
                        [noEntriesFoundLabel]="'no
                        matching Major Head found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let majorHead of
                      filteredMajorlist |
                      filterSelectInput:majorHeadCodeCtrl.value" [value]="majorHead.value">
                      {{majorHead.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="revenuecapital" placeholder="Revenue / Capital">
                    <mat-option *ngFor="let revenu of reveList" [value]="revenu.value">
                      {{revenu.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput type="text" formControlName="refNO" placeholder="Reference No.">
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="statusd" placeholder="Status" (selectionChange)="ontoken($event)">
                    <mat-option *ngFor="let statu of statuslist" [value]="statu.value">
                      {{statu.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="isTokentable">
                <mat-form-field class="full-width">
                  <input matInput type="text" formControlName="approvedBy" placeholder="{{rangeTypeValue}} By">
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="isTokentable">
                <mat-form-field>
                  <input matInput [matDatepicker]="approveDatepickerfr" formControlName="apporRefDate"
                    placeholder="{{rangeTypeValue}} On From Date">
                  <mat-datepicker-toggle matSuffix [for]="approveDatepickerfr"></mat-datepicker-toggle>
                  <mat-datepicker #approveDatepickerfr></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="isTokentable">
                <mat-form-field>
                  <input matInput [matDatepicker]="approvefDatepickerto" formControlName="apporReftDate"
                    placeholder="{{rangeTypeValue}} On To Date">
                  <mat-datepicker-toggle matSuffix [for]="approvefDatepickerto"></mat-datepicker-toggle>
                  <mat-datepicker #approvefDatepickerto></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="recevie" placeholder="Received
                    From / Sent To" (selectionChange)="onrecevietoken($event)">
                    <mat-option *ngFor="let recevies of receivelist" [value]="recevies.value">
                      {{recevies.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="isToken">
                <mat-form-field class="full-width">
                  <input matInput type="text" formControlName="receiveddata" placeholder="{{receiveValue}}">
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="refDatepickerfr" formControlName="frRefDate"
                    placeholder="Received On /Sent On From Date">
                  <mat-datepicker-toggle matSuffix [for]="refDatepickerfr"></mat-datepicker-toggle>
                  <mat-datepicker #refDatepickerfr></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="refDatepickerto" formControlName="frRefDate"
                    placeholder="Received On /Sent On To Date">
                  <mat-datepicker-toggle matSuffix [for]="refDatepickerto"></mat-datepicker-toggle>
                  <mat-datepicker #refDatepickerto></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="Datepickerfrom" formControlName="datepickerfrom"
                    placeholder="Reference From Date">
                  <mat-datepicker-toggle matSuffix [for]="Datepickerfrom"></mat-datepicker-toggle>
                  <mat-datepicker #Datepickerfrom></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput [matDatepicker]="Datepickerto" formControlName="datepickerfrom"
                    placeholder="Reference To Date">
                  <mat-datepicker-toggle matSuffix [for]="Datepickerto"></mat-datepicker-toggle>
                  <mat-datepicker #Datepickerto></mat-datepicker>
                </mat-form-field>
              </div>


            </div>
          </form>
        </div>

        <!-- Action Buttons -->
        <div class="row displayBlock form-action-button">
          <div class="centerAlign">
            <button type="submit" mat-raised-button color="primary">
              <i class="material-icons" aria-hidden="true">search</i>
              Search
            </button>
            <button type="reset" mat-raised-button color="accent">
              <i class="material-icons" aria-hidden="true">
                restore
              </i>
              Reset
            </button>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <!-- Standing Charge Consolidate List Search Section Ends-->

    <div class="mat-elevation-z8 mt-2">
      <!-- Table Section Starts -->
      <table mat-table [dataSource]="dataSource" width="100%" matSort>
        <!-- Sr No. -->
        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">
            srno. </th>
          <td mat-cell *matCellDef="let element; let i= index;" class="centerAlign">
            {{ i + 1 }} </td>
        </ng-container>
        <ng-container matColumnDef="head1">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Sr No.</th>
        </ng-container>

        <!-- Budget Head -->
        <ng-container matColumnDef="budgetHead">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Financial Year</th>
          <td mat-cell *matCellDef="let element"> {{element.budgetHead}}
          </td>
        </ng-container>
        <ng-container matColumnDef="head2">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Budget Head </th>
        </ng-container>

        <!-- No. of DDOs -->
        <ng-container matColumnDef="noDDOs">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}"> </th>
          <td mat-cell *matCellDef="let element">
            <a class="hyper-link" (click)="loadDDOList(element)">{{element.noDDOs}}</a>
          </td>
        </ng-container>

        <ng-container matColumnDef="head3">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">No. of DDOs</th>
        </ng-container>

        
        <!-- Consolidated Proposed Amount -->
        <!-- DDO  -->
        <ng-container matColumnDef="ddo">
          <th mat-header-cell *matHeaderCellDef> DDO </th>
          <td mat-cell *matCellDef="let element"> {{element.ddo}} </td>
        </ng-container>

        <!-- CO/HoD -->
        <ng-container matColumnDef="cohod">
          <th mat-header-cell *matHeaderCellDef> CO/HoD</th>
          <td mat-cell *matCellDef="let element"> {{element.cohod}} </td>
        </ng-container>

        <!-- AD  -->
        <ng-container matColumnDef="ad">
          <th mat-header-cell *matHeaderCellDef> AD </th>
          <td mat-cell *matCellDef="let element"> {{element.ad}} </td>
        </ng-container>

        <!-- FD -->
        <ng-container matColumnDef="fd">
          <th mat-header-cell *matHeaderCellDef> FD</th>
          <td mat-cell *matCellDef="let element"> {{element.cohod}} </td>
        </ng-container>

        <ng-container matColumnDef="head4">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="4">Consolidated Proposed Amount</th>
        </ng-container>

        <!-- Reference No. -->
        <ng-container matColumnDef="refNo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Reference No. </th>
          <td mat-cell *matCellDef="let element">
            {{element.refNo}} </td>
        </ng-container>
        <ng-container matColumnDef="head6">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Reference No.</th>
        </ng-container>

        <!-- Received From Received On -->
        <ng-container matColumnDef="receivedOnFrom">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Received From Received On</th>
          <td mat-cell *matCellDef="let element">
            {{element.receivedOnFrom}} </td>
        </ng-container>
        <ng-container matColumnDef="head7">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Received From Received On</th>
        </ng-container>

        <!-- Sent To Sent On -->
        <ng-container matColumnDef="sentToOn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Sent To Sent On</th>
          <td mat-cell *matCellDef="let element">
            {{element.sentToOn}} </td>
        </ng-container>
        <ng-container matColumnDef="head8">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Sent To Sent On</th>
        </ng-container>

        <!-- Lying With -->
        <ng-container matColumnDef="lyingWith">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">
            Lying With

          </th>
          <td mat-cell *matCellDef="let element">
            {{element.lyingWith}} </td>
        </ng-container>
        <ng-container matColumnDef="head9">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Lying With</th>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">
            Status
          </th>
          <td mat-cell *matCellDef="let element">
            <a matTooltip="{{element.tooltip}}"> {{element.status}} </a></td>
        </ng-container>
        <ng-container matColumnDef="head10">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Status</th>
        </ng-container>

        <!-- Action -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Action</th>
          <td mat-cell *matCellDef="let element;let i= index;" class="action-btn-i centerAlign">
            <a class="delete-icon" *ngIf="element.status=='-'"><i class="material-icons rotate-180 plus delete" (click)="consolidate()" title="Consolidate">
                device_hub</i>
            </a>

            <a *ngIf="element.status=='Draft' || element.status=='Pending'">
              <i class="material-icons plus edit-icon" (click)="consolidatePage()" aria-hidden="true" title="Edit"> edit </i>
            </a>

            <a *ngIf="element.status=='Draft' || element.status=='Pending' || element.status=='Rejected' || element.status=='Approved'">
              <i class="material-icons plus view-icon" title="Detail View" (click)="consolidateView()">remove_red_eye</i>
            </a>

            <a *ngIf="element.status=='Draft' || element.status=='Pending' || element.status=='Rejected' || element.status=='Approved'">
              <i class="material-icons plus" (click)="showHistoryDialog()" aria-hidden="true" title="History Detail">receipt</i>
            </a>
          </td>
        </ng-container>
        <ng-container matColumnDef="head11">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Action</th>
        </ng-container>

        <!-- Main Header of Table -->
        <tr mat-header-row
          *matHeaderRowDef="['head1','head2','head3','head4','head6','head7','head8','head9','head10','head11']"></tr>
        <!-- Sub Header of Table -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <!-- Data Fetch From .TS File to table -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <!-- Table Section Ends -->

      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>
