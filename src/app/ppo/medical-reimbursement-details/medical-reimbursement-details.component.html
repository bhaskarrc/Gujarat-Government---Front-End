<mat-accordion class="search-accordian">
    <mat-expansion-panel [expanded]="false">
        <mat-expansion-panel-header>
            <div class="heading-section">
                Medical Reimbursement Details
            </div>
        </mat-expansion-panel-header>

        <div class=" form-datatable-list">
            <form class="col-sm-12 grey-text" [formGroup]="mRReimbursement" (ngSubmit)="onSubmit()">
                <div class="row">

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Financial Year" formControlName="financialYear" required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.financialYear.touched && mRReimbursement.controls.financialYear.errors">
                                <mat-error *ngIf="mRReimbursement.controls.financialYear.errors.required">
                                    {{errMsg.FINANCIAL_YEAR}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Inward No." formControlName="inwardNo" numbersAlphabetsOnly required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.inwardNo.touched && mRReimbursement.controls.inwardNo.errors">
                                <mat-error *ngIf="mRReimbursement.controls.inwardNo.errors.required">
                                    {{errMsg.INWARD_NO}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>


                    <div class="col-sm-3">
                        <mat-form-field>
                            <input matInput formControlName="InwardDate" [matDatepicker]="InwardDate" placeholder="Inward Date">
                            <mat-datepicker-toggle matSuffix [for]="InwardDate" required>
                            </mat-datepicker-toggle>
                            <mat-datepicker #InwardDate></mat-datepicker>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.InwardDate.touched && mRReimbursement.controls.InwardDate.errors">
                                <mat-error *ngIf="mRReimbursement.controls.InwardDate.errors.required">
                                    {{errMsg.INWARD_DATE}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="PPO Number" formControlName="ppoNo" numbersAlphabetsOnly required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.ppoNo.touched && mRReimbursement.controls.ppoNo.errors">
                                <mat-error *ngIf="mRReimbursement.controls.ppoNo.errors.required">
                                    {{errMsg.PPO_NUM}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Name of Pensioner" formControlName="pensionerName" alphabetOnly required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.pensionerName.touched && mRReimbursement.controls.pensionerName.errors">
                                <mat-error *ngIf="mRReimbursement.controls.pensionerName.errors.required">
                                    {{errMsg.PENSIONER_NAME}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Bank Code" formControlName="bankCode" numbersOnly required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.bankCode.touched && mRReimbursement.controls.bankCode.errors">
                                <mat-error *ngIf="mRReimbursement.controls.bankCode.errors.required">
                                    {{errMsg.BANK_CODE}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Branch" formControlName="branch" required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.branch.touched && mRReimbursement.controls.branch.errors">
                                <mat-error *ngIf="mRReimbursement.controls.branch.errors.required">
                                    {{errMsg.BRANCH}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <mat-select formControlName="paymentMode" placeholder="Payment Mode" #singleSelect1 required>
                                <mat-option>
                                    <ngx-mat-select-search [formControl]="paymentModeCtrl" [placeholderLabel]="'Find Pension Case Types...'" [noEntriesFoundLabel]="'no matching Pension Case Types found'">
                                    </ngx-mat-select-search>
                                </mat-option>
                                <mat-option *ngFor="let paymentMode of paymentMode_list | filterSelectInput: paymentModeCtrl.value" [value]="paymentMode.value">
                                    {{paymentMode.viewValue}}
                                </mat-option>
                            </mat-select>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.paymentMode.touched && mRReimbursement.controls.paymentMode.errors">
                                <mat-error *ngIf="mRReimbursement.controls.paymentMode.errors.required">
                                    {{errMsg.PAYMENT_MODE}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Head Code" formControlName="headCode" required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.headCode.touched && mRReimbursement.controls.headCode.errors">
                                <mat-error *ngIf="mRReimbursement.controls.headCode.errors.required">
                                    {{errMsg.HEAD_CODE}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <mat-select formControlName="medicalAllowance" placeholder="Medical Allowance" #singleSelect1 required>
                                <mat-option>
                                    <ngx-mat-select-search [formControl]="medicalAllowanceCtrl" [placeholderLabel]="'Find Pension Case Types...'" [noEntriesFoundLabel]="'no matching Pension Case Types found'">
                                    </ngx-mat-select-search>
                                </mat-option>
                                <mat-option *ngFor="let medicalAllowance of medicalAllowance_list | filterSelectInput: medicalAllowanceCtrl.value" [value]="medicalAllowance.value">
                                    {{medicalAllowance.viewValue}}
                                </mat-option>
                            </mat-select>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.medicalAllowance.touched && mRReimbursement.controls.medicalAllowance.errors">
                                <mat-error *ngIf="mRReimbursement.controls.medicalAllowance.errors.required">
                                    {{errMsg.MEDICAL_ALLOWANCE}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Medical Allowance Amount" formControlName="medicalAllowanceAmt" required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.medicalAllowanceAmt.touched && mRReimbursement.controls.medicalAllowanceAmt.errors">
                                <mat-error *ngIf="mRReimbursement.controls.medicalAllowanceAmt.errors.required">
                                    {{errMsg.MEDICAL_ALLOWANCE_AMT}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Reimbursement Amount" formControlName="reimbursementAmt" required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.reimbursementAmt.touched && mRReimbursement.controls.reimbursementAmt.errors">
                                <mat-error *ngIf="mRReimbursement.controls.reimbursementAmt.errors.required">
                                    {{errMsg.REIMBURSEMENT_AMOUNT}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                    <div class="col-sm-3">
                        <mat-form-field class="full-width">
                            <input matInput type="text" placeholder="Auditor Name" formControlName="auditorName" required>
                            <div class="error-wrapper" *ngIf="mRReimbursement.controls.auditorName.touched && mRReimbursement.controls.auditorName.errors">
                                <mat-error *ngIf="mRReimbursement.controls.auditorName.errors.required">
                                    {{errMsg.AUDITOR_NAME}}</mat-error>
                            </div>
                        </mat-form-field>
                    </div>

                </div>
            </form>
        </div>
    </mat-expansion-panel>
</mat-accordion>

<div class="mat-elevation-z8 table-responsive mt-2 fixed-height-1">
    <!-- table starts -->
    <table mat-table [dataSource]="dataSource" width="100%" matSort aria-describedby="MedicalReimbursement" style="overflow-x: auto;display: block;overflow-y: hidden; margin-top: 20px;">
        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef scope="row">
                Sr No.
            </th>
            <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
                {{ i + 1 }}
            </td>
        </ng-container>
        <ng-container matColumnDef="patientName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Patient Name</th>
            <td mat-cell *matCellDef="let element">

                <mat-form-field class="full-width">
                    <mat-select value="{{ element.patientName }}" #singleSelect1 (selectionChange)="fillTheTable($event)" required>
                        <mat-option>
                            <ngx-mat-select-search [formControl]="patientNameCtrl" [placeholderLabel]="'Find patient Name...'" [noEntriesFoundLabel]="'no matching patient Name found'">
                            </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let patientName of patientName_list | filterSelectInput: patientNameCtrl.value" [value]="patientName.value">
                            {{patientName.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="relation">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">relation</th>
            <td mat-cell *matCellDef="let element">

                <mat-form-field class="full-width">
                    <input matInput type="text" value="{{ element.relation }}" required>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="age">
            <th mat-header-cell *matHeaderCellDef scope="row">age</th>
            <td mat-cell *matCellDef="let element">
                <mat-form-field class="full-width">
                    <input matInput type="text" value="{{ element.age }}" required>
                </mat-form-field>
            </td>
        </ng-container>

        <ng-container matColumnDef="hospitalName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Hospital Category</th>
            <td mat-cell *matCellDef="let element">

                <mat-form-field class="full-width">
                    <mat-select value="{{ element.hospitalName }}" #singleSelect1 required>
                        <mat-option>
                            <ngx-mat-select-search [formControl]="hospitalNameCtrl" [placeholderLabel]="'Find Hospital Name...'" [noEntriesFoundLabel]="'no matching Hospital Name found'">
                            </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let hospitalName of hospitalName_list | filterSelectInput: hospitalNameCtrl.value" [value]="hospitalName.value">
                            {{hospitalName.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="treatmentFrom">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row" required>Treatment From</th>
            <td mat-cell *matCellDef="let element">

                <mat-form-field>
                    <input matInput [matDatepicker]="treatmentFrom">
                    <mat-datepicker-toggle matSuffix [for]="treatmentFrom">
                    </mat-datepicker-toggle>
                    <mat-datepicker #treatmentFrom></mat-datepicker>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="treatmentTo">
            <th mat-header-cell *matHeaderCellDef scope="row" required>Treatment To </th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input matInput [matDatepicker]="treatmentTo">
                    <mat-datepicker-toggle matSuffix [for]="treatmentTo">
                    </mat-datepicker-toggle>
                    <mat-datepicker #treatmentTo></mat-datepicker>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="disease">
            <th mat-header-cell *matHeaderCellDef scope="row" required>Disease</th>
            <td mat-cell *matCellDef="let element">
                <mat-form-field class="full-width">
                    <mat-select value="{{ element.disease }}" #singleSelect1>
                        <mat-option>
                            <ngx-mat-select-search [formControl]="diseaseCtrl" [placeholderLabel]="'Find Disease Types...'" [noEntriesFoundLabel]="'no matching Disease found'">
                            </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let disease of disease_list | filterSelectInput: diseaseCtrl.value" [value]="disease.value">
                            {{disease.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </td>
        </ng-container>

        <ng-container matColumnDef="headHearingDevice">
            <th mat-header-cell *matHeaderCellDef scope="row">Hearing Aid Machine</th>
            <td mat-cell *matCellDef="let element" class="centerAlign">

                <mat-checkbox matInput [(ngModel)]="checked"> </mat-checkbox>
                <mat-form-field *ngIf="checked" style="width: 75%; margin-left: 5px;">
                    <mat-select value="{{ element.headHearingDevice }}" #singleSelect1>
                        <mat-option>
                            <ngx-mat-select-search [formControl]="HeadHearingCtrl" [placeholderLabel]="'Find Head Hearing...'" [noEntriesFoundLabel]="'no matching Head Hearing found'">
                            </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let HeadHearing of HeadHearing_list | filterSelectInput: HeadHearingCtrl.value" [value]="HeadHearing.value">
                            {{HeadHearing.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>


            </td>
        </ng-container>

        <ng-container matColumnDef="kneeReplacement">
            <th mat-header-cell *matHeaderCellDef scope="row">Knee Replacement</th>
            <td mat-cell *matCellDef="let element" class="centerAlign">

                <mat-checkbox matInput [(ngModel)]="kneeChecked"> </mat-checkbox>

            </td>
        </ng-container>

        <ng-container matColumnDef="reimbursementAmt">
            <th mat-header-cell *matHeaderCellDef scope="row">Reimbursement Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.reimbursementAmt" class="rightAlign" decimalLimitTwoOnly value="{{element.reimbursementAmt}}" decimalPoint2 [ngModelOptions]="{standalone: true}" required>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="indoorPatient">
            <th mat-header-cell *matHeaderCellDef scope="row">Indoor Patient</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field class="full-width">
                    <mat-select value="{{ element.indoorPatient }}" #singleSelect1 required>
                        <mat-option>
                            <ngx-mat-select-search [formControl]="indoorPatientCtrl" [placeholderLabel]="'Find indoor Patient Types...'" [noEntriesFoundLabel]="'no matching indoor Patient found'">
                            </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let indoorPatient of indoorPatient_list | filterSelectInput: indoorPatientCtrl.value" [value]="indoorPatient.value">
                            {{indoorPatient.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="permissibleAmt1">
            <th mat-header-cell *matHeaderCellDef scope="row"> Permisible Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.permissibleAmt1" class="rightAlign" decimalLimitTwoOnly value="{{element.permissibleAmt1}}" decimalPoint2 [ngModelOptions]="{standalone: true}" required readonly>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="deductionOnAmt">
            <th mat-header-cell *matHeaderCellDef scope="row">Deduction Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.deductionOnAmt" class="rightAlign" decimalLimitTwoOnly value="{{element.deductionOnAmt}}" decimalPoint2 [ngModelOptions]="{standalone: true}">
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="grantedAmt">
            <th mat-header-cell *matHeaderCellDef scope="row">Granted Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.grantedAmt" class="rightAlign" decimalLimitTwoOnly decimalPoint2 [ngModelOptions]="{standalone: true}" required>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef scope="row"> Action </th>
            <td mat-cell *matCellDef="let element;let i = index;" class="action-btn-i centerAlign" style="min-width: 65px;">

                <a [routerLink]="'../change-of-scale-emp-creation'" (click)="addRow()"><i
                        class="material-icons plus view-icon" title="Add" aria-hidden="true"
                        *ngIf="i==(dataSource.data.length-1)">add</i></a>

                <a [routerLink]="'../change-of-scale-emp-creation'" (click)="deleteRow(i)" *ngIf="i>=1"><i
                        class="material-icons plus edit-icon" title="Delete" aria-hidden="true"> delete </i></a>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; let i = index;columns: displayedColumns;"></tr>
    </table>


</div>

<div class="mat-elevation-z8 table-responsive mt-2">
    <table mat-table [dataSource]="dataSource2" width="100%" matSort aria-describedby="MedicalReimbursement">

        <ng-container matColumnDef="permisibleAmt">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Reimbursement Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.permisibleAmt" class="rightAlign" decimalLimitTwoOnly decimalPoint2 [ngModelOptions]="{standalone: true}">
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="deductionAmt">
            <th mat-header-cell *matHeaderCellDef scope="row">Deduction Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.deductionAmt" class="rightAlign" decimalLimitTwoOnly decimalPoint2 [ngModelOptions]="{standalone: true}">
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="GrantedAmt">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Granted Amount</th>
            <td mat-cell *matCellDef="let element" class="rightAlign">

                <mat-form-field>
                    <input tabindex="2" matInput [(ngModel)]="element.grantedAmt" class="rightAlign" decimalLimitTwoOnly decimalPoint2 [ngModelOptions]="{standalone: true}">
                </mat-form-field>

            </td>
        </ng-container>
        <!-- Header Section Of table -->
        <tr mat-header-row *matHeaderRowDef="['permisibleAmt', 'deductionAmt', 'GrantedAmt']"></tr>
        <!-- Data Fetch From .TS File to table -->
        <tr mat-row *matRowDef="let row; let i = index;columns: ['permisibleAmt', 'deductionAmt', 'GrantedAmt'];">
        </tr>
    </table>
    <!-- table ends -->

</div>

<div class="text-area-width">
    <mat-form-field class="full-width">
        <textarea matInput placeholder="Objection Remarks"></textarea>
    </mat-form-field>
</div>

<div class="mat-elevation-z8 table-responsive mt-2 fixed-height">
    <!-- table starts -->
    <table mat-table [dataSource]="objectionDataSource" width="100%" matSort aria-describedby="MedicalReimbursement">

        <ng-container matColumnDef="checkbox">
            <th mat-header-cell *matHeaderCellDef scope="row">
                <mat-checkbox (change)="$event ? directiveObj.masterToggle(objectionDataSource) : null" [checked]="directiveObj.selection.hasValue() && directiveObj.isAllSelected(objectionDataSource)" [indeterminate]="directiveObj.selection.hasValue() && !directiveObj.isAllSelected(objectionDataSource)"
                    [aria-label]="directiveObj.checkboxLabel(objectionDataSource)">
                </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row" class="centerAlign">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? directiveObj.selection.toggle(row) : null" [checked]="directiveObj.selection.isSelected(row)" [aria-label]="directiveObj.checkboxLabel(objectionDataSource,row)">
                </mat-checkbox>
            </td>
        </ng-container>

        <ng-container matColumnDef="objectionCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Objection Code</th>
            <td mat-cell *matCellDef="let element">
                {{element.objectionCode}}
            </td>
        </ng-container>

        <ng-container matColumnDef="objectionDesc">
            <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row">Objection Desc</th>
            <td mat-cell *matCellDef="let element">
                {{element.objectionDesc}} </td>
        </ng-container>
        <!-- Header Section Of table -->
        <tr mat-header-row *matHeaderRowDef="displayedObjectionColumns; sticky: true"></tr>
        <!-- Data Fetch From .TS File to table -->
        <tr mat-row *matRowDef="let row; let i = index;columns: displayedObjectionColumns;"></tr>
    </table>
    <!-- table ends -->
</div>
<!-- Common Button -->

<div class="form-action-button">

    <button mat-raised-button color="primary">
        <i class="material-icons" title="Submit" aria-hidden="true">save</i> Save</button>

    <button type="reset" mat-raised-button color="accent" title="Reset" (click)="resetForm()">
        <i class="material-icons" title="Reset" aria-hidden="true">
            restore
        </i>
        Reset
    </button>
    <button type="button" mat-raised-button class="print-btn" title="Print">
        <i class="material-icons" title="Print" aria-hidden="true">
            print
        </i>
        Print
    </button>
    <button type="button" mat-raised-button class="btnClose" title="Close" (click)="onClose()">
        <i class="material-icons" title="Close" aria-hidden="true">
            close
        </i>
        Close
    </button>

</div>
<!-- Common Button ends-->