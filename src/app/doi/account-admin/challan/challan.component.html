<div class="container">
    <div class="form-wrapper">
        <div class="heading-section ng-star-inserted">
            <div>Challan </div>
            <div class="font-heading"><strong>Reference Number:</strong> 19-20/DOI/CH/DSR/001</div>
            <div class="font-heading"><strong>Reference Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}
            </div>
        </div>

        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item " aria-current="page">DOI / Account Admin</li>
                <li class="breadcrumb-item active" aria-current="page">Challan </li>
            </ol>
        </nav>
        <!-- Challan -->
        <div class="box box-primary">
            <div class="box-header">Challan</div>
            <div class="box-body">
                <form [formGroup]="challanForm">
                    <div class="row">
                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <input matInput type="text" formControlName="challanNo" placeholder="Challan Number"
                                    numbersOnly required>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.challanNo.touched && (challanForm.controls.challanNo.errors)">
                                    <mat-error *ngIf="challanForm.controls.challanNo.errors.required">
                                        {{errorMessage.CHALLAN_NO}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput name="chequeNo" maxlength="12" numbersOnly placeholder="Cheque No."
                                    formControlName="chequeNo" required numbersOnly>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.chequeNo.touched || (challanForm.controls.chequeNo.errors && isSubmitted)">
                                    <mat-error *ngIf="challanForm.controls.chequeNo.errors?.required">
                                        {{errorMessage.CHEQUE_NO}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput [matDatepicker]="picker" formControlName="chequeDate"
                                    placeholder="Cheque Date" [max]='maxDate' required readonly>
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.chequeDate.touched && (challanForm.controls.chequeDate.errors)">
                                    <mat-error *ngIf="challanForm.controls.chequeDate.errors.required">
                                        {{errorMessage.DATE}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <input matInput type="text" placeholder="Amount" formControlName="amt" required
                                    numbersOnly>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.amt.touched && (challanForm.controls.amt.errors)">
                                    <mat-error *ngIf="challanForm.controls.amt.errors.required">
                                        {{errorMessage.AMOUNT}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput placeholder="Amount In Words" formControlName="amtInWords"
                                    class="regularText text-capitalize" required readonly>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.amtInWords.touched && (challanForm.controls.amtInWords.errors)">
                                    <mat-error *ngIf="challanForm.controls.amtInWords.errors.required">
                                        {{errorMessage.AMOUNT_IN_WORDS}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput formControlName="partyName" placeholder="Party Name" required>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.partyName.touched && (challanForm.controls.partyName.errors)">
                                    <mat-error *ngIf="challanForm.controls.partyName.errors.required">
                                        {{errorMessage.PARTY_NAME}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput formControlName="description" placeholder="Description" required>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.description.touched && (challanForm.controls.description.errors)">
                                    <mat-error *ngIf="challanForm.controls.description.errors.required">
                                        {{errorMessage.DESCRIPTION}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="majorHead" placeholder="Major Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="majorHeadCtrl"
                                            [placeholderLabel]="'Find Major Head...'"
                                            [noEntriesFoundLabel]="'no matching Major Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let majorhead of majorHead_list | filterSelectInput: majorHeadCtrl.value"
                                        [value]="majorhead.value" [matTooltip]="majorhead.viewValue">
                                        {{majorhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.majorHead.touched && (challanForm.controls.majorHead.errors)">
                                    <mat-error *ngIf="challanForm.controls.majorHead.errors.required">
                                        {{errorMessage.MAJOR_HEAD}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="minorHead" placeholder="Minor Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="minorHeadCtrl"
                                            [placeholderLabel]="'Find Minor Head...'"
                                            [noEntriesFoundLabel]="'no matching Minor Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let minorhead of minorHead_list | filterSelectInput: minorHeadCtrl.value"
                                        [value]="minorhead.value" [matTooltip]="minorhead.viewValue">
                                        {{minorhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.minorHead.touched && (challanForm.controls.minorHead.errors)">
                                    <mat-error *ngIf="challanForm.controls.minorHead.errors.required">
                                        {{errorMessage.MINOR_HEAD}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="subHead" placeholder="Sub Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="subHeadCtrl"
                                            [placeholderLabel]="'Find Sub Head...'"
                                            [noEntriesFoundLabel]="'no matching Sub Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let subhead of subHead_list | filterSelectInput: subHeadCtrl.value"
                                        [value]="subhead.value" [matTooltip]="subhead.viewValue">
                                        {{subhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.subHead.touched && (challanForm.controls.subHead.errors)">
                                    <mat-error *ngIf="challanForm.controls.subHead.errors.required">
                                        {{errorMessage.SUB_HEAD}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field class="full-width">
                                <mat-select formControlName="detailHead" placeholder="Detailed Head" required>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="detailHeadCtrl"
                                            [placeholderLabel]="'Find Detailed Head...'"
                                            [noEntriesFoundLabel]="'no matching Detailed Head found'">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option
                                        *ngFor="let detailhead of detailHead_list | filterSelectInput: detailHeadCtrl.value"
                                        [value]="detailhead.value" [matTooltip]="detailhead.viewValue">
                                        {{detailhead.viewValue}}
                                    </mat-option>
                                </mat-select>
                                <div class="error-wrapper"
                                    *ngIf="challanForm.controls.detailHead.touched && (challanForm.controls.detailHead.errors)">
                                    <mat-error *ngIf="challanForm.controls.detailHead.errors.required">
                                        {{errorMessage.DETAILED_HEAD}}
                                    </mat-error>
                                </div>
                            </mat-form-field>
                        </div>

                        <div class="col-sm-3">
                            <mat-form-field>
                                <input matInput formControlName="mobile" placeholder="Mobile Number">
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="form-action-button">
                        <button type="submit" mat-raised-button color="primary" (click)="addRecord()" title="Add">
                            <i class="material-icons" aria-hidden="true"> add </i> Add </button>
                        <button type="reset" mat-raised-button color="accent" title="Reset">
                            <i class="material-icons" title="Reset" aria-hidden="true">restore</i>
                            Reset
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <!-- End Challan -->
        <!-- table -->
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 mt-2">
            <ng-container matColumnDef="position">
                <th mat-header-cell *matHeaderCellDef scope="row"> No. </th>
                <td mat-cell *matCellDef="let element let i = index" class="centerAlign"> {{i + 1}}</td>
            </ng-container>

            <ng-container matColumnDef="challanNo">
                <th mat-header-cell *matHeaderCellDef scope="row">Challan Number</th>
                <td mat-cell *matCellDef="let element">
                    {{element.challanNo}}
                </td>
            </ng-container>

            <ng-container matColumnDef="chequeNo">
                <th mat-header-cell *matHeaderCellDef scope="row">Cheque Number</th>
                <td mat-cell *matCellDef="let element">
                    {{element.chequeNo}}
                </td>
            </ng-container>

            <ng-container matColumnDef="chequeDate">
                <th mat-header-cell *matHeaderCellDef scope="row">Cheque Date</th>
                <td mat-cell *matCellDef="let element">
                    {{element.chequeDate}}
                </td>
            </ng-container>

            <ng-container matColumnDef="amt">
                <th mat-header-cell *matHeaderCellDef scope="row">Amount</th>
                <td mat-cell *matCellDef="let element">
                    {{element.amt}}
                </td>
            </ng-container>

            <ng-container matColumnDef="amtInWords">
                <th mat-header-cell *matHeaderCellDef scope="row">Amount(in words)</th>
                <td mat-cell *matCellDef="let element">
                    {{element.amtInWords}}
                </td>
            </ng-container>

            <ng-container matColumnDef="partyName">
                <th mat-header-cell *matHeaderCellDef scope="row">Party Name</th>
                <td mat-cell *matCellDef="let element">
                    {{element.partyName}}
                </td>
            </ng-container>

            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef scope="row">Decription</th>
                <td mat-cell *matCellDef="let element">
                    {{element.description}}
                </td>
            </ng-container>

            <ng-container matColumnDef="majorHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Major Head</th>
                <td mat-cell *matCellDef="let element">
                    {{element.majorHead}}
                </td>
            </ng-container>

            <ng-container matColumnDef="minorHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Minor Head</th>
                <td mat-cell *matCellDef="let element">
                    {{element.minorHead}}
                </td>
            </ng-container>

            <ng-container matColumnDef="subHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Sub Head</th>
                <td mat-cell *matCellDef="let element">
                    {{element.subHead}}
                </td>
            </ng-container>

            <ng-container matColumnDef="detailedHead">
                <th mat-header-cell *matHeaderCellDef scope="row">Detailed Head</th>
                <td mat-cell *matCellDef="let element">
                    {{element.detailedHead}}
                </td>
            </ng-container>

            <ng-container matColumnDef="mobile">
                <th mat-header-cell *matHeaderCellDef scope="row">Mobile Number</th>
                <td mat-cell *matCellDef="let element">
                    {{element.mobile}}
                </td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef scope="row"> Action </th>
                <td mat-cell *matCellDef="let element" class="text-center">
                    <a><i class="material-icons plus edit-icon mr-2" title="Edit"> edit </i></a>
                    <a><i class="material-icons plus view-icon mr-2" title="View">remove_red_eye</i></a>
                </td>
            </ng-container>
            <!-- Header Section Of table -->
            <tr mat-header-row *matHeaderRowDef="columns"></tr>
            <!-- Data Fetch From .TS File to table -->
            <tr mat-row *matRowDef="let row; columns: columns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        <!-- Common Button -->
        <div class="form-action-button">
            <button type="submit" mat-raised-button color="primary">
                <i aria-hidden="true" class="material-icons" title="Save">
                    save
                </i>
                Save as Draft
            </button>
            <button mat-raised-button type="submit" class="green">
                <i aria-hidden="true" class="material-icons">
                    done
                </i>
                Submit
            </button>
            <button type="reset" mat-raised-button color="accent">
                <i class="material-icons" aria-hidden="true">
                    restore
                </i>
                Reset
            </button>
            <button type="button" mat-raised-button color="warn">
                <i class="material-icons" aria-hidden="true" title="Listing">
                    list
                </i>
                Listing
            </button>
            <button type="button" mat-raised-button class="btnClose">
                <i aria-hidden="true" class="material-icons" title="Close">
                    close
                </i>
                Close
            </button>
        </div>
        <!-- End Common Button -->
    </div>
</div>