<div class="container">
    <div class="form-wrapper">
        <div class="heading-section ng-star-inserted">
            <div>Account Transfer </div>
            <div class="font-heading"><strong>Reference Number:</strong> 19-20/GPF/AT/001</div>
            <div class="font-heading"><strong>Reference Date:</strong> {{ todayDate | date: 'dd-MMM-yyyy HH:mm'}}
            </div>
        </div>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Worklist</a></li>
                <li class="breadcrumb-item active" aria-current="page">Account Transfer </li>
            </ol>
        </nav>
        <!-- Top Schedule Details Starts -->
        <mat-accordion class="search-accordian">
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                    <div class="heading-section">
                        Top Schedule Details
                    </div>
                </mat-expansion-panel-header>
                <div class=" form-datatable-list">
                    <form class="col-sm-12" [formGroup]="accountTransferForm">
                        <div class="row">

                            <div class="col-sm-6 col-md-3">
                                <mat-form-field class="full-width">
                                    <input matInput placeholder="Inward No." formControlName='inwardNumber' required (change)="enterInwardNo()">
                                    <mat-icon matSuffix (click)="openInwardDialog()">search</mat-icon>
                                    <div class="error-wrapper" *ngIf=" accountTransferForm.controls.inwardNumber.touched &&accountTransferForm.controls.inwardNumber.errors">
                                        <mat-error *ngIf="accountTransferForm.controls.inwardNumber.errors.required">
                                            {{ errorMessage.INWARD_NUMBER }}
                                        </mat-error>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-sm-6 col-md-3">
                                <mat-form-field>
                                    <mat-label>Inward Date</mat-label>
                                    <input matInput [matDatepicker]="picker" [max]='maxDate' formControlName="dateInward" dateOnly />
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>

                                </mat-form-field>
                            </div>

                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="treasuryPao" placeholder="Treasury/PAO">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfTreasuryPAOCtrl" [placeholderLabel]="'Find Treasury/PAO..'" [noEntriesFoundLabel]="'no matching Treasury/PAO found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfTreasuryPAO
                      | filterSelectInput: typeOfTreasuryPAOCtrl.value
                  " [value]="CE.value" matTooltip="{{ CE.viewValue }}">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>
                            </div>
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="year" placeholder="Year">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfYearCtrl" [placeholderLabel]="'Find Year...'" [noEntriesFoundLabel]="'no matching Year found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfYear
                      | filterSelectInput: typeOfYearCtrl.value
                  " [value]="CE.value">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="month" placeholder="Month">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfMonthCtrl" [placeholderLabel]="'Find Month...'" [noEntriesFoundLabel]="'no matching Month found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfMonth
                      | filterSelectInput: typeOfMonthCtrl.value
                  " [value]="CE.value">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>
                            </div>

                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="creditDebit" placeholder="Credit/Debit">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfCreditDebitCtrl" [placeholderLabel]="'Find Credit/Debit...'" [noEntriesFoundLabel]="'no matching Credit/Debit found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfCreditCredit
                      | filterSelectInput: typeOfCreditDebitCtrl.value
                  " [value]="CE.value">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="tcChallan" placeholder="TC/Challan">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfTcChallanCtrl" [placeholderLabel]="'Find TC/Challan...'" [noEntriesFoundLabel]="'no matching TC/Challan found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfTcChallan
                      | filterSelectInput: typeOfCreditDebitCtrl.value
                  " [value]="CE.value">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" placeholder="Major Head" formControlName="majorHead" decimalLimitTwoOnly maxlength="4" />
                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" placeholder="Major Head Amount" formControlName="majorHeadAmount" decimalLimitTwoOnly maxlength="16" />
                                </mat-form-field>
                            </div>

                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="head" placeholder="Head">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfHeadCtrl" [placeholderLabel]="'Find Head...'" [noEntriesFoundLabel]="'no matching Head found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfHead
                      | filterSelectInput: typeOfHeadCtrl.value
                  " [value]="CE.value" matTooltip="{{ CE.viewValue }}">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>

                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" placeholder="Head Amount" formControlName="headAmount" decimalLimitTwoOnly maxlength="16" />
                                </mat-form-field>
                            </div>



                        </div>
                    </form>
                </div>

            </mat-expansion-panel>
        </mat-accordion>
        <!-- Top Schedule Details Ends -->
        <br>
        <!-- Voucher Details Starts -->
        <mat-accordion class="search-accordian">
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                    <div class="heading-section">
                        Voucher Details
                    </div>
                </mat-expansion-panel-header>
                <div class=" form-datatable-list">
                    <form class="col-sm-12" [formGroup]="accountTransferVoucherForm">
                        <div class="row">
                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <mat-select formControlName="voucherNo" placeholder="Voucher No" required (selectionChange)="selectVoucherNo()">
                                        <mat-option>
                                            <ngx-mat-select-search [formControl]="typeOfVoucherNoCtrl" [placeholderLabel]="'Find Voucher NO...'" [noEntriesFoundLabel]="'no matching Voucher NO found'">
                                            </ngx-mat-select-search>
                                        </mat-option>
                                        <mat-option *ngFor="
                    let CE of classTypeOfVoucherNo
                      | filterSelectInput: typeOfVoucherNoCtrl.value
                  " [value]="CE.value">
                                            {{ CE.viewValue }}
                                        </mat-option>
                                    </mat-select>
                                    <div class="error-wrapper" *ngIf=" accountTransferVoucherForm.controls.voucherNo.touched &&accountTransferVoucherForm.controls.voucherNo.errors">
                                        <mat-error *ngIf="accountTransferVoucherForm.controls.voucherNo.errors.required">
                                            {{ errorMessage.VOUCHER_NUMBER }}
                                        </mat-error>
                                    </div>

                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" placeholder="Voucher Amount" formControlName="voucherAmount" decimalLimitTwoOnly maxlength="16" />
                                </mat-form-field>
                            </div>


                            <div class="col-sm-3">
                                <mat-form-field class="full-width">
                                    <input matInput type="text" placeholder="DDO" formControlName="ddo" />
                                </mat-form-field>
                            </div>




                        </div>
                    </form>
                </div>

            </mat-expansion-panel>
        </mat-accordion>
        <!-- Voucher Details Ends -->
        <br>
        <!-- Account Wise DetailsStarts -->
        <mat-accordion class="search-accordian">
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header>
                    <div class="heading-section">
                        Account Wise Details
                    </div>
                </mat-expansion-panel-header>
                <div class="box-body">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="mat-elevation-z8 table-responsive">

                                <table mat-table [dataSource]="recoveryDataSource" aria-describedby="recovery">
                                    <ng-container matColumnDef="parent1">
                                        <th mat-header-cell *matHeaderCellDef colspan="14" class="centerAlign">
                                            Account Wise Details </th>
                                    </ng-container>

                                    <ng-container matColumnDef="radioButton">
                                        <th mat-header-cell *matHeaderCellDef>
                                        </th>
                                        <td mat-cell *matCellDef="let element" class="centerAlign">
                                            <mat-radio-button class="mat-radio-button mat-accent " (click)="$event.stopPropagation();">
                                            </mat-radio-button>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>




                                    <ng-container matColumnDef="gpfNo">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Gpf No *
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.gpfNo">{{element.gpfNo}}</span>

                                            <mat-form-field class="example-full-width" *ngIf="!element.gpfNo">
                                                <mat-icon matSuffix (click)="openGpfTableDialog(element,i)">search
                                                </mat-icon>
                                                <input matInput value="{{element.gpfNo}}" [datoAutoFocus]="true" readonly>
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef>Total </td>
                                    </ng-container>

                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Name
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.name">{{element.name}}</span>

                                            <mat-form-field class="example-full-width" *ngIf="!element.name">
                                                <input matInput value="{{element.name}}" alphabetsSpaceOnly [datoAutoFocus]="false">
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>

                                    <ng-container matColumnDef="subAmount">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Sub Amount (Rs.)
                                        </th>
                                        <td mat-cell *matCellDef="let
              element  let i =index">
                                            <mat-form-field class="example-full-width" class="rightAlign">
                                                <input matInput id="subAmount" maxlength="16" decimalLimitTwoOnly [(ngModel)]="element.subAmount" value="element.subAmount
                      |
                      number:'1.2-2'" [ngModelOptions]="{standalone:
                      true}">

                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef class="rightAlign">
                                            {{totalRecoverySub() | number:'1.2-2'}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="loanAmount">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Loan Amount (Rs.)
                                        </th>
                                        <td mat-cell *matCellDef="let element  let i =index">
                                            <mat-form-field class="example-full-width" class="rightAlign">
                                                <input matInput id="loanAmount" maxlength="16" decimalLimitTwoOnly [(ngModel)]="element.loanAmount" value="element.loanAmount
 |
                      number:'1.2-2'" [ngModelOptions]="{standalone:
                      true}">

                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef class="rightAlign">
                                            {{totalRecoveryLoan() | number:'1.2-2'}}
                                        </td>
                                    </ng-container>


                                    <ng-container matColumnDef="other">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Other (Rs.)
                                        </th>
                                        <td mat-cell *matCellDef="let
              element  let i =index">
                                            <mat-form-field class="example-full-width" class="rightAlign">
                                                <input matInput id="other" maxlength="16" decimalLimitTwoOnly [(ngModel)]="element.other" value="element.other
                      |
                      number:'1.2-2'" [ngModelOptions]="{standalone:
                      true}">

                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef class="rightAlign">
                                            {{otherTotal() | number:'1.2-2'}}
                                        </td>
                                    </ng-container>




                                    <ng-container matColumnDef="da">
                                        <th mat-header-cell *matHeaderCellDef scope="row">DA (Rs.)
                                        </th>
                                        <td mat-cell *matCellDef="let
              element  let i =index">
                                            <mat-form-field class="example-full-width" class="rightAlign">
                                                <input matInput id="da" maxlength="16" decimalLimitTwoOnly [(ngModel)]="element.da" value="element.da
                      |
                      number:'1.2-2'" [ngModelOptions]="{standalone:
                      true}">

                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef class="rightAlign">
                                            {{totalRecoveryy() | number:'1.2-2'}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="total">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Total (Rs.)
                                        </th>
                                        <td mat-cell *matCellDef="let
              element  let i =index" class="rightAlign">
                                            {{totalAmount(element,i) | number: '1.2-2'}}
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef class="rightAlign">
                                            {{recoveryTotal() | number:'1.2-2'}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="forMonth">
                                        <th mat-header-cell *matHeaderCellDef scope="row">For Month
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.pao">{{element.forMonth}}</span>
                                            <mat-form-field class="full-width" *ngIf="!element.forMonth">
                                                <mat-select>
                                                    <mat-option>
                                                        <ngx-mat-select-search [formControl]="typeOfForMonthCtrl" [placeholderLabel]="'Find Month...'" [noEntriesFoundLabel]="'no matching Month found'">
                                                        </ngx-mat-select-search>
                                                    </mat-option>
                                                    <mat-option *ngFor="
            let CE of classTypeOfForMonth
              | filterSelectInput: typeOfForMonthCtrl.value
          " [value]="CE.value">
                                                        {{ CE.viewValue }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>

                                    <ng-container matColumnDef="forYear">
                                        <th mat-header-cell *matHeaderCellDef scope="row">For Year
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.forYear">{{element.forYear}}</span>
                                            <mat-form-field class="full-width" *ngIf="!element.forYear">
                                                <mat-select>
                                                    <mat-option>
                                                        <ngx-mat-select-search [formControl]="typeOfForYearCtrl" [placeholderLabel]="'Find Year...'" [noEntriesFoundLabel]="'no matching Year found'">
                                                        </ngx-mat-select-search>
                                                    </mat-option>
                                                    <mat-option *ngFor="
            let CE of classTypeOfForYear
              | filterSelectInput: typeOfForYearCtrl.value
          " [value]="CE.value">
                                                        {{ CE.viewValue }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>





                                    <ng-container matColumnDef="type">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Type
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.type">{{element.type}}</span>
                                            <mat-form-field class="full-width" *ngIf="!element.type">
                                                <mat-select>
                                                    <mat-option>
                                                        <ngx-mat-select-search [formControl]="typeOfTypeeCtrl" [placeholderLabel]="'Find Type...'" [noEntriesFoundLabel]="'no matching Type found'">
                                                        </ngx-mat-select-search>
                                                    </mat-option>
                                                    <mat-option *ngFor="
            let CE of classTypeOfTypee
              | filterSelectInput: typeOfTypeeCtrl.value
          " [value]="CE.value">
                                                        {{ CE.viewValue }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>


                                    <ng-container matColumnDef="upNo">
                                        <th mat-header-cell *matHeaderCellDef scope="row">UP NO.
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.upNo">{{element.upNo}}</span>

                                            <mat-form-field class="example-full-width" *ngIf="!element.upNo">
                                                <input matInput value="{{element.upNo}}" decimalLimitTwoOnly [datoAutoFocus]="false" maxlength="8">
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>



                                    <ng-container matColumnDef="remarks">
                                        <th mat-header-cell *matHeaderCellDef scope="row">Remarks
                                        </th>
                                        <td mat-cell *matCellDef="let
              element">

                                            <span *ngIf="element.remarks">{{element.remarks}}</span>

                                            <mat-form-field class="example-full-width" *ngIf="!element.remarks">
                                                <input matInput value="{{element.remarks}}" [datoAutoFocus]="false" maxlength="100">
                                            </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container>

                                    <!-- <ng-container matColumnDef="action">
                                        <th mat-header-cell *matHeaderCellDef scope="row" style="width: 4%;">Action</th>
                                        <td mat-cell *matCellDef="let
              element;let i=index">
                                            <table class="iconTable" aria-describedby="actionBtn">
                                                <tbody>
                                                    <tr>

                                                        <td width="30" (click)="addRecoveryDetailRow(i);"
                                                            *ngIf="(i == recoveryDataSource.data.length - 1)">
                                                            <a><i class="material-icons plus add" aria-hidden="true">
                                                                    add
                                                                </i></a>
                                                        </td>


                                                        <td width="30">
                                                            <i class="material-icons
                                  plus
                                  delete" aria-hidden="true" (click)="deleteRowRecovery(i)" aria-hidden="true">
                                                                delete
                                                            </i>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                    </ng-container> -->

                                    <tr mat-header-row *matHeaderRowDef="['parent1']" class="example-second-header-row">
                                    </tr>

                                    <tr mat-header-row *matHeaderRowDef="recoveryColumn"></tr>
                                    <tr mat-row *matRowDef="let row;
          let i=
          index;columns:recoveryColumn"></tr>
                                    <tr mat-footer-row *matFooterRowDef="recoveryColumn"></tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <br>

                    <div class=" form-datatable-list">
                        <form [formGroup]="accountWiseDetailsFormGroup">
                            <div class="row">

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <mat-select formControlName="type" placeholder="Type">
                                            <mat-option>
                                                <ngx-mat-select-search [formControl]="typeOfTypeCtrl" [placeholderLabel]="'Find Type...'" [noEntriesFoundLabel]="'no matching Type found'">
                                                </ngx-mat-select-search>
                                            </mat-option>
                                            <mat-option *ngFor="let CE of classTypeOfType | filterSelectInput: typeOfTypeCtrl.value" [value]="CE.value">
                                                {{ CE.viewValue }}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>
                                </div>

                                <div class="col-sm-6 col-md-3">
                                    <mat-form-field class="full-width">
                                        <input matInput placeholder="GPF No." formControlName='gpfNumber' readonly>
                                        <mat-icon matSuffix (click)="openGpfDialog()">search</mat-icon>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" placeholder="From " formControlName="from" readonly />
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" placeholder="To GPF NO." formControlName="toGpfNo" readonly />
                                        <mat-icon matSuffix (click)="openToGpfDialog()">search</mat-icon>
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" placeholder="To" formControlName="to" readonly />
                                    </mat-form-field>
                                </div>

                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" placeholder="Transfer Amount" formControlName="transferAmount" decimalLimitTwoOnly />
                                    </mat-form-field>
                                </div>


                                <div class="col-sm-3">
                                    <mat-form-field class="full-width">
                                        <input matInput type="text" placeholder="Remarks" formControlName="remarks" />
                                    </mat-form-field>
                                </div>


















                            </div>
                        </form>
                    </div>

                </div>

            </mat-expansion-panel>
        </mat-accordion>
        <!-- Account Wise Details Ends -->

        <!-- Action buttons -->
        <div class="form-action-button">
            <button type="submit" mat-raised-button color="primary" title="Save As Draft">

                Transfer
            </button>

            <button type="button" mat-raised-button class="btnClose" title="Close">
                <i class="material-icons" title="Close" aria-hidden="true">
                    close
                </i>
                Close
            </button>

        </div>

    </div>
</div>