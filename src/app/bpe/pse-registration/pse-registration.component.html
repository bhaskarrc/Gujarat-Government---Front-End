<div class="container">
  <div class="form-wrapper">

    <!-- heading section -->
    <div class="heading-section ng-star-inserted">
      <div>PSE Registration</div>
      <div class="font-heading"><b>Reference No:</b> 19-20/BPE/REGI/001</div>
      <div class="font-heading"><b>Reference Date:</b> {{ initiatiomdate | date: 'dd-MMM-yyyy HH:mm'}}</div>
    </div>


    <!-- Navigations Starts -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">BPE</a></li>
        <li class="breadcrumb-item active" aria-current="page">PSE Registration</li>
      </ol>
    </nav>
    <!-- Navigations Ends-->

    <mat-tab-group>
      <!-- Registration Tab Starts -->
      <mat-tab>
        <ng-template mat-tab-label>Registration</ng-template>

        <form [formGroup]="pseRegistrationForm">
          <div class="panel-group">
            <div class="box box-primary">
              <div class="box-header">PSE Registration</div>
              <div class="box-body">
                <div class="row">

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="ID" formControlName="id" maxlength="15" required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.id.touched || (pseRegistrationForm.controls.id.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.id.errors?.required">
                          {{errorMessages.ID}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput placeholder="Name of the PSE" formControlName="pseName" maxlength="100"
                        numbersAlphabetsSpaceOnly required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.pseName.touched || (pseRegistrationForm.controls.pseName.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.pseName.errors?.required">
                          {{errorMessages.PSENAME}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>


                  <div class="col-sm-3">
                    <mat-form-field>
                      <mat-select name='pseType' formControlName='pseType' placeholder='Type of PSE' maxlength="20"
                        required>
                        <mat-option>
                          <ngx-mat-select-search [formControl]='pseTypeCtrl'
                            [placeholderLabel]="'Select Type of PSE ...'"
                            [noEntriesFoundLabel]="'no matching Type of PSE found'" alphabetsSpaceOnly>
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option
                          *ngFor="let item of pseTypeList | filterSelectInput : pseTypeCtrl.value : 'viewValue'"
                          [value]="item.value" matTooltip="{{item.viewValue}}">
                          {{item.viewValue}}
                        </mat-option>
                      </mat-select>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.pseType.touched || (pseRegistrationForm.controls.pseType.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.pseType.errors?.required">
                          {{errorMessages.PSETYPE}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="Abbreviated Name" maxlength="10" alphabetsSpaceOnly
                        formControlName="abbrName" required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.abbrName.touched || (pseRegistrationForm.controls.abbrName.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.abbrName.errors?.required">
                          {{errorMessages.ABBR_NAME}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="Registration Number" maxlength="20"
                        alphabetNumberHypenOnly formControlName="regNumber" required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.regNumber.touched || (pseRegistrationForm.controls.regNumber.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.regNumber.errors?.required">
                          {{errorMessages.REGISTRATION_NUMBER}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field>
                      <mat-select name='regYear' placeholder="Registration Year" formControlName="regYear" required>
                        <mat-option>
                          <ngx-mat-select-search [formControl]='registrationYearCtrl'
                            [placeholderLabel]="'Select Registration Year...'"
                            [noEntriesFoundLabel]="'no matching Registration Year found'" numbersOnlyKeypress>
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option
                          *ngFor="let item of registrationYearList | filterSelectInput : registrationYearCtrl.value : 'viewValue'"
                          [value]="item.value">
                          {{item.viewValue}}
                        </mat-option>
                      </mat-select>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.regYear.touched || (pseRegistrationForm.controls.regYear.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.regYear.errors?.required">
                          {{errorMessages.REGISTRATION_YEAR}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="Registration Act" maxlength="100" alphabetNumberHypenOnly
                        formControlName="regAct" required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.regAct.touched || (pseRegistrationForm.controls.regAct.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.regAct.errors?.required">
                          {{errorMessages.REGISTRATION_ACT}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="PAN No" numbersAlphabetsOnly maxlength="11"
                        formControlName="panNo" required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.panNo.touched || (pseRegistrationForm.controls.panNo.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.panNo.errors?.required">
                          {{errorMessages.PAN_NO}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="TAN No" maxlength="20" formControlName="tanNo"
                        numbersAlphabetsOnly required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.tanNo.touched || (pseRegistrationForm.controls.tanNo.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.tanNo.errors?.required">
                          {{errorMessages.TAN_NO}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="URN No" maxlength="20" formControlName="urnNo"
                        numbersAlphabetsOnly required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.urnNo.touched || (pseRegistrationForm.controls.urnNo.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.urnNo.errors?.required">
                          {{errorMessages.URN_NO}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                </div>
              </div>
            </div>

            <div class="box box-primary">
              <div class="box-header">Address</div>
              <div class="box-body">
                <div class="row">
                  <div class="col-sm-3">
                    <mat-form-field>
                      <mat-select name='dept' formControlName='dept' placeholder='Controlling Administrative Department'
                        required>
                        <mat-option>
                          <ngx-mat-select-search [formControl]='deptCtrl'
                            [placeholderLabel]="'Select Department Type ...'"
                            [noEntriesFoundLabel]="'no matching Department Type found'" numbersAlphabetsOnly>
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option
                          *ngFor="let item of departmentTypeList | filterSelectInput : deptCtrl.value : 'viewValue'"
                          [value]="item.value" matTooltip="{{item.viewValue}}">
                          {{item.viewValue}}
                        </mat-option>
                      </mat-select>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.dept.touched || (pseRegistrationForm.controls.dept.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.dept.errors?.required">
                          {{errorMessages.DEPARTMENT}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="Address Line 1" maxlength="100"
                        formControlName="addrFirst" required numbersAlphabetsOnly>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.addrFirst.touched || (pseRegistrationForm.controls.addrFirst.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.addrFirst.errors?.required">
                          {{errorMessages.ADDRESS}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="Address Line 2" maxlength="100"
                        formControlName="addrSecond" required numbersAlphabetsOnly>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.addrSecond.touched || (pseRegistrationForm.controls.addrSecond.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.addrSecond.errors?.required">
                          {{errorMessages.ADDRESS}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="City / Village" maxlength="15" alphabetsSpaceOnly
                        formControlName="city">
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field>
                      <mat-select name='district' formControlName='district' placeholder='District' required>
                        <mat-option>
                          <ngx-mat-select-search [formControl]='distCtrl' [placeholderLabel]="'Select District ...'"
                            [noEntriesFoundLabel]="'no matching District found'" numbersAlphabetsOnly>
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let item of districtList | filterSelectInput : distCtrl.value : 'viewValue'"
                          [value]="item.value" matTooltip="{{item.viewValue}}">
                          {{item.viewValue}}
                        </mat-option>
                      </mat-select>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.district.touched || (pseRegistrationForm.controls.district.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.district.errors?.required">
                          {{errorMessages.DISTRICT}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field>
                      <mat-select name='taluka' formControlName='taluka' placeholder='Taluka' required
                        numbersAlphabetsOnly>
                        <mat-option>
                          <ngx-mat-select-search [formControl]='talukaCtrl' [placeholderLabel]="'Select Taluka ...'"
                            [noEntriesFoundLabel]="'no matching Taluka found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let item of talukaList | filterSelectInput : talukaCtrl.value : 'viewValue'"
                          [value]="item.value" matTooltip="{{item.viewValue}}">
                          {{item.viewValue}}
                        </mat-option>
                      </mat-select>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.taluka.touched || (pseRegistrationForm.controls.taluka.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.taluka.errors?.required">
                          {{errorMessages.TALUKA}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field class="full-width">
                      <input matInput type="text" placeholder="PIN Code" formControlName="pin" numbersOnly maxlength="6"
                        required>
                      <div class="error-wrapper"
                        *ngIf="pseRegistrationForm.controls.pin.touched || (pseRegistrationForm.controls.pin.errors && isSubmitted)">
                        <mat-error *ngIf="pseRegistrationForm.controls.pin.errors?.required">
                          {{errorMessages.PIN}}
                        </mat-error>
                      </div>
                    </mat-form-field>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </form>
      </mat-tab>
      <!-- Registration Tab Ends -->


      <!-- Attachment Tab Starts-->
      <mat-tab label="Attachment">
        <app-common-attachment [attachemntValue]="attachmentTypeCode"></app-common-attachment>
      </mat-tab>
    </mat-tab-group>
    <!-- Attachment Tab Ends-->


    <!-- Common Action Button Starts -->
    <div class="form-action-button">

      <button type="submit" mat-raised-button color="primary" title="Save As Draft">
        <i class="material-icons" title="Save As Draft" aria-hidden="true">
          save
        </i>
        Save as Draft
      </button>

      <button mat-raised-button type="button" class="green" (click)="onSave();" title="Submit">
        <i class="material-icons" title="Submit" aria-hidden="true">done</i>
        Submit
      </button>

      <button type="button" mat-raised-button color="accent" title="Reset" (click)="clearForm()">
        <i class="material-icons" title="Reset" aria-hidden="true">restore</i>
        Reset
      </button>

      <button type="button" mat-raised-button color="warn" title="Listing"
        [routerLink]="['../pse-registration-listing']">
        <i class="material-icons" title="Listing" aria-hidden="true">list</i>
        Listing
      </button>

      <button type="button" mat-raised-button class="btnClose" title="Close">
        <i class="material-icons" title="Close" aria-hidden="true">close</i>
        Close
      </button>

    </div>

  </div>
</div>