<div class="container">
  <div class="form-wrapper">

    <!-- Screen Name -->
    <div class="heading-section ng-star-inserted">
      <div>Society Recovery</div>
    </div>

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
        <li class="breadcrumb-item " aria-current="page"><a href="javascript:void(0)">Payroll</a></li>
        <li class="breadcrumb-item active" aria-current="page">Society Recovery</li>
      </ol>
    </nav>

    <!-- Search Accordian Starts -->
    <form [formGroup]="seachSocietyRecoveryForm">
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Society Recovery</div>
          <div class="box-body">

            <!-- Form Starts -->
            <div class="row">

              <!-- Input Field for DDO Number -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="ddoNo" placeholder="DDO No" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for Cardex Number -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="cardexNo" placeholder="Cardex No" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for DDO Office Name -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="officeName" placeholder="Office Name" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for DDO Name -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="district" placeholder="District" readonly>
                </mat-form-field>
              </div>


              <!-- Input Field for Sub Office -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="subOfficeName" placeholder="Sub Office">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="subOfficeCtrl" [placeholderLabel]="'Find Sub Office...'"
                        [noEntriesFoundLabel]="'No matching Sub Office found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option>-- None --</mat-option>
                    <mat-option *ngFor="let item of subOfficeList | filterSelectInput:subOfficeCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- Input Field for Payroll Type -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="payrollType" placeholder="Payroll Type"
                    (selectionChange)="onPayrollType($event.value)" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="payrollTypeCtrl" [placeholderLabel]="'Find Payroll Type...'"
                        [noEntriesFoundLabel]="'no matching Payroll Type found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let payrollName  of payrollTypeList | filterSelectInput:payrollTypeCtrl.value"
                      [value]="payrollName.value">
                      {{payrollName.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="seachSocietyRecoveryForm.controls.payrollType.touched && (seachSocietyRecoveryForm.controls.payrollType.errors)">
                    <mat-error *ngIf="seachSocietyRecoveryForm.controls.payrollType.errors?.required">
                      {{errorMessages.PAYROLL_TYPE}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <!-- Input Field for Financial Year -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="financialYear" placeholder="Financial Year">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="financialYearCtrl"
                        [placeholderLabel]="'Find Financial Year...'"
                        [noEntriesFoundLabel]="'no matching Financial Year found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option>-- None --</mat-option>
                    <mat-option
                      *ngFor="let financialYearName  of financialYearList | filterSelectInput:financialYearCtrl.value"
                      [value]="financialYearName.value">
                      {{financialYearName.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- Input Field for Pay Month -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="payMonth" placeholder="Pay Month" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="payMonthCtrl" [placeholderLabel]="'Find Pay Month...'"
                        [noEntriesFoundLabel]="'no matching Pay Month found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let payMonthName  of payMonthList | filterSelectInput:payMonthCtrl.value"
                      [value]="payMonthName.value">
                      {{payMonthName.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="seachSocietyRecoveryForm.controls.payMonth.touched && (seachSocietyRecoveryForm.controls.payMonth.errors)">
                    <mat-error *ngIf="seachSocietyRecoveryForm.controls.payMonth.errors?.required">
                      {{errorMessages.PAY_MONTH}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

            </div>

            <div class="form-action-button">
              <button type="button" mat-raised-button color="primary" (click)="onChangeYearType()">Change
                Year\Type</button>
            </div>
          </div>

          <div class="box-body">
            <div class="row">

              <!-- Input Field for Society Name -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="societyName" placeholder="Society Name" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="societyNameCtrl" [placeholderLabel]="'Find Society Name...'"
                        [noEntriesFoundLabel]="'no matching Society Name found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <!-- <mat-option>-- None --</mat-option> -->
                    <mat-option *ngFor="let item  of societyNameList | filterSelectInput:societyNameCtrl.value"
                      [value]="item.value">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="seachSocietyRecoveryForm.controls.societyName.touched && (seachSocietyRecoveryForm.controls.societyName.errors)">
                    <mat-error *ngIf="seachSocietyRecoveryForm.controls.societyName.errors?.required">
                      {{errorMessages.SOCIETY_NAME}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <!-- Input Field for Employee Type -->
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-select formControlName="employeeClass" placeholder="Employee Class">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="employeeClassCtrl"
                        [placeholderLabel]="'Find Employee Class...'"
                        [noEntriesFoundLabel]="'no matching Employee Class found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option>-- None --</mat-option>
                    <mat-option
                      *ngFor="let eployeeTypeName  of employeeClassList | filterSelectInput:employeeClassCtrl.value"
                      [value]="eployeeTypeName.value">
                      {{eployeeTypeName.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- Input Field for Designation -->
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-select formControlName="designation" placeholder="Designation" multiple>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="designationCtrl" [placeholderLabel]="'Find Designation...'"
                        [noEntriesFoundLabel]="'no matching Designation found'" numbersAlphabetsSpaceOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <!-- <mat-option #allSelected (click)="ddAllSelection()" [value]="0">All
                    </mat-option> -->
                    <mat-option *ngFor="let item of designationTypeList | filterSelectInput :designationCtrl.value"
                      [value]="item.value" matTooltip="{{item.viewValue}}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- Input Field for Employee ID -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput type="text" placeholder="Employee No." formControlName="employeeNo" prEmpNoOnly>
                </mat-form-field>
              </div>

              <!-- Input Field for Employee Name -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput type="text" placeholder="Employee Name" formControlName="employeeName"
                    alphabetSpaceSpaceOnly>
                </mat-form-field>
              </div>
            </div>

            <!-- Buttons for Search and Reset Starts -->
            <div class=" form-action-button">
              <button type="submit" mat-raised-button color="primary" (click)="search()">
                <i class="material-icons" aria-hidden="true" title="Search">search</i>
                Search
              </button>
            </div>
            <!-- Buttons for Search and Reset Ends -->

            <!-- Form Ends -->
          </div>


        </div>
      </div>

    </form>
    <!-- Search Accordian Ends -->

    <br>

    <div class="mat-elevation-z8 mt-2 overflow-x-auto">
      <!-- Loan Details Table Starts -->
      <table mat-table [dataSource]="societyRecoveryDataSource" aria-describedby="societyRecovery">

        <!-- Serial Number Column -->
        <ng-container matColumnDef="srno">
          <th mat-header-cell *matHeaderCellDef scope="row">
            Sr. No.
          </th>
          <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
            {{ i + 1 }}
          </td>
        </ng-container>

        <!-- Employee Id Column -->
        <ng-container matColumnDef="employeeNo">
          <th mat-header-cell *matHeaderCellDef scope="row">Employee No.</th>
          <td mat-cell *matCellDef="let element"> {{element.employeeNo}} </td>
        </ng-container>

        <!-- Employee Name Column -->
        <ng-container matColumnDef="employeeName">
          <th mat-header-cell *matHeaderCellDef scope="row">Employee Name</th>
          <td mat-cell *matCellDef="let element"> {{element.employeeName}} </td>
        </ng-container>

        <!-- Employee Class Column -->
        <ng-container matColumnDef="employeeClass">
          <th mat-header-cell *matHeaderCellDef scope="row">Employee Class </th>
          <td mat-cell *matCellDef="let element"> {{element.employeeClass}} </td>
        </ng-container>

        <!-- Designation Column -->
        <ng-container matColumnDef="designation">
          <th mat-header-cell *matHeaderCellDef scope="row">Designation </th>
          <td mat-cell *matCellDef="let element"> {{element.designation}} </td>
        </ng-container>

        <!-- Society Name Column -->
        <ng-container matColumnDef="societyName">
          <th mat-header-cell *matHeaderCellDef scope="row">Society Name </th>
          <td mat-cell *matCellDef="let element"> {{element.societyName}} </td>
        </ng-container>

        <!-- From Date Column -->
        <ng-container matColumnDef="recoveryAmount">
          <th mat-header-cell *matHeaderCellDef scope="row">Recovery Amount</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.recoveryAmount}} </td>
        </ng-container>

        <!-- month -->
        <ng-container matColumnDef="month">
          <th mat-header-cell *matHeaderCellDef scope="row">Month</th>
          <td mat-cell *matCellDef="let element" class="rightAlign"> {{element.month}} </td>
        </ng-container>

        <!-- No Data Column -->
        <ng-container matColumnDef="noData">
          <th mat-header-cell *matHeaderCellDef mat-sort-header scope="row"></th>
          <td mat-cell *matCellDef="let element" colspan="11" class="text-center">No Data Available</td>
        </ng-container>

        <!-- Header Section Of table -->
        <tr mat-header-row *matHeaderRowDef="societyRecoveryDataSourceColumns"></tr>
        <!-- Data Fetch From .TS File to table -->
        <tr mat-row *matRowDef="let row; columns: displayedColumnsArray;let i= index;"></tr>
      </table>
      <!-- Loan Details Table Ends -->

    </div>
    <!-- Paginator -->
    <mat-paginator *ngIf="isSearch" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    <br>
    <div class="row" *ngIf="seachSocietyRecoveryForm.controls.societyName.value">

      <div class="col-sm-2">
        <a class="hyper-link"><u>Download Template</u></a>
      </div>

      <div class="col-sm-2">
        <button type="button" mat-raised-button (click)="openFileSelector()" color="warn" title="Upload">
          <i class="material-icons" title="Upload" aria-hidden="true">
            publish
          </i>
          Upload
        </button>
      </div>

      <div class="col-sm-3">
        <div *ngIf="uplodedFileName !== 'No File Uploaded'">
          <b>Uploaded template name :</b> {{uplodedFileName}}
        </div>
      </div>

    </div>


    <input type="file" id="fileBrowse" style="visibility: hidden;" (change)="onFileSelection($event)" />
    <!-- Action Buttons Starts -->
    <div class="form-action-button">
      <button type="button" mat-raised-button class="back-button" title="Back">
        <i class="material-icons" title="Back" aria-hidden="true">
          keyboard_return
        </i>
        Back
      </button>
      <button mat-raised-button type="button" class="green" title="Submit" (click)="onClickSubmit()">
        <i class="material-icons" title="Submit" aria-hidden="true">done</i> Submit
      </button>
      <button type="button" mat-raised-button color="accent" title="Reset" (click)="resetForm()">
        <i class="material-icons" title="Reset" aria-hidden="true">
          restore
        </i>
        Reset
      </button>
      <button type="button" mat-raised-button class="btnClose" title="Close">
        <i class="material-icons" title="Close" aria-hidden="true">
          close
        </i>
        Close
      </button>
    </div>
    <!-- Action Buttons Ends -->
  </div>
</div>