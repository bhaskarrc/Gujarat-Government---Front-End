<div class="container">
  <div class="form-wrapper">

    <!-- Screen Name -->
    <div class="heading-section ng-star-inserted">
      <div>Salary Adjustment</div>
    </div>

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
        <li class="breadcrumb-item " aria-current="page"><a href="javascript:void(0)">Payroll</a></li>
        <li class="breadcrumb-item active" aria-current="page">Salary Adjustment</li>
      </ol>
    </nav>

    <!-- Form Starts -->
    <form [formGroup]="salaryAdjustmentForm" (ngSubmit)="salaryAdjustmentFormData()">
      <!-- Search Panel Starts -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Salary Adjustment</div>
          <div class="box-body">
            <div class="row">

              <!-- Input Field for DDO Number -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="ddoNo" placeholder="DDO No" autocomplete="off" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for Cardex Number -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="cardexNo" placeholder="Cardex No" autocomplete="off" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for DDO Office Name -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="officeName" placeholder="Office Name" autocomplete="off" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for DDO Name -->
              <div class="col-sm-3">
                <mat-form-field class="disabled">
                  <input matInput formControlName="district" placeholder="District" autocomplete="off" readonly>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="subOfficeName" placeholder="Sub Office ">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="subOfficeCtrl" [placeholderLabel]="'Find Sub Office...'"
                        [noEntriesFoundLabel]="'No matching Sub Office found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option>-- None --</mat-option>
                    <mat-option *ngFor="let item of subOfficeList |
                        filterSelectInput:subOfficeCtrl.value" [value]="item.value" matTooltip="{{item.viewValue}}">
                      {{item.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- Input Field for Payroll Type -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="payrollType" placeholder="Payroll Type"
                    (selectionChange)="onPayrollType($event.value)" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="payrollTypeCtrl" [placeholderLabel]="'Find Payroll Type...'"
                        [noEntriesFoundLabel]="'no matching Payroll Type found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let payrollName  of payrollType_list | filterSelectInput:payrollTypeCtrl.value"
                      [value]="payrollName.value">
                      {{payrollName.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="salaryAdjustmentForm.controls.payrollType.touched && (salaryAdjustmentForm.controls.payrollType.errors)">
                    <mat-error *ngIf="salaryAdjustmentForm.controls.payrollType.errors?.required">
                      {{errorMessages.PAYROLL_TYPE}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

              <!-- Input Field for Financial Year -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="financialYear" placeholder="Financial Year">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="financialYearCtrl"
                        [placeholderLabel]="'Find Financial Year...'"
                        [noEntriesFoundLabel]="'no matching Financial Year found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option>-- None --</mat-option>
                    <mat-option
                      *ngFor="let financialYearName  of financialYear_list | filterSelectInput:financialYearCtrl.value"
                      [value]="financialYearName.value">
                      {{financialYearName.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- Input Field for Pay Month -->
              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="payMonth" placeholder="Pay Month" required>
                    <mat-option>
                      <ngx-mat-select-search [formControl]="payMonthCtrl" [placeholderLabel]="'Find Pay Month...'"
                        [noEntriesFoundLabel]="'no matching Pay Month found'">
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let payMonthName  of payMonth_list | filterSelectInput:payMonthCtrl.value"
                      [value]="payMonthName.value">
                      {{payMonthName.viewValue}}
                    </mat-option>
                  </mat-select>
                  <div class="error-wrapper"
                    *ngIf="salaryAdjustmentForm.controls.payMonth.touched && (salaryAdjustmentForm.controls.payMonth.errors)">
                    <mat-error *ngIf="salaryAdjustmentForm.controls.payMonth.errors?.required">
                      {{errorMessages.PAY_MONTH}}
                    </mat-error>
                  </div>
                </mat-form-field>
              </div>

            </div>
            <div class="form-action-button">
              <button type="button" mat-raised-button color="primary" (click)="onChangeYearType()">Change
                Year\Type</button>
            </div>
            <div class="row">

              <!-- Input Field for Employee ID -->
              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput type="text" placeholder="Employee No." formControlName="employeeID" prEmpNoOnly>
                  <mat-icon matSuffix class="searchIcon" (click)="openDialogEmployeeNumber()">search</mat-icon>
                </mat-form-field>
              </div>

              <!-- Input Field for Employee Name -->
              <div class="col-sm-3" *ngIf="showEmployeeDetails">
                <mat-form-field class="disabled">
                  <input matInput type="text" placeholder="Employee Name" formControlName="employeeName" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for Employee Type -->
              <div class="col-sm-3" *ngIf="showEmployeeDetails">
                <mat-form-field class="disabled">
                  <input matInput type="text" placeholder="Employee Class" formControlName="employeeClass" readonly>
                </mat-form-field>
              </div>

              <!-- Input Field for Designation -->
              <div class="col-sm-3" *ngIf="showEmployeeDetails">
                <mat-form-field class="disabled">
                  <input matInput type="text" placeholder="Designation" formControlName="designation" readonly>
                </mat-form-field>
              </div>

            </div>
            <!-- Buttons for Search and Reset Starts -->
            <div class=" form-action-button">
              <button type="button" mat-raised-button color="primary" (click)="showAccordion()">
                <i class="material-icons" title="Search" aria-hidden="true">search</i>
                Search
              </button>
            </div>
            <!-- Buttons for Search and Reset Ends -->
          </div>
        </div>
      </div>
      <!-- Search Panel Ends -->

      <!-- Listing accordion for Earninng Starts -->
      <mat-accordion class="colapsedata" *ngIf="showAccordiondata && showEmployeeDetails">
        <mat-expansion-panel [expanded]="false" class="nopadding">
          <mat-expansion-panel-header>
            <div class="heading-section">Earning Components</div>
          </mat-expansion-panel-header>

          <div class="box-body">
            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
              <!-- Earning Components Table Starts -->
              <table mat-table [dataSource]="EarningComponentDataSource" matSort
                aria-describedby="earningComponentsTable">

                <!-- Serial Number Column -->
                <ng-container matColumnDef="srno">
                  <th mat-header-cell *matHeaderCellDef scope="row">
                    Sr. No.
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
                    {{ i + 1 }}
                  </td>
                </ng-container>

                <!-- Salary Component Column -->
                <ng-container matColumnDef="salaryComponent">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Salary Component</th>
                  <td mat-cell *matCellDef="let element"> {{element.salaryComponent}} </td>
                </ng-container>

                <!-- Salary Component Column -->
                <ng-container matColumnDef="amount">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Amount</th>
                  <td mat-cell *matCellDef="let element" class="rightAlign">
                    <mat-form-field class="example-full-width rightAlign">
                      <input matInput class="text-right" [(ngModel)]="element.amount" value="{{element.amount}}"
                        decimalLimitTwoOnly decimalPoint2 [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                  </td>
                </ng-container>

                <!-- Action Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field class="full-width">
                      <mat-select [(ngModel)]="element.action" [ngModelOptions]="{standalone: true}">
                        <mat-option>
                          <ngx-mat-select-search [formControl]="actionCtrl" [placeholderLabel]="'Select Option...'"
                            [noEntriesFoundLabel]="'no matching Option found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let actionName  of action_list | filterSelectInput:actionCtrl.value"
                          [value]="actionName.value">
                          {{actionName.viewValue}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                </ng-container>

                <!-- Header Section Of table -->
                <tr mat-header-row *matHeaderRowDef="EarningComponentDataColumn"></tr>
                <!-- Data Fetch From .TS File to table -->
                <tr mat-row *matRowDef="let row; let i = index;columns: EarningComponentDataColumn;"></tr>
              </table>
              <!-- Earning Components Table Ends -->
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <!-- Listing accordion for Earninng Ends -->

      <br>

      <!-- Listing accordion for Deduction Starts -->
      <mat-accordion class="colapsedata" *ngIf="showAccordiondata && showEmployeeDetails">
        <mat-expansion-panel [expanded]="false" class="nopadding">
          <mat-expansion-panel-header>
            <div class="heading-section">Deduction Components</div>
          </mat-expansion-panel-header>

          <div class="box-body">
            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
              <!-- Deduction Components Table Starts -->
              <table mat-table [dataSource]="DeductionComponentDataSource" matSort
                aria-describedby="deductionComponentsTable">

                <!-- Serial Number Column -->
                <ng-container matColumnDef="srno">
                  <th mat-header-cell *matHeaderCellDef scope="row">
                    Sr. No.
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
                    {{ i + 1 }}
                  </td>
                </ng-container>

                <!-- Salary Component Column -->
                <ng-container matColumnDef="salaryComponent">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Salary Component</th>
                  <td mat-cell *matCellDef="let element"> {{element.salaryComponent}} </td>
                </ng-container>

                <!-- Salary Component Column -->
                <ng-container matColumnDef="amount">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Amount</th>
                  <td mat-cell *matCellDef="let element" class="rightAlign">
                    <mat-form-field class="rightAlign">
                      <input matInput [(ngModel)]="element.amount" value="{{element.amount}}" decimalLimitTwoOnly
                        decimalPoint2 [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                  </td>
                </ng-container>

                <!-- Action Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field class="full-width">
                      <mat-select [(ngModel)]="element.action" [ngModelOptions]="{standalone: true}">
                        <mat-option>
                          <ngx-mat-select-search [formControl]="actionCtrl" [placeholderLabel]="'Select Option...'"
                            [noEntriesFoundLabel]="'no matching Option found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let actionName  of action_list | filterSelectInput:actionCtrl.value"
                          [value]="actionName.value">
                          {{actionName.viewValue}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                </ng-container>

                <!-- Header and Footer Row Definition -->
                <tr mat-header-row *matHeaderRowDef="DeductionComponentDataColumn"></tr>
                <tr mat-row *matRowDef="let row; let i = index;columns: DeductionComponentDataColumn;"></tr>
              </table>
              <!-- Deduction Components Table Ends -->
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <!-- Listing accordion for Deduction Ends -->

      <br>

      <!-- Listing accordion for Recovery Starts -->
      <mat-accordion class="colapsedata" *ngIf="showAccordiondata && showEmployeeDetails">
        <mat-expansion-panel [expanded]="false" class="nopadding">
          <mat-expansion-panel-header>
            <div class="heading-section">Recovery Components</div>
          </mat-expansion-panel-header>

          <div class="box-body">
            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
              <!-- Recovery Components Table Starts -->
              <table mat-table [dataSource]="RecoveryComponentDataSource" matSort
                aria-describedby="recoveryComponentsTable">

                <!-- Serial Number Column -->
                <ng-container matColumnDef="srno">
                  <th mat-header-cell *matHeaderCellDef scope="row">
                    Sr. No.
                  </th>
                  <td mat-cell *matCellDef="let element; let i = index" class="centerAlign">
                    {{ i + 1 }}
                  </td>
                </ng-container>

                <!-- Salary Component Column -->
                <ng-container matColumnDef="salaryComponent">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Salary Component</th>
                  <td mat-cell *matCellDef="let element"> {{element.salaryComponent}} </td>
                </ng-container>

                <!-- Salary Component Column -->
                <ng-container matColumnDef="amount">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Amount</th>
                  <td mat-cell *matCellDef="let element" class="rightAlign">
                    <mat-form-field class="example-full-width rightAlign">
                      <input matInput class="text-right" [(ngModel)]="element.amount" value="{{element.amount}}"
                        decimalLimitTwoOnly decimalPoint2 [ngModelOptions]="{standalone: true}">
                    </mat-form-field>
                  </td>
                </ng-container>

                <!-- Action Column -->
                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row" mat-sort-header>Action</th>
                  <td mat-cell *matCellDef="let element">
                    <mat-form-field class="full-width">
                      <mat-select [(ngModel)]="element.action" [ngModelOptions]="{standalone: true}">
                        <mat-option>
                          <ngx-mat-select-search [formControl]="actionCtrl" [placeholderLabel]="'Select Option...'"
                            [noEntriesFoundLabel]="'no matching Option found'">
                          </ngx-mat-select-search>
                        </mat-option>
                        <mat-option *ngFor="let actionName  of action_list | filterSelectInput:actionCtrl.value"
                          [value]="actionName.value">
                          {{actionName.viewValue}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                </ng-container>

                <!-- Header and Footer Row Definition -->
                <tr mat-header-row *matHeaderRowDef="RecoveryComponentDataColumn"></tr>
                <tr mat-row *matRowDef="let row; let i = index;columns: RecoveryComponentDataColumn;"></tr>
              </table>
              <!-- Recovery Components Table Ends -->
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
      <!-- Listing accordion for Recovery Ends -->

      <!-- Action Buttons Starts -->
      <div class="form-action-button">

        <button mat-raised-button type="button" class="green" title="Submit" (click)="onClickSubmit()">
          <i class="material-icons" title="Submit" aria-hidden="true">done</i> Submit
        </button>
        <button type="button" mat-raised-button color="accent" title="Reset" (click)="resetForm()">
          <i class="material-icons" title="Reset" aria-hidden="true">
            restore
          </i>
          Reset
        </button>

        <button type="button" mat-raised-button class="btnClose" title="Close">
          <i class="material-icons" title="Close" aria-hidden="true">
            close
          </i>
          Close
        </button>
      </div>
      <!-- Action Buttons Ends -->
    </form>
    <!-- Form Ends -->

  </div>
</div>