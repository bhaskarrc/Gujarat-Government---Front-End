<div class="container">
  <div class="form-wrapper">

    <!-- Screen Name -->
    <div class="heading-section ng-star-inserted">
      <div>Pay Period</div>
    </div>

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="javascript:void(0);">Home</a></li>
        <li class="breadcrumb-item"><a href="javascript:void(0);">Payroll</a></li>
        <li class="breadcrumb-item active" aria-current="page">Pay Period</li>
      </ol>
    </nav>

    <form [formGroup]="payPeriodForm">
      <!-- Starts Pay Period -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Pay Period</div>

          <div class="box-body">

            <div class="row">

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="ddoNo" placeholder="DDO No." numbersOnly>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="cardexNo" placeholder="Cardex No." numbersOnly>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <input matInput formControlName="officeName" placeholder="Office Name" charactersOnly>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field>
                  <input matInput formControlName="district" placeholder="District">
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="finYear" placeholder="Financial Year"
                    (selectionChange)="onPayYearChange()">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="finYearCtrl" [placeholderLabel]="'Find Financial Year...'"
                        [noEntriesFoundLabel]="'no matching Financial Year found'" numbersHyphenOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let FY of finYearList | filterSelectInput: finYearCtrl.value"
                      [value]="FY.value">
                      {{FY.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field class="full-width">
                  <mat-select formControlName="payrollType" placeholder="Payroll Type"
                    (selectionChange)="onPayrollType($event)">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="payrollTypeCtrl" [placeholderLabel]="'Find Payroll Type...'"
                        [noEntriesFoundLabel]="'no matching Payroll Type found'" charactersOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let PT of payRollTypeList | filterSelectInput : payrollTypeCtrl.value"
                      [value]="PT.value">
                      {{PT.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-3" *ngIf="payPeriodForm.controls.payrollType.value !== '1' ">
                <mat-form-field>
                  <mat-select formControlName="payMonth" placeholder="Pay Month" (selectionChange)="onPayYearChange()">
                    <mat-option>
                      <ngx-mat-select-search [formControl]="payMonthCtrl" [placeholderLabel]="'Find Pay Month...'"
                        [noEntriesFoundLabel]="'no matching Pay Month found'" charactersOnly>
                      </ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let PM of payMonthList | filterSelectInput: payMonthCtrl.value"
                      [value]="PM.value">
                      {{PM.viewValue}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

            </div>

            <!-- Action Buttons Starts  -->
            <div class="form-action-button">
              <button type="button" mat-raised-button color="primary" title="Change Year\Type"
                (click)="onChangeYearType()">
                Change Year\Type</button>
              <button *ngIf="isCreate" type="button" mat-raised-button color="primary" title="Create"
                (click)="onCreate()">
                <i class="material-icons" aria-hidden="true" title="Create">create</i>
                Create</button>
            </div>
            <!-- Action Buttons Ends  -->

            <!-- Note Section -->
            <div *ngIf="isCreate" class="legend">
              <strong>Note : </strong> No {{payRollType}} Bill exists click on Create button.
            </div>
            <!-- End Note Section -->

          </div>

        </div>
      </div>
      <!-- Ends Pay Period -->

      <!-- Starts Pay Details -->
      <div class="panel-group">
        <div class="box box-primary">
          <div class="box-header">Pay Details</div>
          <div class="box-body">

            <div class="mat-elevation-z8 mt-2 overflow-x-auto">
              <table mat-table [dataSource]="dataSource" aria-describedby="payDetailsTable">

                <ng-container matColumnDef="payMonthYear">
                  <th mat-header-cell *matHeaderCellDef scope="row">Pay Period</th>
                  <td mat-cell *matCellDef="let element"> {{element.payMonthYear}} </td>
                </ng-container>

                <ng-container matColumnDef="payYear">
                  <th mat-header-cell *matHeaderCellDef scope="row">Pay Year</th>
                  <td mat-cell *matCellDef="let element"> {{element.payYear}} </td>
                </ng-container>

                <ng-container matColumnDef="payMonth">
                  <th mat-header-cell *matHeaderCellDef scope="row">Pay Month</th>
                  <td mat-cell *matCellDef="let element"> {{element.payMonth}} </td>
                </ng-container>

                <ng-container matColumnDef="type">
                  <th mat-header-cell *matHeaderCellDef scope="row">Type</th>
                  <td mat-cell *matCellDef="let element"> {{element.type}} </td>
                </ng-container>

                <ng-container matColumnDef="payPeriodStatus">
                  <th mat-header-cell *matHeaderCellDef scope="row">Pay Period Status</th>
                  <td mat-cell *matCellDef="let element"> {{element.payPeriodStatus}} </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef scope="row">Status</th>
                  <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef scope="row">Action</th>
                  <td mat-cell *matCellDef="let element" class="centerAlign">

                    <button *ngIf="element.isOpen" mat-raised-button title="Open" type="button" style="margin:4px;"
                      color="primary" (click)="onOpen('Open')">Open</button>

                    <button *ngIf="element.isProcess" mat-raised-button title="Process" type="button"
                      style="margin:4px;" color="primary" (click)="onOpen('Process')">Process</button>

                    <button *ngIf="element.isViewDetail" mat-raised-button title="View" type="button"
                      style="margin:4px;" color="primary" (click)="onOpen('Open')">View</button>

                    <button *ngIf="element.isViewDetail" mat-raised-button title="Detail" type="button"
                      style="margin:4px;" color="primary" (click)="onOpen('Process')">Detail</button>

                  </td>
                </ng-container>

                <ng-container matColumnDef="noData">
                  <th mat-header-cell *matHeaderCellDef scope="row"></th>
                  <td mat-cell *matCellDef="let element" colspan="8" class="centerAlign">{{element.noData}}</td>
                </ng-container>

                <!-- Header Section Of table -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <!-- Data Fetch From .TS File to table -->
                <tr mat-row *matRowDef="let row; let i = index;columns:displayedRows"></tr>
              </table>
            </div>

          </div>
        </div>
      </div>
      <!-- Ends Pay Details -->
    </form>

    <!-- Action Buttons Starts  -->
    <div class="form-action-button">
      <button type="button" class="back-button" title="Back" mat-raised-button>
        <i class="material-icons" title="Back" aria-hidden="true">
          keyboard_return
        </i>
        Back
      </button>
      <button type="button" class="btnClose" title="Close" mat-raised-button>
        <i class="material-icons" title="Close" aria-hidden="true">
          close
        </i>
        Close
      </button>
    </div>
    <!-- Action Buttons Ends  -->

  </div>
</div>